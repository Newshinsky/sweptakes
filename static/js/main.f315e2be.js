/*! For license information please see main.f315e2be.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,St,Et=!1,Tt=[],Ct=null,Nt=null,Pt=null,At=new Map,Dt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),At.forEach(Vt),Dt.forEach(Vt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==Pt&&qt(Pt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(An),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=be(n),o=[];e:{var u=Pr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=mn;break;case Nr:s=Pn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Pi=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,Vi=!1,ji=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Pa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Pi:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Pi:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function qo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Po,useRef:jo,useState:function(){return Po(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Po(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Rs,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Rs,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Rs,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Rs,Ds),Ds|=r;return bu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Pi:Ci.current;return a=Ai(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Di(n)?Pi:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Pa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Pa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Pa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Di(n)?Pi:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Pa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Pa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Pa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Du,Ru,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,Ju=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Ju=s):_s(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):ws(e)}}function ws(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function bs(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var xs,Is=Math.ceil,Ss=w.ReactCurrentDispatcher,Es=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Cs=0,Ns=null,Ps=null,As=0,Ds=0,Rs=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,qs=0,Bs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,$s=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==As?As&-As:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,As)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Xe()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?As:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?As:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&As===t||(zs=null,Bs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}ba(),Ss.current=o,Cs=i,null!==Ps?t=0:(Ns=null,As=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,js,zs),t);break}bc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,js,zs),r);break}bc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,js,zs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Xe()+500,Vi&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function fc(){Ds=Rs.current,Si(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,Ps=e=Rc(e.current,null),As=Ds=t,Os=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=Ps;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=As,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,As)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&As===t||(zs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(ba(),Cs=n,Ss.current=r,null!==Ps)throw Error(a(261));return Ns=null,As=0,Os}function mc(){for(;null!==Ps;)kc(Ps)}function gc(){for(;null!==Ps&&!Ye();)kc(Ps)}function kc(e){var t=xs(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ds)))return void(Ps=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Os=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Os&&(Os=5)}function bc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ps=Ns=null,As=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Xs?$s++:($s=0,Xs=e):$s=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=wt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var w=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Ju=w;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Ju=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Ju=b;break e}Ju=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(As&n)===n&&(4===Os||3===Os&&(130023424&As)===As&&500>Xe()-qs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Ac(19,n,t,i)).elementType=P,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(Bs=Xe()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},441:function(e,t,n){e.exports=n(372)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,R(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function P(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=P,x=function(){D.postMessage(null)}}else x=function(){m(P,0)};function R(e){S=e,I||(I=!0,x())}function O(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b90ea991.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="sweeptakes:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/sweptakes/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunksweeptakes=self.webpackChunksweeptakes||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Vr},SDK_VERSION:function(){return ta},_DEFAULT_ENTRY_NAME:function(){return Bi},_addComponent:function(){return Hi},_addOrOverwriteComponent:function(){return Gi},_apps:function(){return Wi},_clearComponents:function(){return Xi},_components:function(){return Ki},_getProvider:function(){return Yi},_registerComponent:function(){return Qi},_removeServiceInstance:function(){return $i},deleteApp:function(){return aa},getApp:function(){return ra},getApps:function(){return ia},initializeApp:function(){return na},onLog:function(){return sa},registerVersion:function(){return ua},setLogLevel:function(){return ca}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}var l=n(248),f=n(327),h=n(164);var d=function(e){e()},p=function(){return d},v=(0,t.createContext)(null);function y(){return(0,t.useContext)(v)}var m=function(){throw new Error("uSES not initialized!")},g=m,k=function(e,t){return e===t};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?y:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=g(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var b=w();n(110),n(900);var _={notify:function(){},get:function(){return[]}};function x(e,t){var n,r=_;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=p(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=_)},getListeners:function(){return r}};return o}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var S=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=x(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);I((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||v;return t.createElement(s.Provider,{value:o},i)};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?y:function(){return(0,t.useContext)(e)};return function(){return n().store}}var T=E();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?T:E(e);return function(){return t().dispatch}}var N,P,A=C();function D(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function R(e){return function(e){if(Array.isArray(e))return o(e)}(e)||D(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function U(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){if(t&&("object"===q(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function W(e){var t=j();return function(){var n,r=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z(this,n)}}function K(e,t,n){return K=j()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&F(i,n.prototype),i},K.apply(null,arguments)}function H(e){var t="function"===typeof Map?new Map:void 0;return H=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return K(e,arguments,V(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,e)},H(e)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}!function(e){g=e}(f.useSyncExternalStoreWithSelector),function(e){e}(l.useSyncExternalStore),N=h.unstable_batchedUpdates,d=N,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(P||(P={}));var Q,Y="popstate";function $(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function X(e){return{usr:e.state,key:e.key}}function J(e,t,n,r){return void 0===n&&(n=null),G({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ee(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Z(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function ee(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function te(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:Z(e);return new URL(n,t)}function ne(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=P.Pop,f=null;function h(){l=P.Pop,f&&f({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Y,h),f=e,function(){o.removeEventListener(Y,h),f=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=te(Z(e));return G({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){l=P.Push;var r=J(d.location,e,t);n&&n(r,e);var i=X(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(qa){o.location.assign(a)}s&&f&&f({action:l,location:d.location})},replace:function(e,t){l=P.Replace;var r=J(d.location,e,t);n&&n(r,e);var i=X(r),a=d.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function re(e,t,n){void 0===n&&(n="/");var r=fe(("string"===typeof t?ee(t):t).pathname||"/",n);if(null==r)return null;var i=ie(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=se(i[o],le(r));return a}function ie(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(he(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=me([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(he(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),ie(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:ue(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Q||(Q={}));var ae=/^:\w+$/,oe=function(e){return"*"===e};function ue(e,t){var n=e.split("/"),r=n.length;return n.some(oe)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!oe(e)})).reduce((function(e,t){return e+(ae.test(t)?3:""===t?1:10)}),r)}function se(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=ce({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:me([i,l.pathname]),pathnameBase:ge(me([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=me([i,l.pathnameBase]))}return a}function ce(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);de("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(qa){return de(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+qa+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function le(e){try{return decodeURI(e)}catch(qa){return de(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+qa+")."),e}}function fe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function he(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function de(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function pe(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ve(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ye(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=ee(e):(he(!(i=G({},e)).pathname||!i.pathname.includes("?"),pe("?","pathname","search",i)),he(!i.pathname||!i.pathname.includes("#"),pe("#","pathname","hash",i)),he(!i.search||!i.search.includes("#"),pe("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?ee(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ke(a),hash:we(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var me=function(e){return e.join("/").replace(/\/\/+/g,"/")},ge=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ke=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},we=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},be=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n)}(H(Error));var _e=M((function e(t,n,r){O(this,e),this.status=t,this.statusText=n||"",this.data=r}));function xe(e){return e instanceof _e}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ie=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat(R(Ie)));function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}var Ee="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Te=t.useState,Ce=t.useEffect,Ne=t.useLayoutEffect,Pe=t.useDebugValue;function Ae(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ee(n,r)}catch(qa){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var De=t.createContext(null);var Re=t.createContext(null);var Oe=t.createContext(null);var Le=t.createContext(null);var Me=t.createContext(null);var Fe=t.createContext(null);var Ue=t.createContext({outlet:null,matches:[]});var Ve=t.createContext(null);function je(){return null!=t.useContext(Fe)}function qe(){return je()||he(!1),t.useContext(Fe).location}function Be(){je()||he(!1);var e=t.useContext(Me),n=e.basename,r=e.navigator,i=t.useContext(Ue).matches,a=qe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=ye(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:me([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function ze(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(Ue).matches,a=qe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return ye(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function We(){var e=function(){var e,n=t.useContext(Ve),r=$e(He.UseRouteError),i=t.useContext(Ue),a=i.matches[i.matches.length-1];if(n)return n;return i||he(!1),!a.route.id&&he(!1),null==(e=r.errors)?void 0:e[a.route.id]}(),n=xe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var Ke,He,Ge=function(e){U(r,e);var n=W(r);function r(e){var t;return O(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return M(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Ve.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function Qe(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(De);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(Ue.Provider,{value:n},i)}function Ye(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||he(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(We,null):null,l=function(){return t.createElement(Qe,{match:o,routeContext:{outlet:e,matches:n.concat(i.slice(0,u+1))}},s?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===u)?t.createElement(Ge,{location:r.location,component:c,error:s,children:l()}):l()}),null)}function $e(e){var n=t.useContext(Oe);return n||he(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(Ke||(Ke={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(He||(He={}));var Xe;function Je(e){he(!1)}function Ze(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?P.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;je()&&he(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=ee(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,b=p.state,_=void 0===b?null:b,x=p.key,I=void 0===x?"default":x,S=t.useMemo((function(){var e=fe(y,h);return null==e?null:{pathname:e,search:g,hash:w,state:_,key:I}}),[h,y,g,w,_,I]);return null==S?null:t.createElement(Me.Provider,{value:d},t.createElement(Fe.Provider,{children:a,value:{location:S,navigationType:s}}))}function et(e){var n=e.children,r=e.location,i=t.useContext(Re);return function(e,n){je()||he(!1);var r,i=t.useContext(Oe),a=t.useContext(Ue).matches,o=a[a.length-1],u=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,qe());if(n){var l,f="string"===typeof n?ee(n):n;"/"===s||(null==(l=f.pathname)?void 0:l.startsWith(s))||he(!1),r=f}else r=c;var h=r.pathname||"/",d=re(e,{pathname:"/"===s?h:h.slice(s.length)||"/"}),p=Ye(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:me([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:me([s,e.pathnameBase])})})),a,i||void 0);return n&&p?t.createElement(Fe.Provider,{value:{location:Se({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:P.Pop}},p):p}(i&&!n?i.router.routes:nt(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Xe||(Xe={}));var tt=new Promise((function(){}));t.Component;function nt(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==Je&&he(!1),e.props.index&&e.props.children&&he(!1);var a=[].concat(R(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=nt(e.props.children,a)),r.push(o)}else r.push.apply(r,nt(e.props.children,n))})),r}function rt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function it(e){return!!e&&!!e[Gt]}function at(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Qt}(e)||Array.isArray(e)||!!e[Ht]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Ht])||ht(e)||dt(e))}function ot(e,t,n){void 0===n&&(n=!1),0===ut(e)?(n?Object.keys:Yt)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function ut(e){var t=e[Gt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ht(e)?2:dt(e)?3:0}function st(e,t){return 2===ut(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ct(e,t){return 2===ut(e)?e.get(t):e[t]}function lt(e,t,n){var r=ut(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function ft(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function ht(e){return Bt&&e instanceof Map}function dt(e){return zt&&e instanceof Set}function pt(e){return e.o||e.t}function vt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=$t(e);delete t[Gt];for(var n=Yt(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function yt(e,t){return void 0===t&&(t=!1),gt(e)||it(e)||!at(e)||(ut(e)>1&&(e.set=e.add=e.clear=e.delete=mt),Object.freeze(e),t&&ot(e,(function(e,t){return yt(t,!0)}),!0)),e}function mt(){rt(2)}function gt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function kt(e){var t=Xt[e];return t||rt(18,e),t}function wt(e,t){Xt[e]||(Xt[e]=t)}function bt(){return jt}function _t(e,t){t&&(kt("Patches"),e.u=[],e.s=[],e.v=t)}function xt(e){It(e),e.p.forEach(Et),e.p=null}function It(e){e===jt&&(jt=e.l)}function St(e){return jt={p:[],l:jt,h:e,m:!0,_:0}}function Et(e){var t=e[Gt];0===t.i||1===t.i?t.j():t.O=!0}function Tt(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||kt("ES5").S(t,e,r),r?(n[Gt].P&&(xt(t),rt(4)),at(e)&&(e=Ct(t,e),t.l||Pt(t,e)),t.u&&kt("Patches").M(n[Gt].t,e,t.u,t.s)):e=Ct(t,n,[]),xt(t),t.u&&t.v(t.u,t.s),e!==Kt?e:void 0}function Ct(e,t,n){if(gt(t))return t;var r=t[Gt];if(!r)return ot(t,(function(i,a){return Nt(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Pt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=vt(r.k):r.o;ot(3===r.i?new Set(i):i,(function(t,a){return Nt(e,r,i,t,a,n)})),Pt(e,i,!1),n&&e.u&&kt("Patches").R(r,n,e.u,e.s)}return r.o}function Nt(e,t,n,r,i,a){if(it(i)){var o=Ct(e,i,a&&t&&3!==t.i&&!st(t.D,r)?a.concat(r):void 0);if(lt(n,r,o),!it(o))return;e.m=!1}if(at(i)&&!gt(i)){if(!e.h.F&&e._<1)return;Ct(e,i),t&&t.A.l||Pt(e,i)}}function Pt(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&yt(t,n)}function At(e,t){var n=e[Gt];return(n?pt(n):e)[t]}function Dt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Rt(e){e.P||(e.P=!0,e.l&&Rt(e.l))}function Ot(e){e.o||(e.o=vt(e.t))}function Lt(e,t,n){var r=ht(t)?kt("MapSet").N(t,n):dt(t)?kt("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:bt(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Jt;n&&(i=[r],a=Zt);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):kt("ES5").J(t,n);return(n?n.A:bt()).p.push(r),r}function Mt(e){return it(e)||rt(22,e),function e(t){if(!at(t))return t;var n,r=t[Gt],i=ut(t);if(r){if(!r.P&&(r.i<4||!kt("ES5").K(r)))return r.t;r.I=!0,n=Ft(t,i),r.I=!1}else n=Ft(t,i);return ot(n,(function(t,i){r&&ct(r.t,t)===i||lt(n,t,e(i))})),3===i?new Set(n):n}(e)}function Ft(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return vt(e)}function Ut(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Gt];return Jt.get(t,e)},set:function(t){var n=this[Gt];Jt.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Gt];if(!i.P)switch(i.i){case 5:r(i)&&Rt(i);break;case 4:n(i)&&Rt(i)}}}function n(e){for(var t=e.t,n=e.k,r=Yt(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Gt){var o=t[a];if(void 0===o&&!st(t,a))return!0;var u=n[a],s=u&&u[Gt];if(s?s.t!==o:!ft(u,o))return!0}}var c=!!t[Gt];return r.length!==Yt(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};wt("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=$t(n);delete a[Gt];for(var o=Yt(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:bt(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Gt,{value:a,writable:!0}),i},S:function(e,n,i){i?it(n)&&n[Gt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Gt];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)ot(a,(function(t){t!==Gt&&(void 0!==i[t]||st(i,t)?o[t]||e(a[t]):(o[t]=!0,Rt(n)))})),ot(i,(function(e){void 0!==a[e]||st(a,e)||(o[e]=!1,Rt(n))}));else if(5===u){if(r(n)&&(Rt(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var Vt,jt,qt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Bt="undefined"!=typeof Map,zt="undefined"!=typeof Set,Wt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Kt=qt?Symbol.for("immer-nothing"):((Vt={})["immer-nothing"]=!0,Vt),Ht=qt?Symbol.for("immer-draftable"):"__$immer_draftable",Gt=qt?Symbol.for("immer-state"):"__$immer_state",Qt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Yt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,$t=Object.getOwnPropertyDescriptors||function(e){var t={};return Yt(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Xt={},Jt={get:function(e,t){if(t===Gt)return e;var n=pt(e);if(!st(n,t))return function(e,t,n){var r,i=Dt(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!at(r)?r:r===At(e.t,t)?(Ot(e),e.o[t]=Lt(e.A.h,r,e)):r},has:function(e,t){return t in pt(e)},ownKeys:function(e){return Reflect.ownKeys(pt(e))},set:function(e,t,n){var r=Dt(pt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=At(pt(e),t),a=null==i?void 0:i[Gt];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(ft(n,i)&&(void 0!==n||st(e.t,t)))return!0;Ot(e),Rt(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==At(e.t,t)||t in e.t?(e.D[t]=!1,Ot(e),Rt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=pt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){rt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){rt(12)}},Zt={};ot(Jt,(function(e,t){Zt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Zt.deleteProperty=function(e,t){return Zt.set.call(this,e,t,void 0)},Zt.set=function(e,t,n){return Jt.set.call(this,e[0],t,n,e[0])};var en=function(){function e(e){var t=this;this.g=Wt,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&rt(6),void 0!==r&&"function"!=typeof r&&rt(7),at(e)){var u=St(t),s=Lt(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?xt(u):It(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return _t(u,r),Tt(e,u)}),(function(e){throw xt(u),e})):(_t(u,r),Tt(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Kt&&(o=void 0),t.F&&yt(o,!0),r){var l=[],f=[];kt("Patches").M(e,o,l,f),r(l,f)}return o}rt(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){at(e)||rt(8),it(e)&&(e=Mt(e));var t=St(this),n=Lt(this,e,void 0);return n[Gt].C=!0,It(t),n},t.finishDraft=function(e,t){var n=(e&&e[Gt]).A;return _t(n,t),Tt(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Wt&&rt(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=kt("Patches").$;return it(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),tn=new en,nn=tn.produce,rn=(tn.produceWithPatches.bind(tn),tn.setAutoFreeze.bind(tn),tn.setUseProxies.bind(tn),tn.applyPatches.bind(tn),tn.createDraft.bind(tn),tn.finishDraft.bind(tn),nn);function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){an(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var cn="function"===typeof Symbol&&Symbol.observable||"@@observable",ln=function(){return Math.random().toString(36).substring(7).split("").join(".")},fn={INIT:"@@redux/INIT"+ln(),REPLACE:"@@redux/REPLACE"+ln(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ln()}};function hn(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function dn(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(sn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(sn(1));return n(dn)(e,t)}if("function"!==typeof e)throw new Error(sn(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(sn(3));return a}function f(e){if("function"!==typeof e)throw new Error(sn(4));if(s)throw new Error(sn(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(sn(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!hn(e))throw new Error(sn(7));if("undefined"===typeof e.type)throw new Error(sn(8));if(s)throw new Error(sn(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(sn(10));i=e,h({type:fn.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(sn(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[cn]=function(){return this},e}return h({type:fn.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[cn]=p,r}function pn(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:fn.INIT}))throw new Error(sn(12));if("undefined"===typeof n(void 0,{type:fn.PROBE_UNKNOWN_ACTION()}))throw new Error(sn(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(sn(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function yn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(sn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=vn.apply(void 0,a)(n.dispatch),un(un({},n),{},{dispatch:r})}}}function mn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var gn=mn();gn.withExtraArgument=mn;var kn=gn,wn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},_n=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},xn=Object.defineProperty,In=Object.defineProperties,Sn=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertySymbols,Tn=Object.prototype.hasOwnProperty,Cn=Object.prototype.propertyIsEnumerable,Nn=function(e,t,n){return t in e?xn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Pn=function(e,t){for(var n in t||(t={}))Tn.call(t,n)&&Nn(e,n,t[n]);if(En)for(var r=0,i=En(t);r<i.length;r++){n=i[r];Cn.call(t,n)&&Nn(e,n,t[n])}return e},An=function(e,t){return In(e,Sn(t))},Dn=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},Rn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?vn:vn.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function On(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Ln=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return wn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,_n([void 0],e[0].concat(this)))):new(t.bind.apply(t,_n([void 0],e.concat(this))))},t}(Array);function Mn(e){return at(e)?rn(e,(function(){})):e}function Fn(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Ln);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(kn.withExtraArgument(n.extraArgument)):r.push(kn));0;return r}(e)}}function Un(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Pn(Pn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Vn(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var jn=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},qn=["name","message","stack","code"],Bn=function(e,t){this.payload=e,this.meta=t},zn=function(e,t){this.payload=e,this.meta=t},Wn=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=qn;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=Un(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:An(Pn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=Un(e+"/pending",(function(e,t,n){return{payload:void 0,meta:An(Pn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Un(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||Wn)(e||"Rejected"),meta:An(Pn({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):jn(),h=new o,d=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),p=!1;function v(e){p&&(l=e,h.abort())}var y=function(){return Dn(this,null,(function(){var o,l,y,m,g;return bn(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(w=m)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return p=!0,u(i(f,e,null==(l=null==n?void 0:n.getPendingMeta)?void 0:l.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([d,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:v,rejectWithValue:function(e,t){return new Bn(e,t)},fulfillWithValue:function(e,t){return new zn(e,t)}})).then((function(t){if(t instanceof Bn)throw t;return t instanceof zn?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return y=k.sent(),[3,5];case 4:return g=k.sent(),y=g instanceof Bn?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(y)&&y.meta.condition||u(y),[2,y]}var w}))}))}();return Object.assign(y,{abort:v,requestId:f,arg:e,unwrap:function(){return y.then(Kn)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=e}();function Kn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Hn="listenerMiddleware";Un(Hn+"/add"),Un(Hn+"/removeAll"),Un(Hn+"/remove");var Gn;"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:n.g);Ut();var Qn=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Mn(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?Vn(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=Pn(Pn({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?Vn(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return Mn(e())};else{var c=Mn(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=_n([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(it(e))return void 0===(r=n(e,t))?e:r;if(at(e))return rn(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?Un(c,r):Un(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"soccerScore",initialState:{allMatch:[],firebasePrediction:[],allPredictions:[],allMatchErrorStatus:null,token:null},reducers:{setAllMatch:function(e,t){e.allMatch=t.payload},setFirebasePrediction:function(e,t){e.firebasePrediction=t.payload},setAllFirebasePrediction:function(e,t){e.allPredictions=t.payload},setAllMatchError:function(e,t){e.allMatchErrorStatus=t.payload},setToken:function(e,t){e.token=t.payload}}}),Yn=Qn.actions,$n=Yn.setAllMatch,Xn=Yn.setFirebasePrediction,Jn=Yn.setAllFirebasePrediction,Zn=(Yn.setMatch,Yn.setAllMatchError,Yn.setToken),er=Qn.reducer;function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}function nr(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var rr=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function ir(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),ne((function(e,t){var n=ee(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return J("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:Z(t))}),(function(e,t){$("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)));var u=o.current,s=c(t.useState({action:u.action,location:u.location}),2),l=s[0],f=s[1];return t.useLayoutEffect((function(){return u.listen(f)}),[u]),t.createElement(Ze,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}var ar=t.forwardRef((function(e,n){var r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,f=nr(e,rr),h=function(e,n){var r=(void 0===n?{}:n).relative;je()||he(!1);var i=t.useContext(Me),a=i.basename,o=i.navigator,u=ze(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:me([a,c])),o.createHref({pathname:f,search:l,hash:s})}(c,{relative:i}),d=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=Be(),l=qe(),f=ze(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:Z(l)===Z(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:i});return t.createElement("a",tr({},f,{href:h,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:s}))}));var or,ur;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(or||(or={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ur||(ur={}));var sr=n(184),cr=function(){return(0,sr.jsxs)("ul",{children:[(0,sr.jsx)("li",{children:(0,sr.jsx)(ar,{to:"/",children:"Prediction"})}),(0,sr.jsx)("li",{children:(0,sr.jsx)(ar,{to:"/Result",children:"Results"})}),(0,sr.jsx)("li",{children:(0,sr.jsx)(ar,{to:"/Standing",children:"Standing"})})]})};function lr(){lr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(E([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==q(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function fr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(qa){return void n(qa)}u.done?t(s):Promise.resolve(s).then(r,i)}function hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){fr(a,r,i,o,u,"next",e)}function u(e){fr(a,r,i,o,u,"throw",e)}o(void 0)}))}}function dr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var pr=!1,vr=!1,yr="${JSCORE_VERSION}",mr=function(e,t){if(!e)throw gr(t)},gr=function(e){return new Error("Firebase Database ("+yr+") INTERNAL ASSERT FAILED: "+e)},kr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},wr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},br=function(e){var t=kr(e);return wr.encodeByteArray(t,!0)},_r=function(e){return br(e).replace(/\./g,"")},xr=function(e){try{return wr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ir(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ir(e[n],t[n]));return e}function Sr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Er(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sr())}function Tr(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Cr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Nr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Pr(){var e=Sr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ar(){return!0===pr||!0===vr}function Dr(){return"object"===typeof indexedDB}var Rr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Or=function(){try{return Rr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&xr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Lr=function(e){var t=function(e){var t,n;return null===(n=null===(t=Or())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Mr=function(){var e;return null===(e=Or())||void 0===e?void 0:e.config},Fr=function(){function e(){var t=this;O(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return M(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ur(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_r(JSON.stringify({alg:"none",type:"JWT"})),_r(JSON.stringify(a)),""].join(".")}var Vr=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(B(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(B(a),jr.prototype.create),a}return M(n)}(H(Error)),jr=function(){function e(t,n,r){O(this,e),this.service=t,this.serviceName=n,this.errors=r}return M(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?qr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Vr(n,a,t);return o}}]),e}();function qr(e,t){return e.replace(Br,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Br=/\{\$([^}]+)}/g;function zr(e){return JSON.parse(e)}function Wr(e){return JSON.stringify(e)}var Kr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=zr(xr(a[0])||""),n=zr(xr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Hr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Gr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Qr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Yr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function $r(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Xr(u)&&Xr(s)){if(!$r(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Xr(e){return null!==e&&"object"===typeof e}function Jr(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Zr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ei(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ti=function(){function e(){O(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return M(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ni(e,t){var n=new ri(e,t);return n.subscribe.bind(n)}var ri=function(){function e(t,n){var r=this;O(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return M(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=dr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ii),void 0===r.error&&(r.error=ii),void 0===r.complete&&(r.complete=ii);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ii(){}function ai(e,t){return"".concat(e," failed: ").concat(t," argument ")}var oi=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ui(e){return e&&e._delegate?e._delegate:e}var si=function(){function e(t,n,r){O(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return M(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ci="[DEFAULT]",li=function(){function e(t,n){O(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return M(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Fr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch(s){}var t,n=dr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(R(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),R(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=dr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(QD){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ci?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(QD){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci;return this.component?this.component.multipleInstances?e:ci:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var fi,hi,di=function(){function e(t){O(this,e),this.name=t,this.providers=new Map}return M(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new li(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),pi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(hi||(hi={}));var vi={debug:hi.DEBUG,verbose:hi.VERBOSE,info:hi.INFO,warn:hi.WARN,error:hi.ERROR,silent:hi.SILENT},yi=hi.INFO,mi=(an(fi={},hi.DEBUG,"log"),an(fi,hi.VERBOSE,"log"),an(fi,hi.INFO,"info"),an(fi,hi.WARN,"warn"),an(fi,hi.ERROR,"error"),fi),gi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=mi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ki=function(){function e(t){O(this,e),this.name=t,this._logLevel=yi,this._logHandler=gi,this._userLogHandler=null,pi.push(this)}return M(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in hi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?vi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,hi.DEBUG].concat(t)),this._logHandler.apply(this,[this,hi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,hi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,hi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,hi.INFO].concat(t)),this._logHandler.apply(this,[this,hi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,hi.WARN].concat(t)),this._logHandler.apply(this,[this,hi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,hi.ERROR].concat(t)),this._logHandler.apply(this,[this,hi.ERROR].concat(t))}}]),e}();var wi,bi;var _i=new WeakMap,xi=new WeakMap,Ii=new WeakMap,Si=new WeakMap,Ei=new WeakMap;var Ti={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ii.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ci(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bi||(bi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ai(this),n),Pi(_i.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pi(e.apply(Ai(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ai(this),t].concat(r));return Ii.set(a,t.sort?t.sort():[t]),Pi(a)}}function Ni(e){return"function"===typeof e?Ci(e):(e instanceof IDBTransaction&&function(e){if(!xi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));xi.set(e,t)}}(e),t=e,(wi||(wi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ti):e);var t}function Pi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Pi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&_i.set(t,e)})).catch((function(){})),Ei.set(t,e),t}(e);if(Si.has(e))return Si.get(e);var t=Ni(e);return t!==e&&(Si.set(e,t),Ei.set(t,e)),t}var Ai=function(e){return Ei.get(e)};var Di,Ri,Oi=["get","getKey","getAll","getAllKeys","count"],Li=["put","add","delete","clear"],Mi=new Map;function Fi(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Mi.get(t))return Mi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Li.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Oi.includes(n))){var a=function(){var e=hr(lr().mark((function e(t){var a,o,u,s,c,l,f=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Mi.set(t,a),a}}}Ti=function(e){return un(un({},e),{},{get:function(t,n,r){return Fi(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fi(t,n)||e.has(t,n)}})}(Ti);var Ui=function(){function e(t){O(this,e),this.container=t}return M(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Vi="@firebase/app",ji="0.8.3",qi=new ki("@firebase/app"),Bi="[DEFAULT]",zi=(an(Di={},Vi,"fire-core"),an(Di,"@firebase/app-compat","fire-core-compat"),an(Di,"@firebase/analytics","fire-analytics"),an(Di,"@firebase/analytics-compat","fire-analytics-compat"),an(Di,"@firebase/app-check","fire-app-check"),an(Di,"@firebase/app-check-compat","fire-app-check-compat"),an(Di,"@firebase/auth","fire-auth"),an(Di,"@firebase/auth-compat","fire-auth-compat"),an(Di,"@firebase/database","fire-rtdb"),an(Di,"@firebase/database-compat","fire-rtdb-compat"),an(Di,"@firebase/functions","fire-fn"),an(Di,"@firebase/functions-compat","fire-fn-compat"),an(Di,"@firebase/installations","fire-iid"),an(Di,"@firebase/installations-compat","fire-iid-compat"),an(Di,"@firebase/messaging","fire-fcm"),an(Di,"@firebase/messaging-compat","fire-fcm-compat"),an(Di,"@firebase/performance","fire-perf"),an(Di,"@firebase/performance-compat","fire-perf-compat"),an(Di,"@firebase/remote-config","fire-rc"),an(Di,"@firebase/remote-config-compat","fire-rc-compat"),an(Di,"@firebase/storage","fire-gcs"),an(Di,"@firebase/storage-compat","fire-gcs-compat"),an(Di,"@firebase/firestore","fire-fst"),an(Di,"@firebase/firestore-compat","fire-fst-compat"),an(Di,"fire-js","fire-js"),an(Di,"firebase","fire-js-all"),Di),Wi=new Map,Ki=new Map;function Hi(e,t){try{e.container.addComponent(t)}catch(n){qi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Gi(e,t){e.container.addOrOverwriteComponent(t)}function Qi(e){var t=e.name;if(Ki.has(t))return qi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ki.set(t,e);var n,r=dr(Wi.values());try{for(r.s();!(n=r.n()).done;){Hi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Yi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bi;Yi(e,t).clearInstance(n)}function Xi(){Ki.clear()}var Ji=(an(Ri={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),an(Ri,"bad-app-name","Illegal App name: '{$appName}"),an(Ri,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),an(Ri,"app-deleted","Firebase App named '{$appName}' already deleted"),an(Ri,"no-options","Need to provide options, when not being deployed to hosting via source."),an(Ri,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),an(Ri,"invalid-log-argument","First argument to `onLog` must be null or a function."),an(Ri,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),an(Ri,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),an(Ri,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),an(Ri,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ri),Zi=new jr("app","Firebase",Ji),ea=function(){function e(t,n,r){var i=this;O(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new si("app",(function(){return i}),"PUBLIC"))}return M(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}]),e}(),ta="9.13.0";function na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Bi,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Zi.create("bad-app-name",{appName:String(a)});if(n||(n=Mr()),!n)throw Zi.create("no-options");var o=Wi.get(a);if(o){if($r(n,o.options)&&$r(i,o.config))return o;throw Zi.create("duplicate-app",{appName:a})}var u,s=new di(a),c=dr(Ki.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new ea(n,i,s);return Wi.set(a,f),f}function ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi,t=Wi.get(e);if(!t&&e===Bi)return na();if(!t)throw Zi.create("no-app",{appName:e});return t}function ia(){return Array.from(Wi.values())}function aa(e){return oa.apply(this,arguments)}function oa(){return(oa=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Wi.has(n)){e.next=6;break}return Wi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t,n){var r,i=null!==(r=zi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void qi.warn(u.join(" "))}Qi(new si("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function sa(e,t){if(null!==e&&"function"!==typeof e)throw Zi.create("invalid-log-argument");!function(e,t){var n,r=dr(pi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=vi[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:hi[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ca(e){var t;t=e,pi.forEach((function(e){e.setLogLevel(t)}))}var la="firebase-heartbeat-store",fa=null;function ha(){return fa||(fa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Pi(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Pi(u.result),e.oldVersion,e.newVersion,Pi(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(la)}}).catch((function(e){throw Zi.create("idb-open",{originalErrorMessage:e.message})}))),fa}function da(e){return pa.apply(this,arguments)}function pa(){return pa=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha();case 3:return r=e.sent,e.abrupt("return",r.transaction(la).objectStore(la).get(ma(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Vr?qi.warn(e.t0.message):(i=Zi.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),qi.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pa.apply(this,arguments)}function va(e,t){return ya.apply(this,arguments)}function ya(){return ya=hr(lr().mark((function e(t,n){var r,i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ha();case 3:return i=e.sent,a=i.transaction(la,"readwrite"),o=a.objectStore(la),e.next=8,o.put(n,ma(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Vr?qi.warn(e.t0.message):(u=Zi.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),qi.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ya.apply(this,arguments)}function ma(e){return"".concat(e.name,"!").concat(e.options.appId)}var ga=function(){function e(t){var n=this;O(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new _a(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return M(e,[{key:"triggerHeartbeat",value:function(){var e=hr(lr().mark((function e(){var t,n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ka(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ka(),n=wa(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=_r(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ka(){return(new Date).toISOString().substring(0,10)}function wa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=dr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),xa(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),xa(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ba,_a=function(){function e(t){O(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return M(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(qa){t(qa)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,da(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",va(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",va(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(R(r.heartbeats),R(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function xa(e){return _r(JSON.stringify({version:2,heartbeats:e})).length}ba="",Qi(new si("platform-logger",(function(e){return new Ui(e)}),"PRIVATE")),Qi(new si("heartbeat",(function(e){return new ga(e)}),"PRIVATE")),ua(Vi,ji,ba),ua(Vi,ji,"esm2017"),ua("fire-js","");var Ia="@firebase/database",Sa="0.13.10",Ea="";var Ta=function(){function e(t){O(this,e),this.domStorage_=t,this.prefix_="firebase:"}return M(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:zr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Ca=function(){function e(){O(this,e),this.cache_={},this.isInMemoryStorage=!0}return M(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Hr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Na=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ta(t)}}catch(n){}return new Ca},Pa=Na("localStorage"),Aa=Na("sessionStorage"),Da=new ki("@firebase/database"),Ra=function(){var e=1;return function(){return e++}}(),Oa=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,mr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ti;n.update(t);var r=n.digest();return wr.encodeByteArray(r)},La=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Wr(r):r,t+=" "}return t},Ma=null,Fa=!0,Ua=function(e,t){mr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Da.logLevel=hi.VERBOSE,Ma=Da.log.bind(Da),t&&Aa.set("logging_enabled",!0)):"function"===typeof e?Ma=e:(Ma=null,Aa.remove("logging_enabled"))},Va=function(){if(!0===Fa&&(Fa=!1,null===Ma&&!0===Aa.get("logging_enabled")&&Ua(!0)),Ma){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=La.apply(null,t);Ma(r)}},ja=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Va.apply(void 0,[e].concat(n))}},qa=function(){var e="FIREBASE INTERNAL ERROR: "+La.apply(void 0,arguments);Da.error(e)},Ba=function(){var e="FIREBASE FATAL ERROR: ".concat(La.apply(void 0,arguments));throw Da.error(e),new Error(e)},za=function(){var e="FIREBASE WARNING: "+La.apply(void 0,arguments);Da.warn(e)},Wa=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ka="[MIN_NAME]",Ha="[MAX_NAME]",Ga=function(e,t){if(e===t)return 0;if(e===Ka||t===Ha)return-1;if(t===Ka||e===Ha)return 1;var n=ro(e),r=ro(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Qa=function(e,t){return e===t?0:e<t?-1:1},Ya=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Wr(t))},$a=function e(t){if("object"!==typeof t||null===t)return Wr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Wr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Xa=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ja(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Za=function(e){mr(!Wa(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var eo=new RegExp("^-?(0*)\\d{1,10}$"),to=-2147483648,no=2147483647,ro=function(e){if(eo.test(e)){var t=Number(e);if(t>=to&&t<=no)return t}return null},io=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw za("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ao=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},oo=function(){function e(t,n){var r=this;O(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return M(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){za('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),uo=function(){function e(t,n,r){var i=this;O(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return M(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Va("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',za(e)}}]),e}(),so=function(){function e(t){O(this,e),this.accessToken=t}return M(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();so.OWNER="owner";var co="5",lo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fo="websocket",ho="long_polling",po=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];O(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pa.get("host:"+t)||this._host}return M(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pa.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function vo(e,t,n){var r;if(mr("string"===typeof t,"typeof type must == string"),mr("object"===typeof n,"typeof params must == object"),t===fo)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ho)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Ja(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var yo=function(){function e(){O(this,e),this.counters_={}}return M(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Hr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ir(void 0,this.counters_)}}]),e}(),mo={},go={};function ko(e){var t=e.toString();return mo[t]||(mo[t]=new yo),mo[t]}var wo=function(){function e(t){O(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return M(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&io((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),bo="start",_o="close",xo=function(){function e(t,n,r,i,a,o,u){var s=this;O(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ja(t),this.stats_=ko(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),vo(n,ho,e)}}return M(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wo(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ar()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Io((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===bo)n.id=a,n.password=o;else{if(i!==_o)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=co,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&lo.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=br(t),r=Xa(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ar()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Wr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ar()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Io=function(){function e(t,n,r,i){if(O(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ar())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Ra(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Va("frame writing exception"),u.stack&&Va(u.stack),Va(u)}}}return M(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ar()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Va("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Va("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),So=null;"undefined"!==typeof MozWebSocket?So=MozWebSocket:"undefined"!==typeof WebSocket&&(So=WebSocket);var Eo=function(){function e(t,n,r,i,a,o,u){O(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ja(this.connId),this.stats_=ko(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return M(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pa.set("previous_websocket_failure",!0);try{var r;if(Ar()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(co,"/").concat(Ea,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new So(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Pa.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=zr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(mr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Xa(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=co,!Ar()&&"undefined"!==typeof location&&location.hostname&&lo.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),vo(e,fo,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==So&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Pa.isInMemoryStorage||!0===Pa.get("previous_websocket_failure")}}]),e}();Eo.responsesRequiredToBeHealthy=2,Eo.healthyTimeout=3e4;var To=function(){function e(t){O(this,e),this.initTransports_(t)}return M(e,[{key:"initTransports_",value:function(t){var n=Eo&&Eo.isAvailable(),r=n&&!Eo.previouslyFailed();if(t.webSocketOnly&&(n||za("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Eo];else{var i,a=this.transports_=[],o=dr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[xo,Eo]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();To.globalTransportInitialized_=!1;var Co=function(){function e(t,n,r,i,a,o,u,s,c,l){O(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ja("c:"+this.id+":"),this.transportManager_=new To(n),this.log_("Connection created"),this.start_()}return M(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ao((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ya("t",e),n=Ya("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ya("t",e),n=Ya("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ya("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?qa("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qa("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),co!==n&&za("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ao((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ao((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),No=function(){function e(){O(this,e)}return M(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Po=function(){function e(t){O(this,e),this.allowedEvents_=t,this.listeners_={},mr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return M(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=R(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){mr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ao=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Er()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return M(n,[{key:"getInitialEvent",value:function(e){return mr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Po),Do=function(){function e(t,n){if(O(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return M(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Ro(){return new Do("")}function Oo(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Lo(e){return e.pieces_.length-e.pieceNum_}function Mo(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Do(e.pieces_,t)}function Fo(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Uo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Vo(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Do(t,0)}function jo(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Do)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Do(n,0)}function qo(e){return e.pieceNum_>=e.pieces_.length}function Bo(e,t){var n=Oo(e),r=Oo(t);if(null===n)return t;if(n===r)return Bo(Mo(e),Mo(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zo(e,t){if(Lo(e)!==Lo(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Wo(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Lo(e)>Lo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ko=M((function e(t,n){O(this,e),this.errorPrefix_=n,this.parts_=Uo(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=oi(this.parts_[r]);Ho(this)}));function Ho(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Go(e))}function Go(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Qo=function(e){U(n,e);var t=W(n);function n(){var e,r,i;return O(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return M(n,[{key:"getInitialEvent",value:function(e){return mr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Po),Yo=1e3,$o=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u,s,c){var l;if(O(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=ja("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Yo,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ar())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Qo.getInstance().on("visible",l.onVisible_,B(l)),-1===e.host.indexOf("fblocal")&&Ao.getInstance().on("online",l.onOnline_,B(l)),l}return M(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Wr(i)),mr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Fr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),mr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),mr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Kr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Kr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),mr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Wr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):qa("Unrecognized action received from server: "+Wr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;mr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=hr(lr().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,p,v,y,m=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){mr(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=c(d,2),v=p[0],y=p[1],u?Va("getToken() completed but was canceled"):(Va("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new Co(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){za(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&za(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Va("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Va("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qr(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return $a(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Do(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Va("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Va("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=dr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=dr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ar()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Ea.replace(/\./g,"-")]=1,Er()?e["framework.cordova"]=1:Nr()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ao.getInstance().currentlyOnline();return Qr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Hr(e,"w")){var n=Gr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();za("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(No);$o.nextPersistentConnectionId_=0,$o.nextConnectionId_=0;var Xo,Jo=function(){function e(t,n){O(this,e),this.name=t,this.node=n}return M(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Zo=function(){function e(){O(this,e)}return M(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Jo(Ka,e),r=new Jo(Ka,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Jo.MIN}}]),e}(),eu=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"compare",value:function(e,t){return Ga(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw gr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Jo.MIN}},{key:"maxPost",value:function(){return new Jo(Ha,Xo)}},{key:"makePost",value:function(e,t){return mr("string"===typeof e,"KeyIndex indexValue must always be a string."),new Jo(e,Xo)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Xo},set:function(e){Xo=e}}]),n}(Zo),tu=new eu,nu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;O(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return M(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ru=function(){function e(t,n,r,i,a){O(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ou.EMPTY_NODE,this.right=null!=a?a:ou.EMPTY_NODE}return M(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ou.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ou.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ru.RED=!0,ru.BLACK=!1;var iu,au=function(){function e(){O(this,e)}return M(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ru(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),ou=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;O(this,e),this.comparator_=t,this.root_=n}return M(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ru.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ru.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new nu(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new nu(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new nu(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new nu(this.root_,null,this.comparator_,!0,e)}}]),e}();function uu(e,t){return Ga(e.name,t.name)}function su(e,t){return Ga(e,t)}ou.EMPTY_NODE=new au;var cu,lu,fu,hu=function(e){return"number"===typeof e?"number:"+Za(e):"string:"+e},du=function(e){if(e.isLeafNode()){var t=e.val();mr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Hr(t,".sv"),"Priority must be a string or number.")}else mr(e===iu||e.isEmpty(),"priority of unexpected type.");mr(e===iu||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;O(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,mr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),du(this.priorityNode_)}return M(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return qo(t)?this:".priority"===Oo(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Oo(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(mr(".priority"!==r||1===Lo(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mo(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+hu(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Za(this.value_):this.value_,this.lazyHash_=Oa(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(mr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return mr(i>=0,"Unknown leaf type: "+n),mr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return cu},set:function(e){cu=e}}]),e}();pu.VALUE_TYPE_ORDER=["object","boolean","number","string"];var vu,yu,mu=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ga(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Jo.MIN}},{key:"maxPost",value:function(){return new Jo(Ha,new pu("[PRIORITY-POST]",fu))}},{key:"makePost",value:function(e,t){var n=lu(e);return new Jo(t,new pu("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Zo),gu=new mu,ku=Math.log(2),wu=function(){function e(t){O(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ku,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return M(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),bu=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new ru(o,a.node,ru.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new ru(o,a.node,ru.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new ru(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,ru.BLACK):(u(f,ru.BLACK),u(f,ru.RED))}return a}(new wu(e.length));return new ou(r||t,a)},_u={},xu=function(){function e(t,n){O(this,e),this.indexes_=t,this.indexSet_=n}return M(e,[{key:"get",value:function(e){var t=Gr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ou?t:null}},{key:"hasIndex",value:function(e){return Hr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){mr(t!==tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Jo.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?bu(i,t.getCompare()):_u;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Yr(this.indexes_,(function(e,i){var a=Gr(r.indexSet_,i);if(mr(a,"Missing index implementation for "+i),e===_u){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Jo.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),bu(o,a.getCompare())}return _u}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Jo(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Yr(this.indexes_,(function(e){if(e===_u)return e;var r=n.get(t.name);return r?e.remove(new Jo(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return mr(_u&&gu,"ChildrenNode.ts has not been loaded"),vu=vu||new e({".priority":_u},{".priority":gu})}}]),e}(),Iu=function(){function e(t,n,r){O(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&du(this.priorityNode_),this.children_.isEmpty()&&mr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return M(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||yu}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?yu:t}},{key:"getChild",value:function(e){var t=Oo(e);return null===t?this:this.getImmediateChild(t).getChild(Mo(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(mr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Jo(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?yu:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Oo(e);if(null===n)return t;mr(".priority"!==Oo(e)||1===Lo(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Mo(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(gu,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+hu(this.getPriority().val())+":"),this.forEachChild(gu,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Oa(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Jo(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Jo(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Jo(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Jo.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Jo.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Su?-1:0}},{key:"withIndex",value:function(t){if(t===tu||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===tu||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(gu),r=t.getIterator(gu),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===tu?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return yu||(yu=new e(new ou(su),null,xu.Default))}}]),e}();Iu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Su=new(function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,new ou(su),Iu.EMPTY_NODE,xu.Default)}return M(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Iu.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Iu));Object.defineProperties(Jo,{MIN:{value:new Jo(Ka,Iu.EMPTY_NODE)},MAX:{value:new Jo(Ha,Su)}}),eu.__EMPTY_NODE=Iu.EMPTY_NODE,pu.__childrenNodeConstructor=Iu,iu=Su,function(e){fu=e}(Su);function Eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Iu.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),mr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new pu(n,Eu(t))}if(e instanceof Array){var r=Iu.EMPTY_NODE;return Ja(e,(function(t,n){if(Hr(e,t)&&"."!==t.substring(0,1)){var i=Eu(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Eu(t))}var i=[],a=!1,o=e;if(Ja(o,(function(e,t){if("."!==e.substring(0,1)){var n=Eu(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Jo(e,n)))}})),0===i.length)return Iu.EMPTY_NODE;var u=bu(i,uu,(function(e){return e.name}),su);if(a){var s=bu(i,gu.getCompare());return new Iu(u,Eu(t),new xu({".priority":s},{".priority":gu}))}return new Iu(u,Eu(t),xu.Default)}!function(e){lu=e}(Eu);var Tu=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).indexPath_=e,mr(!qo(e)&&".priority"!==Oo(e),"Can't create PathIndex with empty path or .priority key"),r}return M(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ga(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Eu(e),r=Iu.EMPTY_NODE.updateChild(this.indexPath_,n);return new Jo(t,r)}},{key:"maxPost",value:function(){var e=Iu.EMPTY_NODE.updateChild(this.indexPath_,Su);return new Jo(Ha,e)}},{key:"toString",value:function(){return Uo(this.indexPath_,0).join("/")}}]),n}(Zo),Cu=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Ga(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Jo.MIN}},{key:"maxPost",value:function(){return Jo.MAX}},{key:"makePost",value:function(e,t){var n=Eu(e);return new Jo(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Zo),Nu=new Cu,Pu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Au(e){return{type:"value",snapshotNode:e}}function Du(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ru(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ou(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Lu=function(){function e(t){O(this,e),this.index_=t}return M(e,[{key:"updateChild",value:function(e,t,n,r,i,a){mr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Ru(t,o)):mr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Du(t,n)):a.trackChildChange(Ou(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(gu,(function(e,r){t.hasChild(e)||n.trackChildChange(Ru(e,r))})),t.isLeafNode()||t.forEachChild(gu,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ou(t,r,i))}else n.trackChildChange(Du(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Iu.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Mu=function(){function e(t){O(this,e),this.indexedFilter_=new Lu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return M(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Jo(t,n))||(n=Iu.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Iu.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Iu.EMPTY_NODE);var i=this;return t.forEachChild(gu,(function(e,t){i.matches(new Jo(e,t))||(r=r.updateImmediateChild(e,Iu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Fu=function(){function e(t){O(this,e),this.rangedFilter_=new Mu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return M(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Jo(t,n))||(n=Iu.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Iu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Iu.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Iu.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,Iu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;mr(u.numChildren()===this.limit_,"");var s=new Jo(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ou(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ru(t,f));var p=u.updateImmediateChild(t,Iu.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(Du(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Ru(c.name,c.node)),i.trackChildChange(Du(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,Iu.EMPTY_NODE)):e}}]),e}(),Uu=function(){function e(){O(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gu}return M(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return mr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return mr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ka}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return mr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return mr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ha}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return mr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===gu}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Vu(e){var t,n={};return e.isDefault()||(e.index_===gu?t="$priority":e.index_===Nu?t="$value":e.index_===tu?t="$key":(mr(e.index_ instanceof Tu,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Wr(t),e.startSet_&&(n.startAt=Wr(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Wr(e.indexStartName_))),e.endSet_&&(n.endAt=Wr(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Wr(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function ju(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==gu&&(t.i=e.index_.toString()),t}var qu=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=ja("p:rest:"),o.listens_={},o}return M(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Vu(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Gr(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Vu(e._queryParams),r=e._path.toString(),i=new Fr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Jr(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=zr(l.responseText)}catch(n){za("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&za("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(mr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(No),Bu=function(){function e(){O(this,e),this.rootNode_=Iu.EMPTY_NODE}return M(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function zu(){return{value:null,children:new Map}}function Wu(e,t,n){if(qo(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Oo(t);e.children.has(r)||e.children.set(r,zu()),Wu(e.children.get(r),t=Mo(t),n)}}function Ku(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ku(r,new Do(t.toString()+"/"+e),n)}))}var Hu,Gu=function(){function e(t){O(this,e),this.collection_=t,this.last_=null}return M(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ja(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Qu=function(){function e(t,n){O(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Gu(t);var r=1e4+2e4*Math.random();ao(this.reportStats_.bind(this),Math.floor(r))}return M(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Ja(t,(function(t,i){i>0&&Hr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ao(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Yu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hu||(Hu={}));var $u,Xu=function(){function e(t,n,r){O(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Hu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return M(e,[{key:"operationForChild",value:function(t){if(qo(this.path)){if(null!=this.affectedTree.value)return mr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Do(t));return new e(Ro(),n,this.revert)}return mr(Oo(this.path)===t,"operationForChild called for unrelated child."),new e(Mo(this.path),this.affectedTree,this.revert)}}]),e}(),Ju=function(){function e(t,n){O(this,e),this.source=t,this.path=n,this.type=Hu.LISTEN_COMPLETE}return M(e,[{key:"operationForChild",value:function(t){return qo(this.path)?new e(this.source,Ro()):new e(this.source,Mo(this.path))}}]),e}(),Zu=function(){function e(t,n,r){O(this,e),this.source=t,this.path=n,this.snap=r,this.type=Hu.OVERWRITE}return M(e,[{key:"operationForChild",value:function(t){return qo(this.path)?new e(this.source,Ro(),this.snap.getImmediateChild(t)):new e(this.source,Mo(this.path),this.snap)}}]),e}(),es=function(){function e(t,n,r){O(this,e),this.source=t,this.path=n,this.children=r,this.type=Hu.MERGE}return M(e,[{key:"operationForChild",value:function(t){if(qo(this.path)){var n=this.children.subtree(new Do(t));return n.isEmpty()?null:n.value?new Zu(this.source,Ro(),n.value):new e(this.source,Ro(),n)}return mr(Oo(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Mo(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),ts=function(){function e(t,n,r){O(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return M(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(qo(e))return this.isFullyInitialized()&&!this.filtered_;var t=Oo(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),ns=M((function e(t){O(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function rs(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw gr("Should only compare child_ events.");var r=new Jo(t.childName,t.snapshotNode),i=new Jo(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function is(e,t){return{eventCache:e,serverCache:t}}function as(e,t,n,r){return is(new ts(t,n,r),e.serverCache)}function os(e,t,n,r){return is(e.eventCache,new ts(t,n,r))}function us(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ss(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var cs=function(){return $u||($u=new ou(Qa)),$u},ls=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cs();O(this,e),this.value=t,this.children=n}return M(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Ro(),value:this.value};if(qo(e))return null;var n=Oo(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Mo(e),t);return null!=i?{path:jo(new Do(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(qo(t))return this;var n=Oo(t),r=this.children.get(n);return null!==r?r.subtree(Mo(t)):new e(null)}},{key:"set",value:function(t,n){if(qo(t))return new e(n,this.children);var r=Oo(t),i=(this.children.get(r)||new e(null)).set(Mo(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(qo(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Oo(t),r=this.children.get(n);if(r){var i,a=r.remove(Mo(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(qo(e))return this.value;var t=Oo(e),n=this.children.get(t);return n?n.get(Mo(e)):null}},{key:"setTree",value:function(t,n){if(qo(t))return n;var r,i=Oo(t),a=(this.children.get(i)||new e(null)).setTree(Mo(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Ro(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(jo(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Ro(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(qo(e))return null;var i=Oo(e),a=this.children.get(i);return a?a.findOnPath_(Mo(e),jo(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Ro(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(qo(t))return this;this.value&&r(n,this.value);var i=Oo(t),a=this.children.get(i);return a?a.foreachOnPath_(Mo(t),jo(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Ro(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(jo(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Ja(t,(function(e,t){n=n.set(new Do(e),t)})),n}}]),e}(),fs=function(){function e(t){O(this,e),this.writeTree_=t}return M(e,null,[{key:"empty",value:function(){return new e(new ls(null))}}]),e}();function hs(e,t,n){if(qo(t))return new fs(new ls(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Bo(i,t);return a=a.updateChild(o,n),new fs(e.writeTree_.set(i,a))}var u=new ls(n),s=e.writeTree_.setTree(t,u);return new fs(s)}function ds(e,t,n){var r=e;return Ja(n,(function(e,n){r=hs(r,jo(t,e),n)})),r}function ps(e,t){if(qo(t))return fs.empty();var n=e.writeTree_.setTree(t,new ls(null));return new fs(n)}function vs(e,t){return null!=ys(e,t)}function ys(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Bo(n.path,t)):null}function ms(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(gu,(function(e,n){t.push(new Jo(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Jo(e,n.value))})),t}function gs(e,t){if(qo(t))return e;var n=ys(e,t);return new fs(null!=n?new ls(n):e.writeTree_.subtree(t))}function ks(e){return e.writeTree_.isEmpty()}function ws(e,t){return bs(Ro(),e.writeTree_,t)}function bs(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(mr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=bs(jo(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(jo(e,".priority"),r)),n}function _s(e,t){return Ms(t,e)}function xs(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Is(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));mr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Ss(u,r.path)?i=!1:Wo(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Ts(e.allWrites,Es,Ro()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ps(e.visibleWrites,r.path):Ja(r.children,(function(t){e.visibleWrites=ps(e.visibleWrites,jo(r.path,t))}));return!0}return!1}function Ss(e,t){if(e.snap)return Wo(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Wo(jo(e.path,n),t))return!0;return!1}function Es(e){return e.visible}function Ts(e,t,n){for(var r=fs.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Wo(n,o)?r=hs(r,u=Bo(n,o),a.snap):Wo(o,n)&&(u=Bo(o,n),r=hs(r,Ro(),a.snap.getChild(u)));else{if(!a.children)throw gr("WriteRecord should have .snap or .children");if(Wo(n,o))r=ds(r,u=Bo(n,o),a.children);else if(Wo(o,n))if(qo(u=Bo(o,n)))r=ds(r,Ro(),a.children);else{var s=Gr(a.children,Oo(u));if(s){var c=s.getChild(Mo(u));r=hs(r,Ro(),c)}}}}}return r}function Cs(e,t,n,r,i){if(r||i){var a=gs(e.visibleWrites,t);if(!i&&ks(a))return n;if(i||null!=n||vs(a,Ro())){return ws(Ts(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Wo(e.path,t)||Wo(t,e.path))}),t),n||Iu.EMPTY_NODE)}return null}var o=ys(e.visibleWrites,t);if(null!=o)return o;var u=gs(e.visibleWrites,t);return ks(u)?n:null!=n||vs(u,Ro())?ws(u,n||Iu.EMPTY_NODE):null}function Ns(e,t,n,r){return Cs(e.writeTree,e.treePath,t,n,r)}function Ps(e,t){return function(e,t,n){var r=Iu.EMPTY_NODE,i=ys(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(gu,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=gs(e.visibleWrites,t);return n.forEachChild(gu,(function(e,t){var n=ws(gs(a,new Do(e)),t);r=r.updateImmediateChild(e,n)})),ms(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ms(gs(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function As(e,t,n,r){return function(e,t,n,r,i){mr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=jo(t,n);if(vs(e.visibleWrites,a))return null;var o=gs(e.visibleWrites,a);return ks(o)?i.getChild(n):ws(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Ds(e,t){return function(e,t){return ys(e.visibleWrites,t)}(e.writeTree,jo(e.treePath,t))}function Rs(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=gs(e.visibleWrites,t),c=ys(s,Ro());if(null!=c)u=c;else{if(null==n)return[];u=ws(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Os(e,t,n){return function(e,t,n,r){var i=jo(t,n),a=ys(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?ws(gs(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ls(e,t){return Ms(jo(e.treePath,t),e.writeTree)}function Ms(e,t){return{treePath:e,writeTree:t}}var Fs=function(){function e(){O(this,e),this.changeMap=new Map}return M(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;mr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),mr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ou(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ru(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Du(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw gr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ou(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Us=new(function(){function e(){O(this,e)}return M(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Vs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;O(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return M(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new ts(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Os(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ss(this.viewCache_),i=Rs(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function js(e,t,n,r,i){var a,o,u=new Fs;if(n.type===Hu.OVERWRITE){var s=n;s.source.fromUser?a=zs(e,t,s.path,s.snap,r,i,u):(mr(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!qo(s.path),a=Bs(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Hu.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=jo(n,r);Ws(t,Oo(c))&&(u=zs(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=jo(n,r);Ws(t,Oo(c))||(u=zs(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(mr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Hs(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Hu.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Ds(r,n))return t;var u,s=new Vs(r,t,i),c=t.eventCache.getNode();if(qo(n)||".priority"===Oo(n)){var l;if(t.serverCache.isFullyInitialized())l=Ns(r,ss(t));else{var f=t.serverCache.getNode();mr(f instanceof Iu,"serverChildren would be complete if leaf node"),l=Ps(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=Oo(n),d=Os(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,Mo(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,Iu.EMPTY_NODE,Mo(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ns(r,ss(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Ds(r,Ro()),as(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Ds(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(qo(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Bs(e,t,n,s.getNode().getChild(n),i,a,u,o);if(qo(n)){var c=new ls(null);return s.getNode().forEachChild(tu,(function(e,t){c=c.set(new Do(e),t)})),Hs(e,t,n,c,i,a,u,o)}return t}var l=new ls(null);return r.foreach((function(e,t){var r=jo(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Hs(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Hu.LISTEN_COMPLETE)throw gr("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=os(t,a.getNode(),a.isFullyInitialized()||qo(n),a.isFiltered());return qs(e,o,n,r,Us,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=us(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Au(us(t)))}}(t,a,f),{viewCache:a,changes:f}}function qs(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Ds(r,n))return t;if(qo(n))if(mr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=ss(t),l=Ps(r,c instanceof Iu?c:Iu.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=Ns(r,ss(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Oo(n);if(".priority"===h){mr(1===Lo(n),"Can't have a priority with additional path components");var d=s.getNode(),p=As(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=Mo(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=As(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=Os(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return as(t,o,s.isFullyInitialized()||qo(n),e.filter.filtersNodes())}function Bs(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(qo(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=Oo(n);if(!c.isCompleteForPath(n)&&Lo(n)>1)return t;var d=Mo(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Us,null)}var v=os(t,s,c.isFullyInitialized()||qo(n),l.filtersNodes());return qs(e,v,n,i,new Vs(i,v,a),u)}function zs(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Vs(i,t,a);if(qo(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=as(t,s,!0,e.filter.filtersNodes());else{var f=Oo(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=as(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=Mo(n),p=c.getNode().getImmediateChild(f);if(qo(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Fo(d)&&v.getChild(Vo(d)).isEmpty()?v:v.updateChild(d,r):Iu.EMPTY_NODE}if(p.equals(h))u=t;else u=as(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Ws(e,t){return e.eventCache.isCompleteForChild(t)}function Ks(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Hs(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=qo(n)?r:new ls(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ks(0,t.serverCache.getNode().getImmediateChild(n),r);c=Bs(e,c,new Do(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Ks(0,t.serverCache.getNode().getImmediateChild(n),r);c=Bs(e,c,new Do(n),f,i,a,o,u)}})),c}var Gs,Qs=function(){function e(t,n){O(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Lu(i.getIndex()),o=(r=i).loadsAllData()?new Lu(r.getIndex()):r.hasLimit()?new Fu(r):new Mu(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(Iu.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(Iu.EMPTY_NODE,s.getNode(),null),f=new ts(c,u.isFullyInitialized(),a.filtersNodes()),h=new ts(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=is(h,f),this.eventGenerator_=new ns(this.query_)}return M(e,[{key:"query",get:function(){return this.query_}}]),e}();function Ys(e,t){var n=ss(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qo(t)&&!n.getImmediateChild(Oo(t)).isEmpty())?n.getChild(t):null}function $s(e){return 0===e.eventRegistrations_.length}function Xs(e,t,n){var r=[];if(n){mr(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Js(e,t,n,r){t.type===Hu.MERGE&&null!==t.source.queryId&&(mr(ss(e.viewCache_),"We should always have a full cache before handling merges"),mr(us(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=js(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,mr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),mr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),mr(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Zs(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Zs(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),rs(e,i,"child_removed",t,r,n),rs(e,i,"child_added",t,r,n),rs(e,i,"child_moved",a,r,n),rs(e,i,"child_changed",t,r,n),rs(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var ec,tc=M((function e(){O(this,e),this.views=new Map}));function nc(e){return 0===e.views.size}function rc(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return mr(null!=a,"SyncTree gave us an op for an invalid query."),Js(a,t,n,r)}var o,u=[],s=dr(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Js(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function ic(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=Ns(n,i?r:null),s=!1;u?s=!0:r instanceof Iu?(u=Ps(n,r),s=!1):(u=Iu.EMPTY_NODE,s=!1);var c=is(new ts(u,s,!1),new ts(r,i,!1));return new Qs(t,c)}return o}function ac(e,t,n,r,i,a){var o=ic(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(gu,(function(e,t){r.push(Du(e,t))})),n.isFullyInitialized()&&r.push(Au(n.getNode())),Zs(e,r,n.getNode(),t)}(o,n)}function oc(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=fc(e);if("default"===i){var s,l=dr(e.views.entries());try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];o=o.concat(Xs(d,n,r)),$s(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Xs(p,n,r)),$s(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!fc(e)&&a.push(new(mr(Gs,"Reference.ts has not been loaded"),Gs)(t._repo,t._path)),{removed:a,events:o}}function uc(e){var t,n=[],r=dr(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function sc(e,t){var n,r=null,i=dr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ys(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function cc(e,t){if(t._queryParams.loadsAllData())return hc(e);var n=t._queryIdentifier;return e.views.get(n)}function lc(e,t){return null!=cc(e,t)}function fc(e){return null!=hc(e)}function hc(e){var t,n=dr(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var dc=1,pc=M((function e(t){O(this,e),this.listenProvider_=t,this.syncPointTree_=new ls(null),this.pendingWriteTree_={visibleWrites:fs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function vc(e,t,n,r,i){return function(e,t,n,r,i){mr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hs(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?xc(e,new Zu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yc(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xs(e.pendingWriteTree_,t),i=Is(e.pendingWriteTree_,t);if(i){var a=new ls(null);return null!=r.snap?a=a.set(Ro(),!0):Ja(r.children,(function(e){a=a.set(new Do(e),!0)})),xc(e,new Xu(r.path,a,n))}return[]}function mc(e,t,n){return xc(e,new Zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function gc(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||lc(o,t))){var s=oc(o,t,n,r);nc(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return fc(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=Dc(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=Ec(e,v);e.listenProvider_.startListening(Rc(y),Tc(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(Rc(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(Cc(t));e.listenProvider_.stopListening(Rc(t),n)}))}Oc(e,c)}return u}function kc(e,t,n,r){var i=Nc(e,r);if(null!=i){var a=Pc(i),o=a.path,u=a.queryId,s=Bo(o,t);return Ac(e,o,new Zu(Yu(u),s,n))}return[]}function wc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Bo(e,i);a=a||sc(t,n),o=o||fc(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||fc(s),a=a||sc(s,Ro())):(s=new tc,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=Iu.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=sc(t,Ro());n&&(a=a.updateImmediateChild(e,n))}))}var l=lc(s,t);if(!l&&!t._queryParams.loadsAllData()){var f=Cc(t);mr(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=Lc();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=_s(e.pendingWriteTree_,i),p=ac(s,t,n,d,a,u);if(!l&&!o&&!r){var v=cc(s,t);p=p.concat(Mc(e,t,v))}return p}function bc(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=sc(n,Bo(e,t));if(r)return r}));return Cs(r,t,i,n,!0)}function _c(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Bo(e,n);r=r||sc(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||sc(i,Ro()):(i=new tc,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new ts(r,!0,!1):null;return function(e){return us(e.viewCache_)}(ic(i,t,_s(e.pendingWriteTree_,t._path),a?o.getNode():Iu.EMPTY_NODE,a))}function xc(e,t){return Ic(t,e.syncPointTree_,null,_s(e.pendingWriteTree_,Ro()))}function Ic(e,t,n,r){if(qo(e.path))return Sc(e,t,n,r);var i=t.get(Ro());null==n&&null!=i&&(n=sc(i,Ro()));var a=[],o=Oo(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=Ls(r,o);a=a.concat(Ic(u,s,c,l))}return i&&(a=a.concat(rc(i,e,r,n))),a}function Sc(e,t,n,r){var i=t.get(Ro());null==n&&null!=i&&(n=sc(i,Ro()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=Ls(r,t),s=e.operationForChild(t);s&&(a=a.concat(Sc(s,i,o,u)))})),i&&(a=a.concat(rc(i,e,r,n))),a}function Ec(e,t){var n=t.query,r=Tc(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Iu.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Nc(e,n);if(r){var i=Pc(r),a=i.path,o=i.queryId,u=Bo(a,t);return Ac(e,a,new Ju(Yu(o),u))}return[]}(e,n._path,r):function(e,t){return xc(e,new Ju({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return gc(e,n,null,i)}}}function Tc(e,t){var n=Cc(t);return e.queryToTagMap.get(n)}function Cc(e){return e._path.toString()+"$"+e._queryIdentifier}function Nc(e,t){return e.tagToQueryMap.get(t)}function Pc(e){var t=e.indexOf("$");return mr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Do(e.substr(0,t))}}function Ac(e,t,n){var r=e.syncPointTree_.get(t);return mr(r,"Missing sync point for query tag that we're tracking"),rc(r,n,_s(e.pendingWriteTree_,t),null)}function Dc(e){return e.fold((function(e,t,n){if(t&&fc(t))return[hc(t)];var r=[];return t&&(r=uc(t)),Ja(n,(function(e,t){r=r.concat(t)})),r}))}function Rc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(mr(ec,"Reference.ts has not been loaded"),ec)(e._repo,e._path):e}function Oc(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Cc(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function Lc(){return dc++}function Mc(e,t,n){var r=t._path,i=Tc(e,t),a=Ec(e,n),o=e.listenProvider_.startListening(Rc(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)mr(!fc(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!qo(e)&&t&&fc(t))return[hc(t).query];var r=[];return t&&(r=r.concat(uc(t).map((function(e){return e.query})))),Ja(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Rc(l),Tc(e,l))}return o}var Fc=function(){function e(t){O(this,e),this.node_=t}return M(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Uc=function(){function e(t,n){O(this,e),this.syncTree_=t,this.path_=n}return M(e,[{key:"getImmediateChild",value:function(t){var n=jo(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return bc(this.syncTree_,this.path_)}}]),e}(),Vc=function(e,t,n){return e&&"object"===typeof e?(mr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?jc(e[".sv"],t,n):"object"===typeof e[".sv"]?qc(e[".sv"],t):void mr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},jc=function(e,t,n){if("timestamp"===e)return n.timestamp;mr(!1,"Unexpected server value: "+e)},qc=function(e,t,n){e.hasOwnProperty("increment")||mr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&mr(!1,"Unexpected increment value: "+r);var i=t.node();if(mr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Bc=function(e,t,n,r){return Wc(t,new Uc(n,e),r)},zc=function(e,t,n){return Wc(e,new Fc(t),n)};function Wc(e,t,n){var r,i=e.getPriority().val(),a=Vc(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Vc(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new pu(u,Eu(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new pu(a))),s.forEachChild(gu,(function(e,i){var a=Wc(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Kc=M((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};O(this,e),this.name=t,this.parent=n,this.node=r}));function Hc(e,t){for(var n=t instanceof Do?t:new Do(t),r=e,i=Oo(n);null!==i;){var a=Gr(r.node.children,i)||{children:{},childCount:0};r=new Kc(i,r,a),i=Oo(n=Mo(n))}return r}function Gc(e){return e.node.value}function Qc(e,t){e.node.value=t,Zc(e)}function Yc(e){return e.node.childCount>0}function $c(e,t){Ja(e.node.children,(function(n,r){t(new Kc(n,e,r))}))}function Xc(e,t,n,r){n&&!r&&t(e),$c(e,(function(e){Xc(e,t,!0,r)})),n&&r&&t(e)}function Jc(e){return new Do(null===e.parent?e.name:Jc(e.parent)+"/"+e.name)}function Zc(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Gc(e)&&!Yc(e)}(n),i=Hr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Zc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Zc(e))}(e.parent,e.name,e)}var el=/[\[\].#$\/\u0000-\u001F\u007F]/,tl=/[\[\].#$\u0000-\u001F\u007F]/,nl=10485760,rl=function(e){return"string"===typeof e&&0!==e.length&&!el.test(e)},il=function(e){return"string"===typeof e&&0!==e.length&&!tl.test(e)},al=function(e,t,n,r){r&&void 0===t||ol(ai(e,"value"),t,n)},ol=function e(t,n,r){var i=r instanceof Do?new Ko(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Go(i));if("function"===typeof n)throw new Error(t+"contains a function "+Go(i)+" with contents = "+n.toString());if(Wa(n))throw new Error(t+"contains "+n.toString()+" "+Go(i));if("string"===typeof n&&n.length>nl/3&&oi(n)>nl)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Go(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Ja(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!rl(n)))throw new Error(t+" contains an invalid key ("+n+") "+Go(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=oi(s),Ho(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=oi(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Go(i)+" in addition to actual children.")}},ul=function(e,t,n,r){if((!r||void 0!==n)&&!il(n))throw new Error(ai(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sl=function(e,t){if(".info"===Oo(t))throw new Error(e+" failed = Can't modify data under /.info/")},cl=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!rl(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),il(e)}(n))throw new Error(ai(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ll=M((function e(){O(this,e),this.eventLists_=[],this.recursionDepth_=0}));function fl(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||zo(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function hl(e,t,n){fl(e,n),dl(e,(function(e){return Wo(e,t)||Wo(t,e)}))}function dl(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(pl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function pl(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ma&&Va("event: "+n.toString()),io(r)}}}var vl="repo_interrupt",yl=function(){function e(t,n,r,i){O(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ll,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zu(),this.transactionQueueTree_=new Kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return M(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function ml(e,t,n){if(e.stats_=ko(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qu(e.repoInfo_,(function(t,n,r,i){wl(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return bl(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new $o(e.repoInfo_,t,(function(t,n,r,i){wl(e,t,n,r,i)}),(function(t){bl(e,t)}),(function(t){!function(e,t){Ja(t,(function(t,n){_l(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return go[n]||(go[n]=t()),go[n]}(e.repoInfo_,(function(){return new Qu(e.stats_,e.server_)})),e.infoData_=new Bu,e.infoSyncTree_=new pc({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=mc(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),_l(e,"connected",!1),e.serverSyncTree_=new pc({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);hl(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function gl(e){var t=e.infoData_.getNode(new Do(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function kl(e){return(t=(t={timestamp:gl(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function wl(e,t,n,r,i){e.dataUpdateCount++;var a=new Do(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Yr(n,(function(e){return Eu(e)}));o=function(e,t,n,r){var i=Nc(e,r);if(i){var a=Pc(i),o=a.path,u=a.queryId,s=Bo(o,t),c=ls.fromObject(n);return Ac(e,o,new es(Yu(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=Eu(n);o=kc(e.serverSyncTree_,a,s,i)}else if(r){var c=Yr(n,(function(e){return Eu(e)}));o=function(e,t,n){var r=ls.fromObject(n);return xc(e,new es({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Eu(n);o=mc(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=Al(e,a)),hl(e.eventQueue_,f,o)}function bl(e,t){_l(e,"connected",t),!1===t&&function(e){El(e,"onDisconnectEvents");var t=kl(e),n=zu();Ku(e.onDisconnect_,Ro(),(function(r,i){var a=Bc(r,i,e.serverSyncTree_,t);Wu(n,r,a)}));var r=[];Ku(n,Ro(),(function(t,n){r=r.concat(mc(e.serverSyncTree_,t,n));var i=Ml(e,t);Al(e,i)})),e.onDisconnect_=zu(),hl(e.eventQueue_,Ro(),r)}(e)}function _l(e,t,n){var r=new Do("/.info/"+t),i=Eu(n);e.infoData_.updateSnapshot(r,i);var a=mc(e.infoSyncTree_,r,i);hl(e.eventQueue_,r,a)}function xl(e){return e.nextWriteId_++}function Il(e,t,n,r,i){El(e,"set",{path:t.toString(),value:n,priority:r});var a=kl(e),o=Eu(n,r),u=bc(e.serverSyncTree_,t),s=zc(o,u,a),c=xl(e),l=vc(e.serverSyncTree_,t,s,c,!0);fl(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||za("set at "+t+" failed: "+n);var o=yc(e.serverSyncTree_,c,!a);hl(e.eventQueue_,t,o),Tl(e,i,n,r)}));var f=Ml(e,t);Al(e,f),hl(e.eventQueue_,f,[])}function Sl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(vl)}function El(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Va.apply(void 0,[t].concat(r))}function Tl(e,t,n,r){t&&io((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Cl(e,t,n){return bc(e.serverSyncTree_,t,n)||Iu.EMPTY_NODE}function Nl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ll(e,t),Gc(t)){var n=Rl(e,t);mr(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Pl(e,Jc(t),n)}else Yc(t)&&$c(t,(function(t){Nl(e,t)}))}function Pl(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Cl(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];mr(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Bo(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){El(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(yc(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Ll(e,Hc(e.transactionQueueTree_,t)),Nl(e,e.transactionQueueTree_),hl(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)io(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{za("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Al(e,t)}}),o)}function Al(e,t){var n=Dl(e,t),r=Jc(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=Bo(n,s.path),l=!1,f=void 0;if(mr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(yc(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(yc(e.serverSyncTree_,s.currentWriteId,!0));else{var h=Cl(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){ol("transaction failed: Data returned ",d,s.path);var p=Eu(d);"object"===typeof d&&null!=d&&Hr(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=kl(e),m=zc(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=xl(e),o.splice(o.indexOf(v),1),i=(i=i.concat(vc(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(yc(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(yc(e.serverSyncTree_,s.currentWriteId,!0))}hl(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);Ll(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)io(r[c]);Nl(e,e.transactionQueueTree_)}(e,Rl(e,n),r),r}function Dl(e,t){var n,r=e.transactionQueueTree_;for(n=Oo(t);null!==n&&void 0===Gc(r);)r=Hc(r,n),n=Oo(t=Mo(t));return r}function Rl(e,t){var n=[];return Ol(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ol(e,t,n){var r=Gc(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);$c(t,(function(t){Ol(e,t,n)}))}function Ll(e,t){var n=Gc(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Qc(t,n.length>0?n:void 0)}$c(t,(function(t){Ll(e,t)}))}function Ml(e,t){var n=Jc(Dl(e,t)),r=Hc(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Fl(e,t)})),Fl(e,r),Xc(r,(function(t){Fl(e,t)})),n}function Fl(e,t){var n=Gc(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(mr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(mr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(yc(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Qc(t,void 0):n.length=a+1,hl(e.eventQueue_,Jc(t),i);for(var u=0;u<r.length;u++)io(r[u])}}var Ul=function(e,t){var n=Vl(e),r=n.namespace;"firebase.com"===n.domain&&Ba(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ba("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&za("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new po(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Do(n.pathString)}},Vl=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=dr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):za("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},jl=function(){function e(t,n,r,i){O(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return M(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Wr(this.snapshot.exportVal())}}]),e}(),ql=function(){function e(t,n,r){O(this,e),this.eventRegistration=t,this.error=n,this.path=r}return M(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Bl=function(){function e(t,n){O(this,e),this.snapshotCallback=t,this.cancelCallback=n}return M(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return mr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),zl=function(){function e(t,n,r,i){O(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return M(e,[{key:"key",get:function(){return qo(this._path)?null:Fo(this._path)}},{key:"ref",get:function(){return new Wl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ju(this._queryParams),t=$a(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ju(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ui(t))instanceof e))return!1;var n=this._repo===t._repo,r=zo(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Wl=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,r,new Uu,!1)}return M(n,[{key:"parent",get:function(){var e=Vo(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(zl),Kl=function(){function e(t,n,r){O(this,e),this._node=t,this.ref=n,this._index=r}return M(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Do(t),r=Gl(this.ref,t);return new e(this._node.getChild(n),r,gu)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Gl(n.ref,r),gu))}))}},{key:"hasChild",value:function(e){var t=new Do(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Hl(e,t){return(e=ui(e))._checkNotDeleted("ref"),void 0!==t?Gl(e._root,t):e._root}function Gl(e,t){var n,r,i,a;return null===Oo((e=ui(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ul(n,r,i,a)):ul("child","path",t,!1),new Wl(e._repo,jo(e._path,t))}function Ql(e,t){e=ui(e),sl("set",e._path),al("set",t,e._path,!1);var n=new Fr;return Il(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Yl(e){e=ui(e);var t=new Bl((function(){})),n=new $l(t);return function(e,t,n){var r=_c(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=Eu(r).withIndex(t._queryParams.getIndex());if(wc(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=mc(e.serverSyncTree_,t._path,a);else{var o=Tc(e.serverSyncTree_,t);i=kc(e.serverSyncTree_,t._path,a,o)}return hl(e.eventQueue_,t._path,i),gc(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return El(e,"get for query "+Wr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Kl(t,new Wl(e._repo,e._path),e._queryParams.getIndex())}))}var $l=function(){function e(t){O(this,e),this.callbackContext=t}return M(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new jl("value",this,new Kl(e.snapshotNode,new Wl(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ql(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}();!function(e){mr(!Gs,"__referenceConstructor has already been defined"),Gs=e}(Wl),function(e){mr(!ec,"__referenceConstructor has already been defined"),ec=e}(Wl);var Xl={},Jl=!1;function Zl(e,t,n,r){e.repoInfo_=new po("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function ef(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ba("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Va("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Ul(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Ul(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new so(so.OWNER):new uo(e.name,e.options,t);cl("Invalid Firebase Database URL",u),qo(u.path)||Ba("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Xl[t.name];i||(i={},Xl[t.name]=i);var a=i[e.toURLString()];a&&Ba("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new yl(e,Jl,n,r),i[e.toURLString()]=a,a}(s,e,l,new oo(e.name,n));return new tf(f,e)}var tf=function(){function e(t,n){O(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return M(e,[{key:"_repo",get:function(){return this._instanceStarted||(ml(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Wl(this._repo,Ro())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Xl[t];n&&n[e.key]===e||Ba("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Sl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ba("Cannot call "+e+" on a deleted database.")}}]),e}();function nf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra(),t=arguments.length>1?arguments[1]:void 0,n=Yi(e,"database").getImmediate({identifier:t}),r=Lr("database");return r&&rf.apply(void 0,[n].concat(R(r))),n}function rf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ui(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ba("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ba('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new so(so.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Ur(r.mockUserToken,e.app.options.projectId);a=new so(o)}Zl(i,t,n,a)}$o.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},$o.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Ea=e}(ta),Qi(new si("database",(function(e,t){var n=t.instanceIdentifier;return ef(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ua(Ia,Sa,e),ua(Ia,Sa,"esm2017")}();var af=function(e){var n=c((0,t.useState)(e),2),r=n[0],i=n[1];return{value:r,onChange:function(e,t){e.target.id===t&&i(un(un({},r),{},an({},e.target.id,e.target.value.replace(/[^0-9.]/g,""))))}}},of=n.p+"static/media/img.59a9a7bf87ed42e862aa.png",uf=function(){return(0,sr.jsx)("div",{className:"loader-wrapper",children:(0,sr.jsx)("img",{src:of,alt:"babun"})})},sf=(new Date).toISOString(),cf=function(){var e=A(),n=c((0,t.useState)(!0),2),r=n[0],i=n[1],a=af(""),o=af(""),u=b((function(e){return e.soccerScore.allMatch})),s=b((function(e){return e.soccerScore.firebasePrediction})),l=function(){var t=hr(lr().mark((function t(n,r){var i,u,s;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={_id:r._id,away_score:o.value[r._id+r.away_team_en],away_team_en:r.away_team_en,home_score:a.value[r._id+r.home_team_en],home_team_en:r.home_team_en,userID:localStorage.userID},u=nf(),s=Hl(nf()),t.next=5,Yl(Gl(s,n)).then((function(e){e.exists()?Ql(Hl(u,n),[].concat(R(e.val()),[i])):Ql(Hl(u,n),[i])}));case 5:return t.next=7,Yl(Gl(s,localStorage.userID)).then((function(t){e(Xn(t.val()))}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();(0,t.useEffect)((function(){Yl(Gl(Hl(nf()),localStorage.userID)).then((function(t){e(Xn(t.val())),i(!1)}))}),[]),(0,t.useEffect)((function(){var t=R(u).map((function(e){return sf>=new Date("".concat(e.local_date," GMT+03:00")).toISOString()?un(un({},e),{},{finished:"TRUE",time_elapsed:"finished"}):e}));e($n(t))}),[]);var f=R(u).sort((function(e,t){return new Date(e.local_date).getTime()-new Date(t.local_date).getTime()})).filter((function(e){return"TRUE"!==e.finished}));return r?(0,sr.jsx)(uf,{}):(0,sr.jsx)("div",{className:"prediction-page-wrapper",children:f.map((function(e){var t=null===s||void 0===s?void 0:s.find((function(t){return e._id===t._id}));return(0,sr.jsxs)("div",{className:"match-info-wrapper",children:[(0,sr.jsxs)("div",{className:"prediction-match-item-wrapper",children:[(0,sr.jsxs)("div",{className:"home-team-wrapper",children:[(0,sr.jsxs)("p",{children:[" ",e.home_team_en]}),(0,sr.jsx)("img",{src:e.home_flag,alt:"home flag"}),"notstarted"===e.time_elapsed?(0,sr.jsx)("input",{id:e._id+e.home_team_en,maxLength:"1",type:"text",onChange:function(t){a.onChange(t,e._id+e.home_team_en)},inputMode:"tel",value:t?t.home_score:a.value[e._id+e.home_team_en],disabled:t}):(0,sr.jsx)("h1",{children:e.home_score})]}),(0,sr.jsx)("p",{className:"colon",children:" :"}),(0,sr.jsxs)("div",{className:"away-team-wrapper",children:["notstarted"===e.time_elapsed?(0,sr.jsx)("input",{id:e._id+e.away_team_en,maxLength:"1",type:"text",onChange:function(t){o.onChange(t,e._id+e.away_team_en)},inputMode:"tel",value:t?t.away_score:o.value[e._id+e.away_team_en],disabled:t}):(0,sr.jsx)("h1",{children:e.away_score}),(0,sr.jsx)("img",{src:e.away_flag,alt:"home flag"}),(0,sr.jsxs)("p",{children:[" ",e.away_team_en]})]})]}),(0,sr.jsxs)("div",{className:"match-info-type",children:[(0,sr.jsxs)("h1",{children:[e.type," "]}),(0,sr.jsxs)("h1",{children:[" ",e.local_date]})]}),"notstarted"===e.time_elapsed?(0,sr.jsxs)("button",{className:"submit-button",onClick:function(){return l(localStorage.userID,e)},disabled:t,children:[" ",t?"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u0441\u0434\u0435\u043b\u0430\u043d":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"," "]}):(0,sr.jsx)("h2",{className:"finish-match",children:" \u041c\u0430\u0442\u0447 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0438\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d "})]},e._id+e.userID)}))})},lf=function(){var e=c((0,t.useState)(!0),2),n=e[0],r=e[1],i=A(),a=b((function(e){return e.soccerScore.allMatch})),o=b((function(e){return e.soccerScore.allPredictions})),u=a.filter((function(e){return"notstarted"!==e.time_elapsed})).sort((function(e,t){return new Date(t.local_date).getTime()-new Date(e.local_date).getTime()})),s=[],l=[];o&&(Object.keys(o).forEach((function(e){return s.push(o[e])})),s=s.flat(1/0)),(0,t.useEffect)((function(){Yl(Gl(Hl(nf()),"/")).then((function(e){i(Jn(e.val())),r(!1)}))}),[]);return function(){for(var e=R(s),t=function(t){var n=void 0,r=u[t];n="group"===r.type?100:200,e=s.filter((function(e){return e._id===r._id}));var i=e.map((function(e){return e.away_score==r.away_score&&e.home_score==r.home_score?un(un({},e),{},{score:3}):e.away_score-e.home_score==r.away_score-r.home_score?un(un({},e),{},{score:2}):e.away_score-e.home_score>0&&r.away_score-r.home_score>0||e.away_score-e.home_score<0&&r.away_score-r.home_score<0||e.away_score-e.home_score==0&&r.away_score-r.home_score==0?un(un({},e),{},{score:1}):un(un({},e),{},{score:0})})),a=i.reduce((function(e,t){return e+t.score}),0),o=i.map((function(e){return un(un({},e),{},{totalScore:isNaN(n/a*e.score)?0:n/a*e.score})})),c={scoringPointData:o,match:r};l.push(c)},n=0;n<u.length;n++)t(n)}(),n?(0,sr.jsx)(uf,{}):(0,sr.jsx)("div",{className:"result-page-wrapper",children:l.map((function(e){return(0,sr.jsxs)("div",{className:"result-page-match",children:[(0,sr.jsxs)("div",{className:"result-page-match-info",children:[(0,sr.jsxs)("div",{className:"result-page-match-finished-info",children:[(0,sr.jsx)("img",{src:e.match.home_flag,alt:"home flag"}),(0,sr.jsxs)("h1",{children:[" ",e.match.home_score]}),(0,sr.jsx)("h1",{children:" : "}),(0,sr.jsxs)("h1",{children:[" ",e.match.away_score]}),(0,sr.jsx)("img",{src:e.match.away_flag,alt:"away flag"})]}),(0,sr.jsxs)("h1",{className:"result-page-match-type",children:[" ",e.match.type]})]}),(0,sr.jsx)("div",{className:"result-page-match-pred-wrapper",children:e.scoringPointData.map((function(e){return(0,sr.jsxs)("div",{className:"result-page-match-pred",children:[(0,sr.jsxs)("div",{className:"player",children:[(0,sr.jsx)("h6",{children:" \u0418\u0433\u0440\u043e\u043a"}),(0,sr.jsxs)("h3",{children:[" ",e.userID]})]}),(0,sr.jsxs)("div",{className:"match",children:[(0,sr.jsx)("div",{className:"match-label",children:(0,sr.jsx)("h6",{children:" \u041f\u0440\u043e\u0433\u043d\u043e\u0437 "})}),(0,sr.jsxs)("div",{className:"match-info",children:[(0,sr.jsxs)("h2",{children:[" ",e.home_score]}),(0,sr.jsx)("h2",{children:" :"}),(0,sr.jsxs)("h2",{children:[" ",e.away_score]})]})]}),(0,sr.jsxs)("div",{className:"score",children:[(0,sr.jsx)("h6",{children:" \u041e\u0447\u043a\u0438"}),(0,sr.jsxs)("h2",{children:[" ",e.score]})]}),(0,sr.jsxs)("div",{className:"totalScore",children:[(0,sr.jsx)("h6",{children:" \u041d\u0430\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0431\u0430\u043b\u043b\u044b"}),(0,sr.jsxs)("h2",{children:["  ",Math.round(e.totalScore)]})]})]},e._id+e.userID)}))})]},e._id)}))})},ff=function(){var e=A(),n=b((function(e){return e.soccerScore.allMatch})),r=b((function(e){return e.soccerScore.allPredictions})),i=n.filter((function(e){return"TRUE"===e.finished})),a=[],o=[];r&&(Object.keys(r).forEach((function(e){return a.push(r[e])})),a=a.flat(1/0)),(0,t.useEffect)((function(){Yl(Gl(Hl(nf()),"/")).then((function(t){e(Jn(t.val()))}))}),[]);return function(){for(var e=R(a),t=function(t){var n=i[t],r=void 0;r="group"===n.type?100:200,e=a.filter((function(e){return e._id===n._id}));var u=e.map((function(e){return e.away_score==n.away_score&&e.home_score==n.home_score?un(un({},e),{},{score:3}):e.away_score-e.home_score==n.away_score-n.home_score?un(un({},e),{},{score:2}):e.away_score-e.home_score>0&&n.away_score-n.home_score>0||e.away_score-e.home_score<0&&n.away_score-n.home_score<0||e.away_score-e.home_score==0&&n.away_score-n.home_score==0?un(un({},e),{},{score:1}):un(un({},e),{},{score:0})})),s=u.reduce((function(e,t){return e+t.score}),0);u.map((function(e){return o.push({userID:e.userID,totalScore:isNaN(r/s*e.score)?0:r/s*e.score})}))},n=0;n<i.length;n++)t(n)}(),(0,sr.jsx)("div",{className:"standing-page-wrapper",children:Array.from(o.reduce((function(e,t){var n=t.userID,r=t.totalScore;return e.set(n,(e.get(n)||0)+r)}),new Map),(function(e){var t=c(e,2);return{userID:t[0],totalScore:t[1]}})).sort((function(e,t){return t.totalScore-e.totalScore})).map((function(e){return(0,sr.jsxs)("div",{className:"standing-page-info",children:["\u0410\u043d\u0434\u0440\u0435\u0439"===e.userID?(0,sr.jsxs)("div",{className:"standing-page-info-item",children:[(0,sr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Flag_of_Uruguay.svg/125px-Flag_of_Uruguay.svg.png",alt:"flag"}),(0,sr.jsxs)("h1",{children:[" ",e.userID,"    "]})]}):null,"\u0426\u044b\u0433\u0430\u043d\u0441\u043a\u0438\u0439 \u0431\u0430\u0440\u043e\u043d"===e.userID?(0,sr.jsxs)("div",{className:"standing-page-info-item",children:[(0,sr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/125px-Flag_of_Portugal.svg.png",alt:"flag"}),(0,sr.jsxs)("h1",{children:[" ",e.userID,"    "]})]}):null,"\u0410\u043d\u0434\u0436\u0435\u0439 \u0414\u0443\u0434\u0430"===e.userID?(0,sr.jsxs)("div",{className:"standing-page-info-item",children:[(0,sr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/125px-Flag_of_Brazil.svg.png",alt:"flag"}),(0,sr.jsxs)("h1",{children:[" ",e.userID,"    "]})]}):null,"\u041c\u043e\u043b\u043e\u0434\u043e\u0439 \u0427\u0438\u043d\u0433\u0438\u0437"===e.userID?(0,sr.jsxs)("div",{className:"standing-page-info-item",children:[(0,sr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/125px-Flag_of_Brazil.svg.png",alt:"flag"}),(0,sr.jsxs)("h1",{children:[" ",e.userID,"    "]})]}):null,"\u041f\u0430\u0432\u043b\u0438\u043a"===e.userID?(0,sr.jsxs)("div",{className:"standing-page-info-item",children:[(0,sr.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/b/be/Flag_of_England.svg/125px-Flag_of_England.svg.png",alt:"flag"}),(0,sr.jsxs)("h1",{children:[" ",e.userID,"    "]})]}):null,(0,sr.jsxs)("h1",{children:[Math.round(e.totalScore)," points "]})]},e.userID+e.totalScore)}))})};var hf,df=function(){var e=A(),n=c((0,t.useState)(localStorage.userID),2),r=n[0],i=n[1],a=c((0,t.useState)(!1),2),o=a[0],u=a[1],s=c((0,t.useState)(!0),2),l=s[0],f=s[1];return b((function(e){return e.soccerScore.allMatchErrorStatus})),b((function(e){return e.soccerScore.allMatch})),(0,t.useEffect)((function(){var t=fetch("/login").then((function(e){return e.json()})).then((function(e){return e})),n=fetch("/match").then((function(e){return e.json()})).then((function(e){return e}));t.then((function(t){e(Zn(t.data.token))})),n.then((function(t){e($n(t.data))})),f(!1)}),[]),l?(0,sr.jsx)(uf,{}):o||localStorage.userID?(0,sr.jsxs)("div",{className:"App",children:[(0,sr.jsx)(cr,{}),(0,sr.jsxs)(et,{children:[(0,sr.jsx)(Je,{path:"/",element:(0,sr.jsx)(cf,{})}),(0,sr.jsx)(Je,{path:"/Result",element:(0,sr.jsx)(lf,{})}),(0,sr.jsx)(Je,{path:"/Standing",element:(0,sr.jsx)(ff,{})})]})]}):(0,sr.jsxs)("div",{className:"App",children:[(0,sr.jsx)("h1",{className:"app-h1",children:"\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043e\u0439 ID"}),(0,sr.jsx)("input",{className:"app-input",onChange:function(e){i(e.target.value)},value:r,type:"text"}),(0,sr.jsx)("button",{onClick:function(){localStorage.setItem("userID",r),u(!0)},className:"app-button",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})},pf=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},vf=function(e){var t,n=Fn(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!On(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=pn(a)}var p=u;"function"===typeof p&&(p=p(n));var v=yn.apply(void 0,p),y=vn;c&&(y=Rn(Pn({trace:!1},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=_n([v],d):"function"===typeof d&&(m=d(m)),dn(t,f,y.apply(void 0,m))}({reducer:{soccerScore:er}}),yf=function(){function e(t,n){var r=this;O(this,e),this._delegate=t,this.firebase=n,Hi(t,new si("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return M(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),aa(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Hi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Gi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),mf=(an(hf={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),an(hf,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),hf),gf=new jr("app-compat","Firebase",mf);var kf=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=na(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Hr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ua,setLogLevel:ca,onLog:sa,apps:null,SDK_VERSION:ta,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Qi(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw gf.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ir(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Hr(n,e=e||Bi))throw gf.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(yf);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ir(n,e)},createSubscribe:ni,ErrorFactory:jr,deepExtend:Ir}),n}(),wf=new ki("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){wf.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var bf=self.firebase.SDK_VERSION;bf&&bf.indexOf("LITE")>=0&&wf.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _f=kf;!function(e){ua("@firebase/app-compat","0.1.38",e)}();function xf(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function If(){return If="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=xf(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},If.apply(this,arguments)}_f.registerVersion("firebase","9.13.0","app-compat");function Sf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ef;Object.create;var Tf="facebook.com",Cf="github.com",Nf="google.com",Pf="password",Af="twitter.com",Df="EMAIL_SIGNIN",Rf="PASSWORD_RESET",Of="RECOVER_EMAIL",Lf="REVERT_SECOND_FACTOR_ADDITION",Mf="VERIFY_AND_CHANGE_EMAIL",Ff="VERIFY_EMAIL";function Uf(){return an({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Vf=function(){var e;return an(e={},"admin-restricted-operation","This operation is restricted to administrators only."),an(e,"argument-error",""),an(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),an(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),an(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),an(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),an(e,"cordova-not-ready","Cordova framework is not ready."),an(e,"cors-unsupported","This browser is not supported."),an(e,"credential-already-in-use","This credential is already associated with a different user account."),an(e,"custom-token-mismatch","The custom token corresponds to a different audience."),an(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),an(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),an(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),an(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),an(e,"email-already-in-use","The email address is already in use by another account."),an(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),an(e,"expired-action-code","The action code has expired."),an(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),an(e,"internal-error","An internal AuthError has occurred."),an(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),an(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),an(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),an(e,"invalid-auth-event","An internal AuthError has occurred."),an(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),an(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),an(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),an(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),an(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),an(e,"invalid-email","The email address is badly formatted."),an(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),an(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),an(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),an(e,"invalid-credential","The supplied auth credential is malformed or has expired."),an(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),an(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),an(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),an(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),an(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),an(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),an(e,"wrong-password","The password is invalid or the user does not have a password."),an(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),an(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),an(e,"invalid-provider-id","The specified provider ID is invalid."),an(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),an(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),an(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),an(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),an(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),an(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),an(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),an(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),an(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),an(e,"missing-continue-uri","A continue URL must be provided in the request."),an(e,"missing-iframe-start","An internal AuthError has occurred."),an(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),an(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),an(e,"missing-multi-factor-info","No second factor identifier is provided."),an(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),an(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),an(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),an(e,"app-deleted","This instance of FirebaseApp has been deleted."),an(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),an(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),an(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),an(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),an(e,"no-auth-event","An internal AuthError has occurred."),an(e,"no-such-provider","User was not linked to an account with the given provider."),an(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),an(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),an(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),an(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),an(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),an(e,"provider-already-linked","User can only be linked to one identity for the given provider."),an(e,"quota-exceeded","The project's quota for this operation has been exceeded."),an(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),an(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),an(e,"rejected-credential","The request contains malformed or mismatching credentials."),an(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),an(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),an(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),an(e,"timeout","The operation has timed out."),an(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),an(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),an(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),an(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),an(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),an(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),an(e,"unverified-email","The operation requires a verified email."),an(e,"user-cancelled","The user did not grant your application the permissions it requested."),an(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),an(e,"user-disabled","The user account has been disabled by an administrator."),an(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),an(e,"user-signed-out",""),an(e,"weak-password","The password must be 6 characters long or more."),an(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),an(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},jf=Uf,qf=new jr("auth","Firebase",Uf()),Bf=new ki("@firebase/auth");function zf(e){if(Bf.logLevel<=hi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bf.error.apply(Bf,["Auth (".concat(ta,"): ").concat(e)].concat(n))}}function Wf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qf.apply(void 0,[e].concat(n))}function Kf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qf.apply(void 0,[e].concat(n))}function Hf(e,t,n){var r=Object.assign(Object.assign({},jf()),an({},t,n));return new jr("auth","Firebase",r).create(t,{appName:e.name})}function Gf(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Wf(e,"argument-error"),Hf(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=R(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(R(o)))}return qf.create.apply(qf,[e].concat(n))}function Yf(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qf.apply(void 0,[t].concat(r))}}function $f(e){var t="INTERNAL ASSERTION FAILED: "+e;throw zf(t),new Error(t)}function Xf(e,t){e||$f(t)}var Jf=new Map;function Zf(e){Xf(e instanceof Function,"Expected a class definition");var t=Jf.get(e);return t?(Xf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jf.set(e,t),t)}function eh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function th(){return"http:"===nh()||"https:"===nh()}function nh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rh=function(){function e(t,n){O(this,e),this.shortDelay=t,this.longDelay=n,Xf(n>t,"Short delay should be less than long delay!"),this.isMobile=Er()||Nr()}return M(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(th()||Cr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ih(e,t){Xf(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ah=function(){function e(){O(this,e)}return M(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $f("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $f("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $f("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),oh=(an(Ef={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),an(Ef,"MISSING_CUSTOM_TOKEN","internal-error"),an(Ef,"INVALID_IDENTIFIER","invalid-email"),an(Ef,"MISSING_CONTINUE_URI","internal-error"),an(Ef,"INVALID_PASSWORD","wrong-password"),an(Ef,"MISSING_PASSWORD","internal-error"),an(Ef,"EMAIL_EXISTS","email-already-in-use"),an(Ef,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),an(Ef,"INVALID_IDP_RESPONSE","invalid-credential"),an(Ef,"INVALID_PENDING_TOKEN","invalid-credential"),an(Ef,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),an(Ef,"MISSING_REQ_TYPE","internal-error"),an(Ef,"EMAIL_NOT_FOUND","user-not-found"),an(Ef,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),an(Ef,"EXPIRED_OOB_CODE","expired-action-code"),an(Ef,"INVALID_OOB_CODE","invalid-action-code"),an(Ef,"MISSING_OOB_CODE","internal-error"),an(Ef,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),an(Ef,"INVALID_ID_TOKEN","invalid-user-token"),an(Ef,"TOKEN_EXPIRED","user-token-expired"),an(Ef,"USER_NOT_FOUND","user-token-expired"),an(Ef,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),an(Ef,"INVALID_CODE","invalid-verification-code"),an(Ef,"INVALID_SESSION_INFO","invalid-verification-id"),an(Ef,"INVALID_TEMPORARY_PROOF","invalid-credential"),an(Ef,"MISSING_SESSION_INFO","missing-verification-id"),an(Ef,"SESSION_EXPIRED","code-expired"),an(Ef,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),an(Ef,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),an(Ef,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),an(Ef,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),an(Ef,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),an(Ef,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),an(Ef,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),an(Ef,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),an(Ef,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),an(Ef,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),an(Ef,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ef),uh=new rh(3e4,6e4);function sh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ch(e,t,n,r){return lh.apply(this,arguments)}function lh(){return lh=hr(lr().mark((function e(t,n,r,i){var a,o=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",fh(t,a,hr(lr().mark((function e(){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Jr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ah.fetch()(vh(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),lh.apply(this,arguments)}function fh(e,t,n){return hh.apply(this,arguments)}function hh(){return hh=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},oh),n),e.prev=2,a=new yh(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw mh(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw mh(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw mh(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw mh(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Hf(t,p,d);case 34:Wf(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Vr)){e.next=41;break}throw e.t0;case 41:Wf(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),hh.apply(this,arguments)}function dh(e,t,n,r){return ph.apply(this,arguments)}function ph(){return ph=hr(lr().mark((function e(t,n,r,i){var a,o,u=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,ch(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Wf(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ph.apply(this,arguments)}function vh(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ih(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var yh=function(){function e(t){var n=this;O(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Kf(n.auth,"network-request-failed"))}),uh.get())}))}return M(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function mh(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Kf(e,t,r);return i.customData._tokenResponse=n,i}function gh(e,t){return kh.apply(this,arguments)}function kh(){return(kh=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wh(e,t){return bh.apply(this,arguments)}function bh(){return(bh=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _h(e,t){return xh.apply(this,arguments)}function xh(){return(xh=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ih(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Sh(){return Sh=hr(lr().mark((function e(t){var n,r,i,a,o,u,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ui(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Yf((a=Th(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ih(Eh(a.auth_time)),issuedAtTime:Ih(Eh(a.iat)),expirationTime:Ih(Eh(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Eh(e){return 1e3*Number(e)}function Th(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return zf("JWT malformed, contained fewer than 3 sections"),null;try{var o=xr(i);return o?JSON.parse(o):(zf("Failed to decode base64 JWT payload"),null)}catch(u){return zf("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Ch(e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=hr(lr().mark((function e(t,n){var r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Vr&&Ph(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nh.apply(this,arguments)}function Ph(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ah=function(){function e(t){O(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return M(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Dh=function(){function e(t,n){O(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return M(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ih(this.lastLoginAt),this.creationTime=Ih(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Rh(e){return Oh.apply(this,arguments)}function Oh(){return Oh=hr(lr().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ch(t,_h(r,{idToken:i}));case 6:Yf(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Fh(o.providerUserInfo):[],s=Mh(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Dh(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Oh.apply(this,arguments)}function Lh(){return(Lh=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ui(t),e.next=3,Rh(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mh(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(R(n),R(t))}function Fh(e){return e.map((function(e){var t=e.providerId,n=Sf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Uh(e,t){return Vh.apply(this,arguments)}function Vh(){return(Vh=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fh(t,{},hr(lr().mark((function e(){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=vh(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ah.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jh=function(){function e(){O(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return M(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Yf(e.idToken,"internal-error"),Yf("undefined"!==typeof e.idToken,"internal-error"),Yf("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Th(e);return Yf(t,"internal-error"),Yf("undefined"!==typeof t.exp,"internal-error"),Yf("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=hr(lr().mark((function e(t){var n,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Yf(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uh(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $f("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Yf("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Yf("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Yf("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function qh(e,t){Yf("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Bh=function(){function e(t){O(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Sf(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ah(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?R(a.providerData):[],this.metadata=new Dh(a.createdAt||void 0,a.lastLoginAt||void 0)}return M(e,[{key:"getIdToken",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Yf(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Sh.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Lh.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Yf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Yf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=hr(lr().mark((function e(t){var n,r,i=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Rh(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ch(this,gh(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Yf(k&&x,t,"internal-error");var I=jh.fromJSON(this.name,x);Yf("string"===typeof k,t,"internal-error"),qh(f,t.name),qh(h,t.name),Yf("boolean"===typeof w,t,"internal-error"),Yf("boolean"===typeof b,t,"internal-error"),qh(d,t.name),qh(p,t.name),qh(v,t.name),qh(y,t.name),qh(m,t.name),qh(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=hr(lr().mark((function t(n,r){var i,a,o,u=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new jh).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Rh(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),zh=function(){function e(){O(this,e),this.type="NONE",this.storage={}}return M(e,[{key:"_isAvailable",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();zh.type="NONE";var Wh=zh;function Kh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Hh=function(){function e(t,n,r){O(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Kh(this.userKey,a.apiKey,o),this.fullPersistenceKey=Kh("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return M(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Bh._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=hr(lr().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Zf(Wh),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Zf(Wh),u=Kh(i,n.config.apiKey,n.name),s=null,c=dr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Bh._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Gh(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zh(t))return"Blackberry";if(ed(t))return"Webos";if(Yh(t))return"Safari";if((t.includes("chrome/")||$h(t))&&!t.includes("edge/"))return"Chrome";if(Jh(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Qh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/firefox\//i.test(e)}function Yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/crios\//i.test(e)}function Xh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/iemobile/i.test(e)}function Jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/android/i.test(e)}function Zh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/blackberry/i.test(e)}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/webos/i.test(e)}function td(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nd(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return td(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function rd(){return Pr()&&10===document.documentMode}function id(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return td(e)||Jh(e)||ed(e)||Zh(e)||/windows phone/i.test(e)||Xh(e)}function ad(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gh(Sr());break;case"Worker":t="".concat(Gh(Sr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ta,"/").concat(r)}var od=function(){function e(t){O(this,e),this.auth=t,this.queue=[]}return M(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=dr(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=dr(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(bt){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ud=function(){function e(t,n,r){O(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cd(this),this.idTokenSubscription=new cd(this),this.beforeStateQueue=new od(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qf,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return M(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Zf(t)),this._initializationPromise=this.queue(hr(lr().mark((function r(){var i,a;return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Hh.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Yf(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rh(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ui(t):null)&&Yf(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n,r=this,i=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Yf(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Zf(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new jr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Yf(n=t&&Zf(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Hh.create(this,[Zf(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Yf(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Yf(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ad(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=hr(lr().mark((function e(){var t,n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=an({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function sd(e){return ui(e)}var cd=function(){function e(t){var n=this;O(this,e),this.auth=t,this.observer=null,this.addObserver=ni((function(e){return n.observer=e}))}return M(e,[{key:"next",get:function(){return Yf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ld(e,t,n){var r=sd(e);Yf(r._canInitEmulator,r,"emulator-config-failed"),Yf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=fd(t),o=function(e){var t=fd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:hd(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:hd(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fd(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hd(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var dd=function(){function e(t,n){O(this,e),this.providerId=t,this.signInMethod=n}return M(e,[{key:"toJSON",value:function(){return $f("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $f("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $f("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $f("not implemented")}}]),e}();function pd(e,t){return vd.apply(this,arguments)}function vd(){return(vd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:resetPassword",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yd(e,t){return md.apply(this,arguments)}function md(){return(md=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return(kd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:update",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wd(e,t){return bd.apply(this,arguments)}function bd(){return(bd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithPassword",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _d(e,t){return xd.apply(this,arguments)}function xd(){return(xd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:sendOobCode",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Id(e,t){return Sd.apply(this,arguments)}function Sd(){return(Sd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_d(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ed(e,t){return Td.apply(this,arguments)}function Td(){return(Td=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_d(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cd(e,t){return Nd.apply(this,arguments)}function Nd(){return(Nd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_d(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pd(e,t){return Ad.apply(this,arguments)}function Ad(){return(Ad=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_d(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dd(e,t){return Rd.apply(this,arguments)}function Rd(){return(Rd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithEmailLink",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Od(e,t){return Ld.apply(this,arguments)}function Ld(){return(Ld=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithEmailLink",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Md=function(e){U(n,e);var t=W(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return M(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wd(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Dd(t,{email:this._email,oobCode:this._password}));case 5:Wf(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",yd(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Od(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Wf(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(dd);function Fd(e,t){return Ud.apply(this,arguments)}function Ud(){return(Ud=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithIdp",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vd=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return M(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fd(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wf("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Sf(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(dd);function jd(e,t){return qd.apply(this,arguments)}function qd(){return(qd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:sendVerificationCode",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bd(){return(Bd=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithPhoneNumber",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zd(){return(zd=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dh(t,"POST","/v1/accounts:signInWithPhoneNumber",sh(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw mh(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wd=an({},"USER_NOT_FOUND","user-not-found");function Kd(){return(Kd=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithPhoneNumber",sh(t,r),Wd));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hd=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone","phone")).params=e,r}return M(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Bd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return zd.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Kd.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(dd);var Gd=function(){function e(t){var n,r,i,a,o,u;O(this,e);var s=Zr(ei(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Yf(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return M(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Zr(ei(e)).link,n=t?Zr(ei(t)).deep_link_id:null,r=Zr(ei(e)).deep_link_id;return(r?Zr(ei(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(QD){return null}}}]),e}();var Qd=function(){function e(){O(this,e),this.providerId=e.PROVIDER_ID}return M(e,null,[{key:"credential",value:function(e,t){return Md._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Gd.parseLink(t);return Yf(n,"argument-error"),Md._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Qd.PROVIDER_ID="password",Qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Yd=function(){function e(t){O(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return M(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),$d=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).scopes=[],e}return M(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return R(this.scopes)}}]),n}(Yd),Xd=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Yf(e.idToken||e.accessToken,"argument-error"),Vd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Yf("providerId"in t&&"signInMethod"in t,"argument-error"),Vd._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}($d),Jd=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"facebook.com")}return M(n,null,[{key:"credential",value:function(e){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QD){return null}}}]),n}($d);Jd.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jd.PROVIDER_ID="facebook.com";var Zd=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return M(n,null,[{key:"credential",value:function(e,t){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(QD){return null}}}]),n}($d);Zd.GOOGLE_SIGN_IN_METHOD="google.com",Zd.PROVIDER_ID="google.com";var ep=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"github.com")}return M(n,null,[{key:"credential",value:function(e){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QD){return null}}}]),n}($d);ep.GITHUB_SIGN_IN_METHOD="github.com",ep.PROVIDER_ID="github.com";var tp=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return M(n,[{key:"_getIdTokenResponse",value:function(e){return Fd(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fd(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fd(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dd),np=function(e){U(n,e);var t=W(n);function n(e){return O(this,n),Yf(e.startsWith("saml."),"argument-error"),t.call(this,e)}return M(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=tp.fromJSON(e);return Yf(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return tp._create(r,n)}catch(i){return null}}}]),n}(Yd),rp=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"twitter.com")}return M(n,null,[{key:"credential",value:function(e,t){return Vd._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(QD){return null}}}]),n}($d);function ip(e,t){return ap.apply(this,arguments)}function ap(){return(ap=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signUp",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}rp.TWITTER_SIGN_IN_METHOD="twitter.com",rp.PROVIDER_ID="twitter.com";var op=function(){function e(t){O(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return M(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=hr(lr().mark((function t(n,r,i){var a,o,u,s,c=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Bh._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=up(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=hr(lr().mark((function t(n,r,i){var a;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=up(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function up(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function sp(){return sp=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sd(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new op({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ip(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,op._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}var cp=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o,u;return O(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(B(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return M(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Vr);function lp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw cp._fromErrorAndOperation(e,n,t,r);throw n}))}function fp(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function hp(e,t){return dp.apply(this,arguments)}function dp(){return dp=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,yp(!0,r,n);case 3:return e.t0=wh,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=fp(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t){return vp.apply(this,arguments)}function vp(){return vp=hr(lr().mark((function e(t,n){var r,i,a=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ch,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",op._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function yp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rh(n);case 2:i=fp(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Yf(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(e,t){return kp.apply(this,arguments)}function kp(){return kp=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Ch(t,lp(a,o,n,t),r);case 6:return Yf((u=e.sent).idToken,a,"internal-error"),Yf(s=Th(u.idToken),a,"internal-error"),c=s.sub,Yf(t.uid===c,a,"user-mismatch"),e.abrupt("return",op._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Wf(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),kp.apply(this,arguments)}function wp(e,t){return bp.apply(this,arguments)}function bp(){return bp=hr(lr().mark((function e(t,n){var r,i,a,o,u=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,lp(t,i,n);case 4:return a=e.sent,e.next=7,op._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function _p(e,t){return xp.apply(this,arguments)}function xp(){return(xp=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wp(sd(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ip(e,t){return Sp.apply(this,arguments)}function Sp(){return(Sp=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,yp(!1,r,n.providerId);case 3:return e.abrupt("return",pp(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ep(e,t){return Tp.apply(this,arguments)}function Tp(){return(Tp=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gp(ui(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cp(e,t){return Np.apply(this,arguments)}function Np(){return(Np=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dh(t,"POST","/v1/accounts:signInWithCustomToken",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(){return(Pp=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sd(t),e.next=3,Cp(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,op._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ap=function(){function e(t,n){O(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return M(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Dp._fromServerResponse(e,t):Wf(e,"internal-error")}}]),e}(),Dp=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return M(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ap);function Rp(e,t,n){var r;Yf((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yf("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yf(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yf(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Op(){return(Op=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),a={requestType:"PASSWORD_RESET",email:n},r&&Rp(i,a,r),e.next=5,Ed(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(){return(Lp=hr(lr().mark((function e(t,n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pd(ui(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(){return(Mp=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gd(ui(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,pd(r,{oobCode:n});case 3:i=e.sent,Yf(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Yf(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Yf(i.mfaInfo,r,"internal-error");case 13:Yf(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ap._fromServerResponse(sd(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(){return(Vp=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp(ui(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e,t,n){return qp.apply(this,arguments)}function qp(){return(qp=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sd(t),e.next=3,ip(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,op._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(){return(Bp=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),a={requestType:"EMAIL_SIGNIN",email:n},Yf(r.handleCodeInApp,i,"argument-error"),r&&Rp(i,a,r),e.next=6,Cd(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zp(){return(zp=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),Yf((a=Qd.credentialWithLink(n,r||eh()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",_p(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:createAuthUri",sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(){return(Hp=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=th()?eh():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Wp(ui(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gp(){return(Gp=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ui(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Rp(r.auth,a,n),e.next=8,Id(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(){return(Qp=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Rp(i.auth,o,r),e.next=8,Pd(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e,t){return $p.apply(this,arguments)}function $p(){return($p=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ch(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xp(){return(Xp=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ui(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ch(a,Yp(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jp(e,t,n){return Zp.apply(this,arguments)}function Zp(){return(Zp=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ch(t,yd(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ev=M((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),tv=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this,e,r,i)).username=a,o}return M(n)}(ev),nv=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"facebook.com",r)}return M(n)}(ev),rv=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return M(n)}(tv),iv=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"google.com",r)}return M(n)}(ev),av=function(e){U(n,e);var t=W(n);function n(e,r,i){return O(this,n),t.call(this,e,"twitter.com",r,i)}return M(n)}(tv);function ov(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Th(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ev(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new nv(a,i);case"github.com":return new rv(a,i);case"google.com":return new iv(a,i);case"twitter.com":return new av(a,i,e.screenName||null);case"custom":case"anonymous":return new ev(a,null);default:return new ev(a,r,i)}}(n)}var uv=function(){function e(t,n,r){O(this,e),this.type=t,this.credential=n,this.auth=r}return M(e,[{key:"toJSON",value:function(){return{multiFactorSession:an({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),sv=function(){function e(t,n,r){O(this,e),this.session=t,this.hints=n,this.signInResolver=r}return M(e,[{key:"resolveSignIn",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=sd(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ap._fromServerResponse(r,e)}));Yf(i.mfaPendingCredential,r,"internal-error");var o=uv._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=hr(lr().mark((function e(t){var a,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,op._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Yf(n.user,r,"internal-error"),e.abrupt("return",op._forOperation(n.user,n.operationType,u));case 17:Wf(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function cv(e,t){return ch(e,"POST","/v2/accounts/mfaEnrollment:start",sh(e,t))}var lv=function(){function e(t){var n=this;O(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ap._fromServerResponse(t.auth,e)})))}))}return M(e,[{key:"getSession",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=uv,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ch(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Ch(this.user,ch(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",sh(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),fv=new WeakMap;var hv="__sak",dv=function(){function e(t,n){O(this,e),this.storageRetriever=t,this.type=n}return M(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(hv,"1"),this.storage.removeItem(hv),Promise.resolve(!0)):Promise.resolve(!1)}catch(QD){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var pv=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Sr();return Yh(e)||td(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=id(),e._shouldAllowMigration=!0,e}return M(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);rd()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(V(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(V(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(V(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(dv);pv.type="LOCAL";var vv=pv,yv=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return M(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(dv);yv.type="SESSION";var mv=yv;function gv(e){return Promise.all(e.map(function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var kv=function(){function e(t){O(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return M(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,gv(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function wv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}kv.receivers=[];var bv=function(){function e(t){O(this,e),this.target=t,this.handlers=new Set}return M(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=wv("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function _v(){return window}function xv(){return"undefined"!==typeof _v().WorkerGlobalScope&&"function"===typeof _v().importScripts}function Iv(){return Sv.apply(this,arguments)}function Sv(){return(Sv=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ev(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Tv="firebaseLocalStorageDb",Cv="firebaseLocalStorage",Nv="fbase_key",Pv=function(){function e(t){O(this,e),this.request=t}return M(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Av(e,t){return e.transaction([Cv],t?"readwrite":"readonly").objectStore(Cv)}function Dv(){var e=indexedDB.deleteDatabase(Tv);return new Pv(e).toPromise()}function Rv(){var e=indexedDB.open(Tv,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Cv,{keyPath:Nv})}catch(r){n(r)}})),e.addEventListener("success",hr(lr().mark((function n(){var r;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Cv)){n.next=12;break}return r.close(),n.next=5,Dv();case 5:return n.t0=t,n.next=8,Rv();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ov(e,t,n){return Lv.apply(this,arguments)}function Lv(){return Lv=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Av(t,!0).put((an(i={},Nv,n),an(i,"value",r),i)),e.abrupt("return",new Pv(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Av(t,!1).get(n),e.next=3,new Pv(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Uv(e,t){var n=Av(e,!0).delete(t);return new Pv(n).toPromise()}var Vv=function(){function e(){O(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return M(e,[{key:"_openDb",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Rv();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xv()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=kv._getInstance(xv()?self:null),this.receiver._subscribe("keyChanged",function(){var e=hr(lr().mark((function e(n,r){var i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=hr(lr().mark((function e(){var t,n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iv();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new bv(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ev()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Rv();case 5:return t=e.sent,e.next=8,Ov(t,hv,"1");case 8:return e.next=10,Uv(t,hv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,n){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ov(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Mv(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Uv(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Av(e,!1).getAll();return new Pv(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=dr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Vv.type="LOCAL";var jv=Vv;function qv(e,t){return ch(e,"POST","/v2/accounts/mfaSignIn:start",sh(e,t))}function Bv(e){return zv.apply(this,arguments)}function zv(){return(zv=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ch(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wv(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Kf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Kv(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Hv=1e12,Gv=function(){function e(t){O(this,e),this.auth=t,this.counter=Hv,this._widgets=new Map}return M(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Qv(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Hv;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Hv;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Hv,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qv=function(){function e(t,n,r){var i=this;O(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Yf(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return M(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Yv=Kv("rcb"),$v=new rh(3e4,6e4),Xv="https://www.google.com/recaptcha/api.js?",Jv=function(){function e(){var t;O(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=_v().grecaptcha)||void 0===t?void 0:t.render)}return M(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Yf(Zv(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(_v().grecaptcha):new Promise((function(r,i){var a=_v().setTimeout((function(){i(Kf(e,"network-request-failed"))}),$v.get());_v()[Yv]=function(){_v().clearTimeout(a),delete _v()[Yv];var o=_v().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Kf(e,"internal-error"))},Wv("".concat(Xv,"?").concat(Jr({onload:Yv,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Kf(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=_v().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Zv(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var ey=function(){function e(){O(this,e)}return M(e,[{key:"load",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Gv(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ty="recaptcha",ny={theme:"light",type:"image"},ry=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ny),r=arguments.length>2?arguments[2]:void 0;O(this,e),this.parameters=n,this.type=ty,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sd(r),this.isInvisible="invisible"===this.parameters.size,Yf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Yf(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ey:new Jv,this.validateStartingState()}return M(e,[{key:"verify",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Yf(!this.parameters.sitekey,this.auth,"argument-error"),Yf(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Yf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=_v()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Yf(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yf(th()&&!xv(),this.auth,"internal-error"),e.next=3,iy();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Bv(this.auth);case 8:Yf(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Yf(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function iy(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ay=function(){function e(t,n){O(this,e),this.verificationId=t,this.onConfirmation=n}return M(e,[{key:"confirm",value:function(e){var t=Hd._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function oy(){return(oy=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sd(t),e.next=3,ly(i,n,ui(r));case 3:return a=e.sent,e.abrupt("return",new ay(a,(function(e){return _p(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uy(e,t,n){return sy.apply(this,arguments)}function sy(){return(sy=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,yp(!1,i,"phone");case 3:return e.next=5,ly(i.auth,n,ui(r));case 5:return a=e.sent,e.abrupt("return",new ay(a,(function(e){return Ip(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cy(){return(cy=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ui(t),e.next=3,ly(i.auth,n,ui(r));case 3:return a=e.sent,e.abrupt("return",new ay(a,(function(e){return Ep(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ly(e,t,n){return fy.apply(this,arguments)}function fy(){return fy=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Yf("string"===typeof a,t,"argument-error"),Yf(r.type===ty,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Yf("enroll"===u.type,t,"internal-error"),e.next=13,cv(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Yf("signin"===u.type,t,"internal-error"),Yf(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,qv(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,jd(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),fy.apply(this,arguments)}function hy(){return(hy=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pp(ui(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dy=function(){function e(t){O(this,e),this.providerId=e.PROVIDER_ID,this.auth=sd(t)}return M(e,[{key:"verifyPhoneNumber",value:function(e,t){return ly(this.auth,e,ui(t))}}],[{key:"credential",value:function(e,t){return Hd._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Hd._fromTokenResponse(n,r):null}}]),e}();function py(e,t){return t?Zf(t):(Yf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dy.PROVIDER_ID="phone",dy.PHONE_SIGN_IN_METHOD="phone";var vy=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"custom","custom")).params=e,r}return M(n,[{key:"_getIdTokenResponse",value:function(e){return Fd(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fd(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fd(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(dd);function yy(e){return wp(e.auth,new vy(e),e.bypassAuthState)}function my(e){var t=e.auth,n=e.user;return Yf(n,t,"internal-error"),gp(n,new vy(e),e.bypassAuthState)}function gy(e){return ky.apply(this,arguments)}function ky(){return(ky=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Yf(r=t.user,n,"internal-error"),e.abrupt("return",pp(r,new vy(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];O(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return M(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=hr(lr().mark((function t(n,r){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yy;case"linkViaPopup":case"linkViaRedirect":return gy;case"reauthViaPopup":case"reauthViaRedirect":return my;default:Wf(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Xf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Xf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),by=new rh(2e3,1e4);function _y(e,t,n){return xy.apply(this,arguments)}function xy(){return(xy=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sd(t),Gf(t,n,Yd),a=py(i,r),o=new Ty(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iy(){return(Iy=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf((i=ui(t)).auth,n,Yd),a=py(i.auth,r),o=new Ty(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sy(e,t,n){return Ey.apply(this,arguments)}function Ey(){return(Ey=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf((i=ui(t)).auth,n,Yd),a=py(i.auth,r),o=new Ty(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ty=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o){var u;return O(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=B(u),u}return M(n,[{key:"executeNotNull",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Yf(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=hr(lr().mark((function e(){var t,n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xf(1===this.filter.length,"Popup operations only handle one event"),t=wv(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Kf(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Kf(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Kf(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,by.get())}()}}]),n}(wy);Ty.currentPopupAction=null;var Cy=new Map,Ny=function(e){U(n,e);var t=W(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return O(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return M(n,[{key:"execute",value:function(){var e=hr(lr().mark((function e(){var t,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Cy.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Py(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,If(V(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Cy.set(this.auth._key(),t);case 21:return this.bypassAuthState||Cy.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=hr(lr().mark((function e(t){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",If(V(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",If(V(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(wy);function Py(e,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=My(n),i=Ly(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dy(e,t){return Ry.apply(this,arguments)}function Ry(){return(Ry=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ly(t)._set(My(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oy(e,t){Cy.set(e._key(),t)}function Ly(e){return Zf(e._redirectPersistence)}function My(e){return Kh("pendingRedirect",e.config.apiKey,e.name)}function Fy(e,t,n){return function(e,t,n){return Uy.apply(this,arguments)}(e,t,n)}function Uy(){return(Uy=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sd(t),Gf(t,n,Yd),a=py(i,r),e.next=5,Dy(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vy(e,t,n){return function(e,t,n){return jy.apply(this,arguments)}(e,t,n)}function jy(){return(jy=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf((i=ui(t)).auth,n,Yd),a=py(i.auth,r),e.next=5,Dy(a,i.auth);case 5:return e.next=7,Gy(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qy(e,t,n){return function(e,t,n){return By.apply(this,arguments)}(e,t,n)}function By(){return(By=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gf((i=ui(t)).auth,n,Yd),a=py(i.auth,r),e.next=5,yp(!1,i,n.providerId);case 5:return e.next=7,Dy(a,i.auth);case 7:return e.next=9,Gy(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zy(e,t){return Wy.apply(this,arguments)}function Wy(){return(Wy=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sd(t)._initializationPromise;case 2:return e.abrupt("return",Ky(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ky(e,t){return Hy.apply(this,arguments)}function Hy(){return Hy=hr(lr().mark((function e(t,n){var r,i,a,o,u,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=sd(t),a=py(i,n),o=new Ny(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Hy.apply(this,arguments)}function Gy(e){return Qy.apply(this,arguments)}function Qy(){return(Qy=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wv("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yy=function(){function e(t){O(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return M(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Xy(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kf(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add($y(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function $y(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Xy(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Jy(e){return Zy.apply(this,arguments)}function Zy(){return Zy=hr(lr().mark((function e(t){var n,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ch(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}var em=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tm=/^https?/;function nm(){return(nm=hr(lr().mark((function e(t){var n,r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jy(t);case 4:n=e.sent,r=n.authorizedDomains,i=dr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!rm(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Wf(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function rm(e){var t=eh(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!tm.test(r))return!1;if(em.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var im=new rh(3e4,6e4);function am(){var e=_v().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=R(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var om=null;function um(e){return om=om||function(e){return new Promise((function(t,n){var r,i,a;function o(){am(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){am(),n(Kf(e,"network-request-failed"))},timeout:im.get()})}if(null===(i=null===(r=_v().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=_v().gapi)||void 0===a?void 0:a.load)){var u=Kv("iframefcb");return _v()[u]=function(){gapi.load?o():n(Kf(e,"network-request-failed"))},Wv("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw om=null,e}))}(e),om}var sm=new rh(5e3,15e3),cm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fm(e){var t=e.config;Yf(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ih(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ta},i=lm.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Jr(r).slice(1))}function hm(e){return dm.apply(this,arguments)}function dm(){return dm=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,um(t);case 2:return n=e.sent,Yf(r=_v().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:fm(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cm,dontclear:!0},(function(e){return new Promise(function(){var n=hr(lr().mark((function n(r,i){var a,o,u;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){_v().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Kf(t,"network-request-failed"),o=_v().setTimeout((function(){i(a)}),sm.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}var pm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vm="_blank",ym="http://localhost",mm=function(){function e(t){O(this,e),this.window=t,this.associatedEvent=null}return M(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function gm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},pm),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Sr().toLowerCase();n&&(u=$h(l)?vm:n),Qh(l)&&(t=t||ym,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(nd(l)&&"_self"!==u)return km(t||"",u),new mm(null);var h=window.open(t||"",u,f);Yf(h,e,"popup-blocked");try{h.focus()}catch(d){}return new mm(h)}function km(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var wm="__/auth/handler",bm="emulator/auth/handler";function _m(e,t,n,r,i,a){Yf(e.config.authDomain,e,"auth-domain-config-required"),Yf(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ta,eventId:i};if(t instanceof Yd){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Qr(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof $d){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(wm);return ih(t,bm)}(e),"?").concat(Jr(p).slice(1))}var xm="webStorageSupport",Im=function(){function e(){O(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=Ky,this._overrideRedirectResult=Oy}return M(e,[{key:"_openPopup",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xf(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=_m(t,n,r,eh(),i),e.abrupt("return",gm(t,o,wv()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=_m(t,n,r,eh(),i),_v().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Xf(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hm(t);case 2:return n=e.sent,r=new Yy(t),n.register("authEvent",(function(e){return Yf(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(xm,{type:xm},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Wf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return nm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return id()||Yh()||td()}}]),e}(),Sm=Im,Em=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone")).credential=e,r}return M(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ch(e,"POST","/v2/accounts/mfaEnrollment:finalize",sh(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ch(e,"POST","/v2/accounts/mfaSignIn:finalize",sh(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){O(this,e),this.factorId=t}return M(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $f("unexpected MultiFactorSessionType")}}}]),e}()),Tm=function(){function e(){O(this,e)}return M(e,null,[{key:"assertion",value:function(e){return Em._fromCredential(e)}}]),e}();Tm.FACTOR_ID="phone";var Cm="@firebase/auth",Nm="0.20.11",Pm=function(){function e(t){O(this,e),this.auth=t,this.internalListeners=new Map}return M(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Yf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Am;!function(e){var t;null===(t=Or())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Dm(){return window}Am="Browser",Qi(new si("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Yf(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Yf(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Am,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ad(Am)},i=new ud(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zf);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Qi(new si("auth-internal",(function(e){return function(e){return new Pm(e)}(sd(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ua(Cm,Nm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Am)),ua(Cm,Nm,"esm2017");function Rm(e,t,n){return Om.apply(this,arguments)}function Om(){return Om=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Dm(),o=a.BuildInfo,Xf(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,jm(n.sessionId);case 4:return u=e.sent,s={},td()?s.ibi=o.packageName:Jh()?s.apn=o.packageName:Wf(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",_m(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Lm(){return(Lm=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dm(),r=n.BuildInfo,i={},td()?i.iosBundleId=r.packageName:Jh()?i.androidPackageName=r.packageName:Wf(t,"operation-not-supported-in-this-environment"),e.next=5,Jy(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mm(e){var t=Dm().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Fm(e,t,n){return Um.apply(this,arguments)}function Um(){return Um=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dm(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Kf(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Jh()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Um.apply(this,arguments)}function Vm(e){var t,n,r,i,a,o,u,s,c,l,f=Dm();Yf("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Yf("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Yf("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yf("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yf("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function jm(e){return qm.apply(this,arguments)}function qm(){return(qm=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bm(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e){if(Xf(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var zm=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return M(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),If(V(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Yy);function Wm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Ym(),postBody:null,tenantId:e.tenantId,error:Kf(e,"no-auth-event")}}function Km(e,t){return $m()._set(Xm(e),t)}function Hm(e){return Gm.apply(this,arguments)}function Gm(){return(Gm=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$m()._get(Xm(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,$m()._remove(Xm(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qm(e,t){var n,r,i=function(e){var t=Jm(e),n=t.link?decodeURIComponent(t.link):void 0,r=Jm(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Jm(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Jm(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Kf(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ym(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function $m(){return Zf(vv)}function Xm(e){return Kh("authEvent",e.config.apiKey,e.name)}function Jm(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||D(t)||u(t)||s();r[0];return Zr(r.slice(1).join("?"))}var Zm=function(){function e(){O(this,e),this._redirectPersistence=mv,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ky,this._overrideRedirectResult=Oy}return M(e,[{key:"_initialize",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new zm(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Wf(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vm(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Cy.clear(),e.next=10,this._originValidation(t);case 10:return o=Wm(t,r,i),e.next=13,Km(t,o);case 13:return e.next=15,Rm(t,o,n);case 15:return u=e.sent,e.next=18,Mm(u);case 18:return s=e.sent,e.abrupt("return",Fm(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Lm.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Dm(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Hm(e);case 2:t.onEvent(tg());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=hr(lr().mark((function n(r){var i,a;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Hm(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Qm(i,r.url)),t.onEvent(a||tg());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Dm().handleOpenURL=function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),eg=Zm;function tg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kf("no-auth-event")}}function ng(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function rg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return!("file:"!==ng()&&"ionic:"!==ng()&&"capacitor:"!==ng()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ig(){return Pr()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ag(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return/Edge\/\d+/.test(e)}function og(){try{var e=self.localStorage,t=wv();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr();return ig()||ag(e)}()||Dr()}catch(n){return ug()&&Dr()}return!1}function ug(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function sg(){return("http:"===ng()||"https:"===ng()||Cr()||rg())&&!(Nr()||Tr())&&og()&&!ug()}function cg(){return rg()&&"undefined"!==typeof document}function lg(){return fg.apply(this,arguments)}function fg(){return(fg=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cg()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hg={LOCAL:"local",NONE:"none",SESSION:"session"},dg=Yf,pg="persistence";function vg(e,t){dg(Object.values(hg).includes(t),e,"invalid-persistence-type"),Nr()?dg(t!==hg.SESSION,e,"unsupported-persistence-type"):Tr()?dg(t===hg.NONE,e,"unsupported-persistence-type"):ug()?dg(t===hg.NONE||t===hg.LOCAL&&Dr(),e,"unsupported-persistence-type"):dg(t===hg.NONE||og(),e,"unsupported-persistence-type")}function yg(e){return mg.apply(this,arguments)}function mg(){return(mg=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=gg(),r=Kh(pg,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gg(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var kg=Yf,wg=function(){function e(){O(this,e),this.browserResolver=Zf(Sm),this.cordovaResolver=Zf(eg),this.underlyingResolver=null,this._redirectPersistence=mv,this._completeRedirectFn=Ky,this._overrideRedirectResult=Oy}return M(e,[{key:"_initialize",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return cg()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return kg(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lg();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bg(e){return e.unwrap()}function _g(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Tg(e,function(e,t){var n,r=ui(e),i=t;return Yf(t.customData.operationType,r,"argument-error"),Yf(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),sv._fromError(r,i)}(e,t));else if(i){var a=xg(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function xg(e){var t=(e instanceof Vr?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Vr)&&"temporaryProof"in t&&"phoneNumber"in t)return dy.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Pf)return null;switch(r){case Nf:n=Zd;break;case Tf:n=Jd;break;case Cf:n=ep;break;case Af:n=rp;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?tp._create(r,u):Vd._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Xd(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Vr?n.credentialFromError(e):n.credentialFromResult(e)}function Ig(e,t){return t.catch((function(t){throw t instanceof Vr&&_g(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,xg(t)),additionalUserInfo:ov(e),user:Cg.getOrCreate(r)}}))}function Sg(e,t){return Eg.apply(this,arguments)}function Eg(){return(Eg=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Ig(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tg=function(){function e(t,n){O(this,e),this.resolver=n,this.auth=t.wrapped()}return M(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Ig(bg(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Cg=function(){function e(t){O(this,e),this._delegate=t,this.multiFactor=function(e){var t=ui(e);return fv.has(t)||fv.set(t,lv._fromUser(t)),fv.get(t)}(t)}return M(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Ip(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sg(this.auth,uy(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Sy(this._delegate,t,wg)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yg(sd(this.auth));case 2:return e.abrupt("return",qy(this._delegate,t,wg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this.auth,Ep(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Sg(this.auth,function(e,t,n){return cy.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Ig(this.auth,function(e,t,n){return Iy.apply(this,arguments)}(this._delegate,e,wg))}},{key:"reauthenticateWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yg(sd(this.auth));case 2:return e.abrupt("return",Vy(this._delegate,t,wg));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Gp.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hp(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Jp(ui(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Jp(ui(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return hy.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Xp.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Qp.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Cg.USER_MAP=new WeakMap;var Ng=Yf,Pg=function(){function e(t,n){if(O(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ng(r,"invalid-api-key",{appName:t.name}),Ng(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?wg:void 0;this._delegate=n.initialize({options:{persistence:Dg(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Vf),this.linkUnderlyingAuth()}return M(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Cg.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ld(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Mp.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Fp(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Lp.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ig(this._delegate,jp(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Hp.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Gd.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ng(sg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zy(this._delegate,wg);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Ig(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){sd(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ag(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ag(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Bp.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Op.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vg(this._delegate,t),e.t0=t,e.next=e.t0===hg.SESSION?4:e.t0===hg.LOCAL?6:e.t0===hg.NONE?11:13;break;case 4:return n=mv,e.abrupt("break",14);case 6:return e.next=8,Zf(jv)._isAvailable();case 8:return r=e.sent,n=r?jv:vv,e.abrupt("break",14);case 11:return n=Wh,e.abrupt("break",14);case 13:return e.abrupt("return",Wf("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Ig(this._delegate,function(e){return sp.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Ig(this._delegate,_p(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Ig(this._delegate,function(e,t){return Pp.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Ig(this._delegate,function(e,t,n){return _p(ui(e),Qd.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Ig(this._delegate,function(e,t,n){return zp.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Sg(this._delegate,function(e,t,n){return oy.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ng(sg(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Ig(this._delegate,_y(this._delegate,t,wg)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ng(sg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,yg(this._delegate);case 3:return e.abrupt("return",Fy(this._delegate,t,wg));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Vp.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ag(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Cg.getOrCreate(e))},error:t,complete:n}}function Dg(e,t){var n=function(e,t){var n=gg();if(!n)return[];var r=Kh(pg,e,t);switch(n.getItem(r)){case hg.NONE:return[Wh];case hg.LOCAL:return[jv,mv];case hg.SESSION:return[mv];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(jv)||n.push(jv),"undefined"!==typeof window)for(var r=0,i=[vv,mv];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Wh)||n.push(Wh),n}Pg.Persistence=hg;var Rg=function(){function e(){O(this,e),this.providerId="phone",this._delegate=new dy(bg(_f.auth()))}return M(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return dy.credential(e,t)}}]),e}();Rg.PHONE_SIGN_IN_METHOD=dy.PHONE_SIGN_IN_METHOD,Rg.PROVIDER_ID=dy.PROVIDER_ID;var Og,Lg=Yf,Mg=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_f.app();O(this,e),Lg(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ry(t,n,i.auth()),this.type=this._delegate.type}return M(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Og=_f).INTERNAL.registerComponent(new si("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Pg(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Df,PASSWORD_RESET:Rf,RECOVER_EMAIL:Of,REVERT_SECOND_FACTOR_ADDITION:Lf,VERIFY_AND_CHANGE_EMAIL:Mf,VERIFY_EMAIL:Ff}},EmailAuthProvider:Qd,FacebookAuthProvider:Jd,GithubAuthProvider:ep,GoogleAuthProvider:Zd,OAuthProvider:Xd,SAMLAuthProvider:np,PhoneAuthProvider:Rg,PhoneMultiFactorGenerator:Tm,RecaptchaVerifier:Mg,TwitterAuthProvider:rp,Auth:Pg,AuthCredential:dd,Error:Vr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Og.registerVersion("@firebase/auth-compat","0.2.24");var Fg,Ug="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Vg={},jg=jg||{},qg=Ug||self;function Bg(){}function zg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Wg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kg="closure_uid_"+(1e9*Math.random()>>>0),Hg=0;function Gg(e,t,n){return e.call.apply(e.bind,arguments)}function Qg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Yg(e,t,n){return(Yg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gg:Qg).apply(null,arguments)}function $g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xg(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jg(){this.s=this.s,this.o=this.o}Jg.prototype.s=!1,Jg.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Kg)&&e[Kg]||(e[Kg]=++Hg)}(this)},Jg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Zg=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ek(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function tk(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(zg(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function nk(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}nk.prototype.h=function(){this.defaultPrevented=!0};var rk=function(){if(!qg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qg.addEventListener("test",Bg,t),qg.removeEventListener("test",Bg,t)}catch(ft){}return e}();function ik(e){return/^[\s\xa0]*$/.test(e)}var ak=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ok(e,t){return e<t?-1:e>t?1:0}function uk(){var e=qg.navigator;return e&&(e=e.userAgent)?e:""}function sk(e){return-1!=uk().indexOf(e)}function ck(e){return ck[" "](e),e}ck[" "]=Bg;var lk,fk=sk("Opera"),hk=sk("Trident")||sk("MSIE"),dk=sk("Edge"),pk=dk||hk,vk=sk("Gecko")&&!(-1!=uk().toLowerCase().indexOf("webkit")&&!sk("Edge"))&&!(sk("Trident")||sk("MSIE"))&&!sk("Edge"),yk=-1!=uk().toLowerCase().indexOf("webkit")&&!sk("Edge");function mk(){var e=qg.document;return e?e.documentMode:void 0}e:{var gk="",kk=function(){var e=uk();return vk?/rv:([^\);]+)(\)|;)/.exec(e):dk?/Edge\/([\d\.]+)/.exec(e):hk?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yk?/WebKit\/(\S+)/.exec(e):fk?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kk&&(gk=kk?kk[1]:""),hk){var wk=mk();if(null!=wk&&wk>parseFloat(gk)){lk=String(wk);break e}}lk=gk}var bk,_k={};function xk(){return function(e){var t=_k;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ak(String(lk)).split("."),n=ak("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ok(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ok(0==a[2].length,0==o[2].length)||ok(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qg.document&&hk){var Ik=mk();bk=Ik||(parseInt(lk,10)||void 0)}else bk=void 0;var Sk=bk;function Ek(e,t){if(nk.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vk){e:{try{ck(t.nodeName);var i=!0;break e}catch(lt){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Tk[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ek.X.h.call(this)}}Xg(Ek,nk);var Tk={2:"touch",3:"pen",4:"mouse"};Ek.prototype.h=function(){Ek.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ck="closure_listenable_"+(1e6*Math.random()|0),Nk=0;function Pk(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Nk,this.ba=this.ea=!1}function Ak(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Dk(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rk(e){var t={};for(var n in e)t[n]=e[n];return t}var Ok="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lk(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ok.length;a++)n=Ok[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Mk(e){this.src=e,this.g={},this.h=0}function Fk(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Zg(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ak(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Uk(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Mk.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Uk(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Pk(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Vk="closure_lm_"+(1e6*Math.random()|0),jk={};function qk(e,t,n,r,i){if(r&&r.once)return zk(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qk(e,t[a],n,r,i);return null}return n=$k(n),e&&e[Ck]?e.N(t,n,Wg(r)?!!r.capture:!!r,i):Bk(e,t,n,!1,r,i)}function Bk(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Wg(i)?!!i.capture:!!i,u=Qk(e);if(u||(e[Vk]=u=new Mk(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Gk;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rk||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Hk(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zk(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zk(e,t[a],n,r,i);return null}return n=$k(n),e&&e[Ck]?e.O(t,n,Wg(r)?!!r.capture:!!r,i):Bk(e,t,n,!0,r,i)}function Wk(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Wk(e,t[a],n,r,i);else r=Wg(r)?!!r.capture:!!r,n=$k(n),e&&e[Ck]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Uk(a=e.g[t],n,r,i))&&(Ak(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Qk(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Uk(t,n,r,i)),(n=-1<e?t[e]:null)&&Kk(n))}function Kk(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ck])Fk(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Hk(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Qk(t))?(Fk(n,e),0==n.h&&(n.src=null,t[Vk]=null)):Ak(e)}}}function Hk(e){return e in jk?jk[e]:jk[e]="on"+e}function Gk(e,t){if(e.ba)e=!0;else{t=new Ek(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Kk(e),e=n.call(r,t)}return e}function Qk(e){return(e=e[Vk])instanceof Mk?e:null}var Yk="__closure_events_fn_"+(1e9*Math.random()>>>0);function $k(e){return"function"===typeof e?e:(e[Yk]||(e[Yk]=function(t){return e.handleEvent(t)}),e[Yk])}function Xk(){Jg.call(this),this.i=new Mk(this),this.P=this,this.I=null}function Jk(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new nk(t,e);else if(t instanceof nk)t.target=t.target||e;else{var i=t;Lk(t=new nk(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Zk(o,r,!0,t)&&i}if(i=Zk(o=t.g=e,r,!0,t)&&i,i=Zk(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Zk(o=t.g=n[a],r,!1,t)&&i}function Zk(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Fk(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Xg(Xk,Jg),Xk.prototype[Ck]=!0,Xk.prototype.removeEventListener=function(e,t,n,r){Wk(this,e,t,n,r)},Xk.prototype.M=function(){if(Xk.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ak(n[r]);delete t.g[e],t.h--}}this.I=null},Xk.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xk.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ew=qg.JSON.stringify;function tw(){var e=cw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nw,rw=function(){function e(){O(this,e),this.h=this.g=null}return M(e,[{key:"add",value:function(e,t){var n=iw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),iw=new(function(){function e(t,n){O(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return M(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new aw}),(function(e){return e.reset()})),aw=function(){function e(){O(this,e),this.next=this.g=this.h=null}return M(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ow(e){qg.setTimeout((function(){throw e}),0)}function uw(e,t){nw||function(){var e=qg.Promise.resolve(void 0);nw=function(){e.then(lw)}}(),sw||(nw(),sw=!0),cw.add(e,t)}var sw=!1,cw=new rw;function lw(){for(var e;e=tw();){try{e.h.call(e.g)}catch(ft){ow(ft)}var t=iw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sw=!1}function fw(e,t){Xk.call(this),this.h=e||1,this.g=t||qg,this.j=Yg(this.lb,this),this.l=Date.now()}function hw(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function dw(e,t,n){if("function"===typeof e)n&&(e=Yg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Yg(e.handleEvent,e)}return 2147483647<Number(t)?-1:qg.setTimeout(e,t||0)}function pw(e){e.g=dw((function(){e.g=null,e.i&&(e.i=!1,pw(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xg(fw,Xk),(Fg=fw.prototype).ca=!1,Fg.R=null,Fg.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Jk(this,"tick"),this.ca&&(hw(this),this.start()))}},Fg.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fg.M=function(){fw.X.M.call(this),hw(this),delete this.g};var vw=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return M(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:pw(this)}},{key:"M",value:function(){If(V(n.prototype),"M",this).call(this),this.g&&(qg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jg);function yw(e){Jg.call(this),this.h=e,this.g={}}Xg(yw,Jg);var mw=[];function gw(e,t,n,r){Array.isArray(n)||(n&&(mw[0]=n.toString()),n=mw);for(var i=0;i<n.length;i++){var a=qk(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function kw(e){Dk(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Kk(e)}),e),e.g={}}function ww(){this.g=!0}function bw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ew(n)}catch(rt){return t}}(e,n)+(r?" "+r:"")}))}yw.prototype.M=function(){yw.X.M.call(this),kw(this)},yw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ww.prototype.Aa=function(){this.g=!1},ww.prototype.info=function(){};var _w={},xw=null;function Iw(){return xw=xw||new Xk}function Sw(e){nk.call(this,_w.Pa,e)}function Ew(e){var t=Iw();Jk(t,new Sw(t))}function Tw(e,t){nk.call(this,_w.STAT_EVENT,e),this.stat=t}function Cw(e){var t=Iw();Jk(t,new Tw(t,e))}function Nw(e,t){nk.call(this,_w.Qa,e),this.size=t}function Pw(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qg.setTimeout((function(){e()}),t)}_w.Pa="serverreachability",Xg(Sw,nk),_w.STAT_EVENT="statevent",Xg(Tw,nk),_w.Qa="timingevent",Xg(Nw,nk);var Aw={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Rw(){}function Ow(e){return e.h||(e.h=e.i())}function Lw(){}Rw.prototype.h=null;var Mw,Fw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Uw(){nk.call(this,"d")}function Vw(){nk.call(this,"c")}function jw(){}function qw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new yw(this),this.O=zw,e=pk?125:void 0,this.T=new fw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bw}function Bw(){this.i=null,this.g="",this.h=!1}Xg(Uw,nk),Xg(Vw,nk),Xg(jw,Rw),jw.prototype.g=function(){return new XMLHttpRequest},jw.prototype.i=function(){return{}},Mw=new jw;var zw=45e3,Ww={},Kw={};function Hw(e,t,n){e.K=1,e.v=fb(ob(t)),e.s=n,e.P=!0,Gw(e,null)}function Gw(e,t){e.F=Date.now(),Xw(e),e.A=ob(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ib(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Bw,e.g=I_(e.l,n?t:null,!e.s),0<e.N&&(e.L=new vw(Yg(e.La,e,e.g),e.N)),gw(e.S,e.g,"readystatechange",e.ib),t=e.H?Rk(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Ew(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Qw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Yw(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=$w(e,n))==Kw){4==t&&(e.o=4,Cw(14),i=!1),bw(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ww){e.o=4,Cw(15),bw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}bw(e.j,e.m,r,null),nb(e,r)}Qw(e)&&r!=Kw&&r!=Ww&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),y_(t),t.K=!0,Cw(11))):(bw(e.j,e.m,n,"[Invalid Chunked Response]"),tb(e),eb(e))}function $w(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Kw:(n=Number(t.substring(n,r)),isNaN(n)?Ww:(r+=1)+n>t.length?Kw:(t=t.substr(r,n),e.C=r+n,t))}function Xw(e){e.V=Date.now()+e.O,Jw(e,e.O)}function Jw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pw(Yg(e.gb,e),t)}function Zw(e){e.B&&(qg.clearTimeout(e.B),e.B=null)}function eb(e){0==e.l.G||e.I||k_(e.l,e)}function tb(e){Zw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,hw(e.T),kw(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function nb(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ab(n.h,e)))if(!e.J&&Ab(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;g_(n),s_(n)}v_(n),Cw(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Pw(Yg(n.cb,n),6e3));if(1>=Pb(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else b_(n,11)}else if((e.J||n.g==e)&&g_(n),!ik(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Db(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,lb(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=x_(r,r.H?r.ka:null,r.V),d.J){Rb(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Zw(p),Xw(p)),r.g=d}else p_(r);0<n.i.length&&l_(n)}else"stop"!=a[0]&&"close"!=a[0]||b_(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?b_(n,7):u_(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Ew()}catch(a){}}function rb(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(zg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(zg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(zg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Fg=qw.prototype).setTimeout=function(e){this.O=e},Fg.ib=function(e){e=e.target;var t=this.L;t&&3==t_(e)?t.l():this.La(e)},Fg.La=function(e){try{if(e==this.g)e:{var t=t_(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||pk||this.g&&(this.h.h||this.g.fa()||n_(this.g)))){this.I||4!=t||7==n||Ew(),Zw(this);var r=this.g.aa();this.Y=r;t:if(Qw(this)){var i=n_(this.g);e="";var a=i.length,o=4==t_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){tb(this),eb(this);var u="";break t}this.h.i=new qg.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ik(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Cw(12),tb(this),eb(this);break e}bw(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,nb(this,r)}this.P?(Yw(this,t,u),pk&&this.i&&3==t&&(gw(this.S,this.T,"tick",this.hb),this.T.start())):(bw(this.j,this.m,u,null),nb(this,u)),4==t&&tb(this),this.i&&!this.I&&(4==t?k_(this.l,this):(this.i=!1,Xw(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Cw(12)):(this.o=0,Cw(13)),tb(this),eb(this)}}}catch(t){}},Fg.hb=function(){if(this.g){var e=t_(this.g),t=this.g.fa();this.C<t.length&&(Zw(this),Yw(this,e,t),this.i&&4!=e&&Xw(this))}},Fg.cancel=function(){this.I=!0,tb(this)},Fg.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ew(),Cw(17)),tb(this),this.o=2,eb(this)):Jw(this,this.V-e)};var ib=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ab(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ab){this.h=void 0!==t?t:e.h,ub(this,e.j),this.s=e.s,this.g=e.g,sb(this,e.m),this.l=e.l,t=e.i;var n=new wb;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),cb(this,n),this.o=e.o}else e&&(n=String(e).match(ib))?(this.h=!!t,ub(this,n[1]||"",!0),this.s=hb(n[2]||""),this.g=hb(n[3]||"",!0),sb(this,n[4]),this.l=hb(n[5]||"",!0),cb(this,n[6]||"",!0),this.o=hb(n[7]||"")):(this.h=!!t,this.i=new wb(null,this.h))}function ob(e){return new ab(e)}function ub(e,t,n){e.j=n?hb(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function sb(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cb(e,t,n){t instanceof wb?(e.i=t,function(e,t){t&&!e.j&&(bb(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(_b(this,t),Ib(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=db(t,gb)),e.i=new wb(t,e.h))}function lb(e,t,n){e.i.set(t,n)}function fb(e){return lb(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hb(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function db(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pb),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ab.prototype.toString=function(){var e=[],t=this.j;t&&e.push(db(t,vb,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(db(t,vb,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(db(n,"/"==n.charAt(0)?mb:yb,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",db(n,kb)),e.join("")};var vb=/[#\/\?@]/g,yb=/[#\?:]/g,mb=/[#\?]/g,gb=/[#\?@]/g,kb=/#/g;function wb(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bb(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function _b(e,t){bb(e),t=Sb(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xb(e,t){return bb(e),t=Sb(e,t),e.g.has(t)}function Ib(e,t,n){_b(e,t),0<n.length&&(e.i=null,e.g.set(Sb(e,t),ek(n)),e.h+=n.length)}function Sb(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fg=wb.prototype).add=function(e,t){bb(this),this.i=null,e=Sb(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fg.forEach=function(e,t){bb(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Fg.oa=function(){bb(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Fg.W=function(e){bb(this);var t=[];if("string"===typeof e)xb(this,e)&&(t=t.concat(this.g.get(Sb(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Fg.set=function(e,t){return bb(this),this.i=null,xb(this,e=Sb(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fg.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Fg.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Eb=M((function e(t,n){O(this,e),this.h=t,this.g=n}));function Tb(e){this.l=e||Cb,qg.PerformanceNavigationTiming?e=0<(e=qg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qg.g&&qg.g.Ga&&qg.g.Ga()&&qg.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cb=10;function Nb(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Pb(e){return e.h?1:e.g?e.g.size:0}function Ab(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Db(e,t){e.g?e.g.add(t):e.h=t}function Rb(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ob(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=dr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ek(e.i)}function Lb(){}function Mb(){this.g=new Lb}function Fb(e,t,n){var r=n||"";try{rb(e,(function(e,n){var i=e;Wg(e)&&(i=ew(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ub(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(lt){}}function Vb(e){this.l=e.ac||null,this.j=e.jb||!1}function jb(e,t){Xk.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=qb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tb.prototype.cancel=function(){if(this.i=Ob(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=dr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Lb.prototype.stringify=function(e){return qg.JSON.stringify(e,void 0)},Lb.prototype.parse=function(e){return qg.JSON.parse(e,void 0)},Xg(Vb,Rw),Vb.prototype.g=function(){return new jb(this.l,this.j)},Vb.prototype.i=function(e){return function(){return e}}({}),Xg(jb,Xk);var qb=0;function Bb(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function zb(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wb(e)}function Wb(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fg=jb.prototype).open=function(e,t){if(this.readyState!=qb)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wb(this)},Fg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qg).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Fg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zb(this)),this.readyState=qb},Fg.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wb(this)),this.g&&(this.readyState=3,Wb(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof qg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bb(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Fg.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zb(this):Wb(this),3==this.readyState&&Bb(this)}},Fg.Va=function(e){this.g&&(this.response=this.responseText=e,zb(this))},Fg.Ua=function(e){this.g&&(this.response=e,zb(this))},Fg.ga=function(){this.g&&zb(this)},Fg.setRequestHeader=function(e,t){this.v.append(e,t)},Fg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fg.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Kb=qg.JSON.parse;function Hb(e){Xk.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Gb,this.K=this.L=!1}Xg(Hb,Xk);var Gb="",Qb=/^https?$/i,Yb=["POST","PUT"];function $b(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xb(e),Zb(e)}function Xb(e){e.D||(e.D=!0,Jk(e,"complete"),Jk(e,"error"))}function Jb(e){if(e.h&&"undefined"!=typeof jg&&(!e.C[1]||4!=t_(e)||2!=e.aa()))if(e.v&&4==t_(e))dw(e.Ha,0,e);else if(Jk(e,"readystatechange"),4==t_(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ib)[1]||null;if(!a&&qg.self&&qg.self.location){var o=qg.self.location.protocol;a=o.substr(0,o.length-1)}i=!Qb.test(a?a.toLowerCase():"")}t=i}if(t)Jk(e,"complete"),Jk(e,"success");else{e.m=6;try{var u=2<t_(e)?e.g.statusText:""}catch(st){u=""}e.j=u+" ["+e.aa()+"]",Xb(e)}}finally{Zb(e)}}}function Zb(e,t){if(e.g){e_(e);var n=e.g,r=e.C[0]?Bg:null;e.g=null,e.C=null,t||Jk(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function e_(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qg.clearTimeout(e.A),e.A=null)}function t_(e){return e.g?e.g.readyState:0}function n_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Gb:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(kt){return null}}function r_(e){var t="";return Dk(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function i_(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=r_(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):lb(e,t,n))}function a_(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function o_(e){this.Ca=0,this.i=[],this.j=new ww,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=a_("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=a_("baseRetryDelayMs",5e3,e),this.bb=a_("retryDelaySeedMs",1e4,e),this.$a=a_("forwardChannelMaxRetries",2,e),this.ta=a_("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Tb(e&&e.concurrentRequestLimit),this.Fa=new Mb,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function u_(e){if(c_(e),3==e.G){var t=e.U++,n=ob(e.F);lb(n,"SID",e.I),lb(n,"RID",t),lb(n,"TYPE","terminate"),h_(e,n),(t=new qw(e,e.j,t,void 0)).K=2,t.v=fb(ob(n)),n=!1,qg.navigator&&qg.navigator.sendBeacon&&(n=qg.navigator.sendBeacon(t.v.toString(),"")),!n&&qg.Image&&((new Image).src=t.v,n=!0),n||(t.g=I_(t.l,null),t.g.da(t.v)),t.F=Date.now(),Xw(t)}__(e)}function s_(e){e.g&&(y_(e),e.g.cancel(),e.g=null)}function c_(e){s_(e),e.u&&(qg.clearTimeout(e.u),e.u=null),g_(e),e.h.cancel(),e.m&&("number"===typeof e.m&&qg.clearTimeout(e.m),e.m=null)}function l_(e){Nb(e.h)||e.m||(e.m=!0,uw(e.Ja,e),e.C=0)}function f_(e,t){var n;n=t?t.m:e.U++;var r=ob(e.F);lb(r,"SID",e.I),lb(r,"RID",n),lb(r,"AID",e.T),h_(e,r),e.o&&e.s&&i_(r,e.o,e.s),n=new qw(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=d_(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Db(e.h,n),Hw(n,r,t)}function h_(e,t){e.ia&&Dk(e.ia,(function(e,n){lb(t,n,e)})),e.l&&rb({},(function(e,n){lb(t,n,e)}))}function d_(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Yg(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Fb(l,o,"req"+c+"_")}catch(Ft){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function p_(e){e.g||e.u||(e.Z=1,uw(e.Ia,e),e.A=0)}function v_(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Pw(Yg(e.Ia,e),w_(e,e.A)),e.A++,!0)}function y_(e){null!=e.B&&(qg.clearTimeout(e.B),e.B=null)}function m_(e){e.g=new qw(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=ob(e.sa);lb(t,"RID","rpc"),lb(t,"SID",e.I),lb(t,"CI",e.L?"0":"1"),lb(t,"AID",e.T),lb(t,"TYPE","xmlhttp"),h_(e,t),e.o&&e.s&&i_(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=fb(ob(t)),n.s=null,n.P=!0,Gw(n,e)}function g_(e){null!=e.v&&(qg.clearTimeout(e.v),e.v=null)}function k_(e,t){var n=null;if(e.g==t){g_(e),y_(e),e.g=null;var r=2}else{if(!Ab(e.h,t))return;n=t.D,Rb(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Jk(r=Iw(),new Nw(r,n)),l_(e)}else p_(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Pb(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Pw(Yg(e.Ja,e,t),w_(e,e.C)),e.C++,!0))}(e,t)||2==r&&v_(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:b_(e,5);break;case 4:b_(e,10);break;case 3:b_(e,6);break;default:b_(e,2)}}function w_(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function b_(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Yg(e.kb,e);n||(n=new ab("//www.google.com/images/cleardot.gif"),qg.location&&"http"==qg.location.protocol||ub(n,"https"),fb(n)),function(e,t){var n=new ww;if(qg.Image){var r=new Image;r.onload=$g(Ub,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$g(Ub,n,r,"TestLoadImage: error",!1,t),r.onabort=$g(Ub,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$g(Ub,n,r,"TestLoadImage: timeout",!1,t),qg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cw(2);e.G=0,e.l&&e.l.va(t),__(e),c_(e)}function __(e){if(e.G=0,e.la=[],e.l){var t=Ob(e.h);0==t.length&&0==e.i.length||(tk(e.la,t),tk(e.la,e.i),e.h.i.length=0,ek(e.i),e.i.length=0),e.l.ua()}}function x_(e,t,n){var r=n instanceof ab?ob(n):new ab(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),sb(r,r.m);else{var i=qg.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ab(null,void 0);r&&ub(a,r),t&&(a.g=t),i&&sb(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&lb(r,n,t),lb(r,"VER",e.ma),h_(e,r),r}function I_(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Hb(new Vb({jb:!0})):new Hb(e.ra)).Ka(e.H),t}function S_(){}function E_(){if(hk&&!(10<=Number(Sk)))throw Error("Environmental error: no available transport.")}function T_(e,t){Xk.call(this),this.g=new o_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!ik(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ik(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new P_(this)}function C_(e){Uw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function N_(){Vw.call(this),this.status=1}function P_(e){this.g=e}(Fg=Hb.prototype).Ka=function(e){this.L=e},Fg.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mw.g(),this.C=this.u?Ow(this.u):Ow(Mw),this.g.onreadystatechange=Yg(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void $b(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=dr(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qg.FormData&&e instanceof qg.FormData,!(0<=Zg(Yb,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=dr(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{e_(this),0<this.B&&((this.K=function(e){return hk&&xk()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yg(this.qa,this)):this.A=dw(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){$b(this,u)}},Fg.qa=function(){"undefined"!=typeof jg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jk(this,"timeout"),this.abort(8))},Fg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Jk(this,"complete"),Jk(this,"abort"),Zb(this))},Fg.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zb(this,!0)),Hb.X.M.call(this)},Fg.Ha=function(){this.s||(this.F||this.v||this.l?Jb(this):this.fb())},Fg.fb=function(){Jb(this)},Fg.aa=function(){try{return 2<t_(this)?this.g.status:-1}catch(ct){return-1}},Fg.fa=function(){try{return this.g?this.g.responseText:""}catch(ct){return""}},Fg.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Kb(t)}},Fg.Ea=function(){return this.m},Fg.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fg=o_.prototype).ma=8,Fg.G=1,Fg.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new qw(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Lk(n=Rk(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=d_(this,t,r),lb(i=ob(this.F),"RID",e),lb(i,"CVER",22),this.D&&lb(i,"X-HTTP-Session-Id",this.D),h_(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(r_(n)))+"&"+r:this.o&&i_(i,this.o,n)),Db(this.h,t),this.Ya&&lb(i,"TYPE","init"),this.O?(lb(i,"$req",r),lb(i,"SID","null"),t.Z=!0,Hw(t,i,null)):Hw(t,i,r),this.G=2}}else 3==this.G&&(e?f_(this,e):0==this.i.length||Nb(this.h)||f_(this))},Fg.Ia=function(){if(this.u=null,m_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Pw(Yg(this.eb,this),e)}},Fg.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Cw(10),s_(this),m_(this))},Fg.cb=function(){null!=this.v&&(this.v=null,s_(this),v_(this),Cw(19))},Fg.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Cw(2)):(this.j.info("Failed to ping google.com"),Cw(1))},(Fg=S_.prototype).xa=function(){},Fg.wa=function(){},Fg.va=function(){},Fg.ua=function(){},Fg.Ra=function(){},E_.prototype.g=function(e,t){return new T_(e,t)},Xg(T_,Xk),T_.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Cw(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=x_(e,null,e.V),l_(e)},T_.prototype.close=function(){u_(this.g)},T_.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ew(e),e=n);t.i.push(new Eb(t.ab++,e)),3==t.G&&l_(t)},T_.prototype.M=function(){this.g.l=null,delete this.j,u_(this.g),delete this.g,T_.X.M.call(this)},Xg(C_,Uw),Xg(N_,Vw),Xg(P_,S_),P_.prototype.xa=function(){Jk(this.g,"a")},P_.prototype.wa=function(e){Jk(this.g,new C_(e))},P_.prototype.va=function(e){Jk(this.g,new N_)},P_.prototype.ua=function(){Jk(this.g,"b")},E_.prototype.createWebChannel=E_.prototype.g,T_.prototype.send=T_.prototype.u,T_.prototype.open=T_.prototype.m,T_.prototype.close=T_.prototype.close,Aw.NO_ERROR=0,Aw.TIMEOUT=8,Aw.HTTP_ERROR=6,Dw.COMPLETE="complete",Lw.EventType=Fw,Fw.OPEN="a",Fw.CLOSE="b",Fw.ERROR="c",Fw.MESSAGE="d",Xk.prototype.listen=Xk.prototype.N,Hb.prototype.listenOnce=Hb.prototype.O,Hb.prototype.getLastError=Hb.prototype.Oa,Hb.prototype.getLastErrorCode=Hb.prototype.Ea,Hb.prototype.getStatus=Hb.prototype.aa,Hb.prototype.getResponseJson=Hb.prototype.Sa,Hb.prototype.getResponseText=Hb.prototype.fa,Hb.prototype.send=Hb.prototype.da,Hb.prototype.setWithCredentials=Hb.prototype.Ka;var A_=Vg.createWebChannelTransport=function(){return new E_},D_=Vg.getStatEventTarget=function(){return Iw()},R_=Vg.ErrorCode=Aw,O_=Vg.EventType=Dw,L_=Vg.Event=_w,M_=Vg.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},F_=Vg.FetchXmlHttpFactory=Vb,U_=Vg.WebChannel=Lw,V_=Vg.XhrIo=Hb,j_="@firebase/firestore",q_=function(){function e(t){O(this,e),this.uid=t}return M(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();q_.UNAUTHENTICATED=new q_(null),q_.GOOGLE_CREDENTIALS=new q_("google-credentials-uid"),q_.FIRST_PARTY=new q_("first-party-uid"),q_.MOCK_USER=new q_("mock-user");var B_="9.13.0",z_=new ki("@firebase/firestore");function W_(){return z_.logLevel}function K_(e){if(z_.logLevel<=hi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Q_);z_.debug.apply(z_,["Firestore (".concat(B_,"): ").concat(e)].concat(R(i)))}}function H_(e){if(z_.logLevel<=hi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Q_);z_.error.apply(z_,["Firestore (".concat(B_,"): ").concat(e)].concat(R(i)))}}function G_(e){if(z_.logLevel<=hi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Q_);z_.warn.apply(z_,["Firestore (".concat(B_,"): ").concat(e)].concat(R(i)))}}function Q_(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Y_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(B_,") INTERNAL ASSERTION FAILED: ")+e;throw H_(t),new Error(t)}function $_(e,t){e||Y_()}function X_(e,t){return e}var J_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Z_=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return M(n)}(Vr),ex=M((function e(){var t=this;O(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),tx=M((function e(t,n){O(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),nx=function(){function e(){O(this,e)}return M(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(q_.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),rx=function(){function e(t){O(this,e),this.token=t,this.changeListener=null}return M(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ix=function(){function e(t){O(this,e),this.t=t,this.currentUser=q_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return M(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ex;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ex,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){K_("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(K_("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ex)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(K_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($_("string"==typeof n.accessToken),new tx(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $_(null===e||"string"==typeof e),new q_(e)}}]),e}(),ax=function(){function e(t,n,r,i){O(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=q_.FIRST_PARTY,this.p=new Map}return M(e,[{key:"I",value:function(){return this.g?this.g():($_(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),ox=function(){function e(t,n,r,i){O(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return M(e,[{key:"getToken",value:function(){return Promise.resolve(new ax(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(q_.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ux=M((function e(t){O(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),sx=function(){function e(t){O(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return M(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&K_("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,K_("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){K_("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):K_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?($_("string"==typeof t.token),e.A=t.token,new ux(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function cx(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var lx=function(){function e(){O(this,e)}return M(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=cx(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function fx(e,t){return e<t?-1:e>t?1:0}function hx(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function dx(e){return e+"\0"}var px=function(){function e(t,n){if(O(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Z_(J_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z_(J_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Z_(J_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z_(J_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return M(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fx(this.nanoseconds,e.nanoseconds):fx(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vx=function(){function e(t){O(this,e),this.timestamp=t}return M(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new px(0,0))}},{key:"max",value:function(){return new e(new px(253402300799,999999999))}}]),e}(),yx=function(){function e(t,n,r){O(this,e),void 0===n?n=0:n>t.length&&Y_(),void 0===r?r=t.length-n:r>t.length-n&&Y_(),this.segments=t,this.offset=n,this.len=r}return M(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),mx=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Z_(J_.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,R(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yx),gx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kx=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return gx.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Z_(J_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Z_(J_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Z_(J_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Z_(J_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yx),wx=function(){function e(t){O(this,e),this.path=t}return M(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===mx.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(mx.fromString(t))}},{key:"fromName",value:function(t){return new e(mx.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(mx.emptyPath())}},{key:"comparator",value:function(e,t){return mx.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new mx(t.slice()))}}]),e}(),bx=M((function e(t,n,r,i){O(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function _x(e){return e.fields.find((function(e){return 2===e.kind}))}function xx(e){return e.fields.filter((function(e){return 2!==e.kind}))}bx.UNKNOWN_ID=-1;var Ix=M((function e(t,n){O(this,e),this.fieldPath=t,this.kind=n}));var Sx=function(){function e(t,n){O(this,e),this.sequenceNumber=t,this.offset=n}return M(e,null,[{key:"empty",value:function(){return new e(0,Cx.min())}}]),e}();function Ex(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vx.fromTimestamp(1e9===r?new px(n+1,0):new px(n,r));return new Cx(i,wx.empty(),t)}function Tx(e){return new Cx(e.readTime,e.key,-1)}var Cx=function(){function e(t,n,r){O(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return M(e,null,[{key:"min",value:function(){return new e(vx.min(),wx.empty(),-1)}},{key:"max",value:function(){return new e(vx.max(),wx.empty(),-1)}}]),e}();function Nx(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wx.comparator(e.documentKey,t.documentKey))?n:fx(e.largestBatchId,t.largestBatchId)}var Px="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ax=function(){function e(){O(this,e),this.onCommittedListeners=[]}return M(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Dx(e){return Rx.apply(this,arguments)}function Rx(){return Rx=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===J_.FAILED_PRECONDITION&&t.message===Px){e.next=2;break}throw t;case 2:K_("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}var Ox=function(){function e(t){var n=this;O(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return M(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Y_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=dr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Lx=function(){function e(t,n){var r=this;O(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new ex,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Ux(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=zx(e.target.error);r.P.reject(new Ux(t,n))}}return M(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(K_("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new jx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ux(n,t)}}}]),e}(),Mx=function(){function e(t,n,r){O(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Sr())&&H_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return M(e,[{key:"F",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return K_("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ux(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Z_(J_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Z_(J_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ux(t,n))},i.onupgradeneeded=function(e){K_("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){K_("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(lr().mark((function e(){var n,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Lx.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Ox.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,K_("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return K_("SimpleDb","Removing database:",e),qx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Dr())return!1;if(e.N())return!0;var t=Sr(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Fx=function(){function e(t){O(this,e),this.U=t,this.q=!1,this.K=null}return M(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return qx(this.U.delete())}}]),e}(),Ux=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,J_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return M(n)}(Z_);function Vx(e){return"IndexedDbTransactionError"===e.name}var jx=function(){function e(t){O(this,e),this.store=t}return M(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(K_("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(K_("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qx(n)}},{key:"add",value:function(e){return K_("SimpleDb","ADD",this.store.name,e,e),qx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return qx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),K_("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return K_("SimpleDb","DELETE",this.store.name,e),qx(this.store.delete(e))}},{key:"count",value:function(){return K_("SimpleDb","COUNT",this.store.name),qx(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ox((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ox((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){K_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Ox((function(n,r){t.onerror=function(e){var t=zx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Ox((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Fx(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ox){var u=o.catch((function(e){return a.done(),Ox.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Ox.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function qx(e){return new Ox((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zx(e.target.error);n(t)}}))}var Bx=!1;function zx(e){var t=Mx.D(Sr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Z_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Bx||(Bx=!0,setTimeout((function(){throw r}),0)),r}}return e}var Wx=function(){function e(t,n){O(this,e),this.asyncQueue=t,this.et=n,this.task=null}return M(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;K_("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=K_,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Vx(e.t4)){e.next=17;break}K_("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Dx(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Kx=function(){function e(t,n){O(this,e),this.localStore=t,this.persistence=n}return M(e,[{key:"st",value:function(){var e=hr(lr().mark((function e(){var t,n=this,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ox.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return K_("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return K_("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Tx(t);Nx(r,n)>0&&(n=r)})),new Cx(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Hx=function(){function e(t,n){var r=this;O(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return M(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Gx(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qx(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Hx.at=-1;var $x=function(){function e(t,n){O(this,e),this.comparator=t,this.root=n||Jx.EMPTY}return M(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jx.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jx.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Xx(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Xx(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Xx(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Xx(this.root,e,this.comparator,!0)}}]),e}(),Xx=function(){function e(t,n,r,i){O(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return M(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Jx=function(){function e(t,n,r,i,a){O(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return M(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Y_();if(this.right.isRed())throw Y_();var e=this.left.check();if(e!==this.right.check())throw Y_();return e+(this.isRed()?0:1)}}]),e}();Jx.EMPTY=null,Jx.RED=!0,Jx.BLACK=!1,Jx.EMPTY=new(function(){function e(){O(this,e),this.size=0}return M(e,[{key:"key",get:function(){throw Y_()}},{key:"value",get:function(){throw Y_()}},{key:"color",get:function(){throw Y_()}},{key:"left",get:function(){throw Y_()}},{key:"right",get:function(){throw Y_()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jx(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Zx=function(){function e(t){O(this,e),this.comparator=t,this.data=new $x(this.comparator)}return M(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new eI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new eI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),eI=function(){function e(t){O(this,e),this.iter=t}return M(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function tI(e){return e.hasNext()?e.getNext():void 0}var nI=function(){function e(t){O(this,e),this.fields=t,t.sort(kx.comparator)}return M(e,[{key:"unionWith",value:function(t){var n,r=new Zx(kx.comparator),i=dr(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=dr(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=dr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hx(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var rI=function(e){function t(e){O(this,t),this.binaryString=e}return M(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fx(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();rI.EMPTY_BYTE_STRING=new rI("");var iI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aI(e){if($_(!!e),"string"==typeof e){var t=0,n=iI.exec(e);if($_(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:oI(e.seconds),nanos:oI(e.nanos)}}function oI(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uI(e){return"string"==typeof e?rI.fromBase64String(e):rI.fromUint8Array(e)}function sI(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function cI(e){var t=e.mapValue.fields.__previous_value__;return sI(t)?cI(t):t}function lI(e){var t=aI(e.mapValue.fields.__local_write_time__.timestampValue);return new px(t.seconds,t.nanos)}var fI=M((function e(t,n,r,i,a,o,u,s){O(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),hI=function(){function e(t,n){O(this,e),this.projectId=t,this.database=n||"(default)"}return M(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function dI(e){return null==e}function pI(e){return 0===e&&1/e==-1/0}function vI(e){return"number"==typeof e&&Number.isInteger(e)&&!pI(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var yI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mI={nullValue:"NULL_VALUE"};function gI(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sI(e)?4:DI(e)?9007199254740991:10:Y_()}function kI(e,t){if(e===t)return!0;var n=gI(e);if(n!==gI(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return lI(e).isEqual(lI(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=aI(e.timestampValue),r=aI(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uI(e.bytesValue).isEqual(uI(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return oI(e.geoPointValue.latitude)===oI(t.geoPointValue.latitude)&&oI(e.geoPointValue.longitude)===oI(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return oI(e.integerValue)===oI(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=oI(e.doubleValue),r=oI(t.doubleValue);return n===r?pI(n)===pI(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hx(e.arrayValue.values||[],t.arrayValue.values||[],kI);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gx(n)!==Gx(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kI(n[i],r[i])))return!1;return!0}(e,t);default:return Y_()}}function wI(e,t){return void 0!==(e.values||[]).find((function(e){return kI(e,t)}))}function bI(e,t){if(e===t)return 0;var n=gI(e),r=gI(t);if(n!==r)return fx(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fx(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=oI(e.integerValue||e.doubleValue),r=oI(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _I(e.timestampValue,t.timestampValue);case 4:return _I(lI(e),lI(t));case 5:return fx(e.stringValue,t.stringValue);case 6:return function(e,t){var n=uI(e),r=uI(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fx(n[i],r[i]);if(0!==a)return a}return fx(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fx(oI(e.latitude),oI(t.latitude));return 0!==n?n:fx(oI(e.longitude),oI(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=bI(n[i],r[i]);if(a)return a}return fx(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yI.mapValue&&t===yI.mapValue)return 0;if(e===yI.mapValue)return 1;if(t===yI.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=fx(r[o],a[o]);if(0!==u)return u;var s=bI(n[r[o]],i[a[o]]);if(0!==s)return s}return fx(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Y_()}}function _I(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fx(e,t);var n=aI(e),r=aI(t),i=fx(n.seconds,r.seconds);return 0!==i?i:fx(n.nanos,r.nanos)}function xI(e){return II(e)}function II(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=aI(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?uI(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wx.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=dr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=II(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=dr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(II(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Y_();var t,n}function SI(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function EI(e){return!!e&&"integerValue"in e}function TI(e){return!!e&&"arrayValue"in e}function CI(e){return!!e&&"nullValue"in e}function NI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function PI(e){return!!e&&"mapValue"in e}function AI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qx(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=AI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=AI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function DI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function RI(e){return"nullValue"in e?mI:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?SI(hI.empty(),wx.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Y_()}function OI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?SI(hI.empty(),wx.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?yI:Y_()}function LI(e,t){var n=bI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function MI(e,t){var n=bI(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var FI=function(){function e(t){O(this,e),this.value=t}return M(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!PI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=AI(t)}},{key:"setAll",value:function(e){var t=this,n=kx.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=AI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());PI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return kI(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];PI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qx(t,(function(t,n){return e[t]=n}));var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(AI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function UI(e){var t=[];return Qx(e.fields,(function(e,n){var r=new kx([e]);if(PI(n)){var i=UI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=dr(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new nI(t)}var VI=function(){function e(t,n,r,i,a,o){O(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return M(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=FI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=FI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=vx.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vx.min(),vx.min(),FI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,vx.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,vx.min(),FI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,vx.min(),FI.empty(),2)}}]),e}(),jI=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;O(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function qI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new jI(e,t,n,r,i,a,o)}function BI(e){var t=X_(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+xI(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),dI(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return xI(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return xI(e)})).join(",")),t.ht=n}return t.ht}function zI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!aS(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!kI(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uS(e.startAt,t.startAt)&&uS(e.endAt,t.endAt)}function WI(e){return wx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function KI(e,t){return e.filters.filter((function(e){return e instanceof QI&&e.field.isEqual(t)}))}function HI(e,t,n){var r,i=mI,a=!0,o=dr(KI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=mI,c=!0;switch(u.op){case"<":case"<=":s=RI(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=mI}LI({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];LI({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function GI(e,t,n){var r,i=yI,a=!0,o=dr(KI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yI,c=!0;switch(u.op){case">=":case">":s=OI(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=yI}MI({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];MI({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var QI=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(bI(t,this.value)):null!==t&&gI(this.value)===gI(t)&&this.ft(bI(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Y_()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new YI(e,t,r):"array-contains"===t?new ZI(e,r):"in"===t?new eS(e,r):"not-in"===t?new tS(e,r):"array-contains-any"===t?new nS(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new $I(e,n):new XI(e,n)}}]),n}(function(){return M((function e(){O(this,e)}))}()),YI=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e,r,i)).key=wx.fromName(i.referenceValue),a}return M(n,[{key:"matches",value:function(e){var t=wx.comparator(e.key,this.key);return this.ft(t)}}]),n}(QI),$I=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,"in",r)).keys=JI("in",r),i}return M(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(QI),XI=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,"not-in",r)).keys=JI("not-in",r),i}return M(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(QI);function JI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wx.fromName(e.referenceValue)}))}var ZI=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"array-contains",r)}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return TI(t)&&wI(t.arrayValue,this.value)}}]),n}(QI),eS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"in",r)}return M(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&wI(this.value.arrayValue,t)}}]),n}(QI),tS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"not-in",r)}return M(n,[{key:"matches",value:function(e){if(wI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!wI(this.value.arrayValue,t)}}]),n}(QI),nS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"array-contains-any",r)}return M(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!TI(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return wI(t.value.arrayValue,e)}))}}]),n}(QI),rS=M((function e(t,n){O(this,e),this.position=t,this.inclusive=n})),iS=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";O(this,e),this.field=t,this.dir=n}));function aS(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function oS(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wx.comparator(wx.fromName(o.referenceValue),n.key):bI(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function uS(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!kI(e.position[n],t.position[n]))return!1;return!0}var sS=M((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;O(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function cS(e,t,n,r,i,a,o,u){return new sS(e,t,n,r,i,a,o,u)}function lS(e){return new sS(e)}function fS(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hS(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function dS(e){var t,n=dr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function pS(e){return null!==e.collectionGroup}function vS(e){var t=X_(e);if(null===t._t){t._t=[];var n=dS(t),r=hS(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new iS(n)),t._t.push(new iS(kx.keyField(),"asc"));else{var i,a=!1,o=dr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new iS(kx.keyField(),s))}}}return t._t}function yS(e){var t=X_(e);if(!t.wt)if("F"===t.limitType)t.wt=qI(t.path,t.collectionGroup,vS(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=dr(vS(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new iS(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new rS(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new rS(t.startAt.position,t.startAt.inclusive):null;t.wt=qI(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function mS(e,t,n){return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gS(e,t){return zI(yS(e),yS(t))&&e.limitType===t.limitType}function kS(e){return"".concat(BI(yS(e)),"|lt:").concat(e.limitType)}function wS(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(xI(t.value));var t})).join(", "),"]")),dI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return xI(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return xI(e)})).join(",")),"Target(".concat(t,")")}(yS(e)),"; limitType=").concat(e.limitType,")")}function bS(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wx.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=dr(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=dr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=oS(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vS(e),t))&&!(e.endAt&&!function(e,t,n){var r=oS(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vS(e),t))}(e,t)}function _S(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xS(e){return function(t,n){var r,i=!1,a=dr(vS(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=IS(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function IS(e,t,n){var r=e.field.isKeyField()?wx.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?bI(r,i):Y_()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Y_()}}function SS(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pI(t)?"-0":t}}function ES(e){return{integerValue:""+e}}function TS(e,t){return vI(t)?ES(t):SS(e,t)}var CS=M((function e(){O(this,e),this._=void 0}));function NS(e,t,n){return e instanceof DS?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof RS?OS(e,t):e instanceof LS?MS(e,t):function(e,t){var n=AS(e,t),r=US(n)+US(e.yt);return EI(n)&&EI(e.yt)?ES(r):SS(e.It,r)}(e,t)}function PS(e,t,n){return e instanceof RS?OS(e,t):e instanceof LS?MS(e,t):n}function AS(e,t){return e instanceof FS?EI(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var DS=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n)}(CS),RS=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).elements=e,r}return M(n)}(CS);function OS(e,t){var n,r=VS(t),i=dr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return kI(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var LS=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).elements=e,r}return M(n)}(CS);function MS(e,t){var n,r=VS(t),i=dr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!kI(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var FS=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).It=e,i.yt=r,i}return M(n)}(CS);function US(e){return oI(e.integerValue||e.doubleValue)}function VS(e){return TI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jS=M((function e(t,n){O(this,e),this.field=t,this.transform=n}));var qS=M((function e(t,n){O(this,e),this.version=t,this.transformResults=n})),BS=function(){function e(t,n){O(this,e),this.updateTime=t,this.exists=n}return M(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function zS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var WS=M((function e(){O(this,e)}));function KS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rE(e.key,BS.none()):new $S(e.key,e.data,BS.none());var n,r=e.data,i=FI.empty(),a=new Zx(kx.comparator),o=dr(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new XS(e.key,i,new nI(a.toArray()),BS.none())}function HS(e,t,n){e instanceof $S?function(e,t,n){var r=e.value.clone(),i=ZS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof XS?function(e,t,n){if(zS(e.precondition,t)){var r=ZS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(JS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function GS(e,t,n,r){return e instanceof $S?function(e,t,n,r){if(!zS(e.precondition,t))return n;var i=e.value.clone(),a=eE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof XS?function(e,t,n,r){if(!zS(e.precondition,t))return n;var i=eE(e.fieldTransforms,r,t),a=t.data;return a.setAll(JS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return zS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function QS(e,t){var n,r=null,i=dr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=AS(a.transform,o||null);null!=u&&(null===r&&(r=FI.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function YS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hx(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof RS&&t instanceof RS||e instanceof LS&&t instanceof LS?hx(e.elements,t.elements,kI):e instanceof FS&&t instanceof FS?kI(e.yt,t.yt):e instanceof DS&&t instanceof DS}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var $S=function(e){U(n,e);var t=W(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return O(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return M(n,[{key:"getFieldMask",value:function(){return null}}]),n}(WS),XS=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return O(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return M(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(WS);function JS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ZS(e,t,n){var r=new Map;$_(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,PS(o,u,n[i]))}return r}function eE(e,t,n){var r,i=new Map,a=dr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,NS(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var tE,nE,rE=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return M(n,[{key:"getFieldMask",value:function(){return null}}]),n}(WS),iE=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return M(n,[{key:"getFieldMask",value:function(){return null}}]),n}(WS),aE=M((function e(t){O(this,e),this.count=t}));function oE(e){switch(e){default:return Y_();case J_.CANCELLED:case J_.UNKNOWN:case J_.DEADLINE_EXCEEDED:case J_.RESOURCE_EXHAUSTED:case J_.INTERNAL:case J_.UNAVAILABLE:case J_.UNAUTHENTICATED:return!1;case J_.INVALID_ARGUMENT:case J_.NOT_FOUND:case J_.ALREADY_EXISTS:case J_.PERMISSION_DENIED:case J_.FAILED_PRECONDITION:case J_.ABORTED:case J_.OUT_OF_RANGE:case J_.UNIMPLEMENTED:case J_.DATA_LOSS:return!0}}function uE(e){if(void 0===e)return H_("GRPC error has no .code"),J_.UNKNOWN;switch(e){case tE.OK:return J_.OK;case tE.CANCELLED:return J_.CANCELLED;case tE.UNKNOWN:return J_.UNKNOWN;case tE.DEADLINE_EXCEEDED:return J_.DEADLINE_EXCEEDED;case tE.RESOURCE_EXHAUSTED:return J_.RESOURCE_EXHAUSTED;case tE.INTERNAL:return J_.INTERNAL;case tE.UNAVAILABLE:return J_.UNAVAILABLE;case tE.UNAUTHENTICATED:return J_.UNAUTHENTICATED;case tE.INVALID_ARGUMENT:return J_.INVALID_ARGUMENT;case tE.NOT_FOUND:return J_.NOT_FOUND;case tE.ALREADY_EXISTS:return J_.ALREADY_EXISTS;case tE.PERMISSION_DENIED:return J_.PERMISSION_DENIED;case tE.FAILED_PRECONDITION:return J_.FAILED_PRECONDITION;case tE.ABORTED:return J_.ABORTED;case tE.OUT_OF_RANGE:return J_.OUT_OF_RANGE;case tE.UNIMPLEMENTED:return J_.UNIMPLEMENTED;case tE.DATA_LOSS:return J_.DATA_LOSS;default:return Y_()}}(nE=tE||(tE={}))[nE.OK=0]="OK",nE[nE.CANCELLED=1]="CANCELLED",nE[nE.UNKNOWN=2]="UNKNOWN",nE[nE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nE[nE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nE[nE.NOT_FOUND=5]="NOT_FOUND",nE[nE.ALREADY_EXISTS=6]="ALREADY_EXISTS",nE[nE.PERMISSION_DENIED=7]="PERMISSION_DENIED",nE[nE.UNAUTHENTICATED=16]="UNAUTHENTICATED",nE[nE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nE[nE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nE[nE.ABORTED=10]="ABORTED",nE[nE.OUT_OF_RANGE=11]="OUT_OF_RANGE",nE[nE.UNIMPLEMENTED=12]="UNIMPLEMENTED",nE[nE.INTERNAL=13]="INTERNAL",nE[nE.UNAVAILABLE=14]="UNAVAILABLE",nE[nE.DATA_LOSS=15]="DATA_LOSS";var sE=function(){function e(t,n){O(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return M(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qx(this.inner,(function(t,n){var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Yx(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),cE=new $x(wx.comparator);function lE(){return cE}var fE=new $x(wx.comparator);function hE(){for(var e=fE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function dE(e){var t=fE;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function pE(){return yE()}function vE(){return yE()}function yE(){return new sE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var mE=new $x(wx.comparator),gE=new Zx(wx.comparator);function kE(){for(var e=gE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var wE=new Zx(fx);function bE(){return wE}var _E=function(){function e(t,n,r,i,a){O(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return M(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,xE.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(vx.min(),i,bE(),lE(),kE())}}]),e}(),xE=function(){function e(t,n,r,i,a){O(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return M(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,kE(),kE(),kE())}}]),e}(),IE=M((function e(t,n,r,i){O(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),SE=M((function e(t,n){O(this,e),this.targetId=t,this.At=n})),EE=M((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rI.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;O(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),TE=function(){function e(){O(this,e),this.Rt=0,this.bt=PE(),this.Pt=rI.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return M(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=kE(),t=kE(),n=kE();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Y_()}})),new xE(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=PE()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),CE=function(){function e(t){O(this,e),this.Bt=t,this.Lt=new Map,this.Ut=lE(),this.qt=NE(),this.Kt=new Zx(fx)}return M(e,[{key:"Gt",value:function(e){var t,n=dr(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=dr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Y_()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(WI(i))if(0===n){var a=new wx(i.path);this.jt(t,a,VI.newNoDocument(a,vx.min()))}else $_(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&WI(a.target)){var o=new wx(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,VI.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=kE();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new _E(e,n,this.Kt,this.Ut,r);return this.Ut=lE(),this.qt=NE(),this.Kt=new Zx(fx),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new TE,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Zx(fx),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||K_("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new TE),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function NE(){return new $x(wx.comparator)}function PE(){return new $x(wx.comparator)}var AE={asc:"ASCENDING",desc:"DESCENDING"},DE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RE=M((function e(t,n){O(this,e),this.databaseId=t,this.gt=n}));function OE(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function LE(e,t){return e.gt?t.toBase64():t.toUint8Array()}function ME(e,t){return OE(e,t.toTimestamp())}function FE(e){return $_(!!e),vx.fromTimestamp(function(e){var t=aI(e);return new px(t.seconds,t.nanos)}(e))}function UE(e,t){return function(e){return new mx(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function VE(e){var t=mx.fromString(e);return $_(sT(t)),t}function jE(e,t){return UE(e.databaseId,t.path)}function qE(e,t){var n=VE(t);if(n.get(1)!==e.databaseId.projectId)throw new Z_(J_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z_(J_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wx(KE(n))}function BE(e,t){return UE(e.databaseId,t)}function zE(e){var t=VE(e);return 4===t.length?mx.emptyPath():KE(t)}function WE(e){return new mx(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function KE(e){return $_(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function HE(e,t,n){return{name:jE(e,t),fields:n.value.mapValue.fields}}function GE(e,t,n){var r=qE(e,t.name),i=FE(t.updateTime),a=new FI({mapValue:{fields:t.fields}}),o=VI.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function QE(e,t){return"found"in t?function(e,t){$_(!!t.found),t.found.name,t.found.updateTime;var n=qE(e,t.found.name),r=FE(t.found.updateTime),i=new FI({mapValue:{fields:t.found.fields}});return VI.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){$_(!!t.missing),$_(!!t.readTime);var n=qE(e,t.missing),r=FE(t.readTime);return VI.newNoDocument(n,r)}(e,t):Y_()}function YE(e,t){var n;if(t instanceof $S)n={update:HE(e,t.key,t.value)};else if(t instanceof rE)n={delete:jE(e,t.key)};else if(t instanceof XS)n={update:HE(e,t.key,t.data),updateMask:uT(t.fieldMask)};else{if(!(t instanceof iE))return Y_();n={verify:jE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof DS)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof RS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof LS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof FS)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Y_()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ME(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Y_()}(e,t.precondition)),n}function $E(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?BS.updateTime(FE(e.updateTime)):void 0!==e.exists?BS.exists(e.exists):BS.none()}(t.currentDocument):BS.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)$_("REQUEST_TIME"===t.setToServerValue),n=new DS;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new RS(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new LS(i)}else"increment"in t?n=new FS(e,t.increment):Y_();var a=kx.fromServerFormat(t.fieldPath);return new jS(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=qE(e,t.update.name),a=new FI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new nI(t.map((function(e){return kx.fromServerFormat(e)})))}(t.updateMask);return new XS(i,a,o,n,r)}return new $S(i,a,n,r)}if(t.delete){var u=qE(e,t.delete);return new rE(u,n)}if(t.verify){var s=qE(e,t.verify);return new iE(s,n)}return Y_()}function XE(e,t){return{documents:[BE(e,t.path)]}}function JE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=BE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=BE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(NI(e.value))return{unaryFilter:{field:rT(e.field),op:"IS_NAN"}};if(CI(e.value))return{unaryFilter:{field:rT(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(NI(e.value))return{unaryFilter:{field:rT(e.field),op:"IS_NOT_NAN"}};if(CI(e.value))return{unaryFilter:{field:rT(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rT(e.field),op:nT(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:rT(e.field),direction:tT(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||dI(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ZE(e){var t=zE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$_(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=eT(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new iS(iT(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return dI(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new rS(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new rS(n,t)}(n.endAt)),cS(t,i,u,o,s,"F",c,l)}function eT(e){return e?void 0!==e.unaryFilter?[oT(e)]:void 0!==e.fieldFilter?[aT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return eT(e)})).reduce((function(e,t){return e.concat(t)})):Y_():[]}function tT(e){return AE[e]}function nT(e){return DE[e]}function rT(e){return{fieldPath:e.canonicalString()}}function iT(e){return kx.fromServerFormat(e.fieldPath)}function aT(e){return QI.create(iT(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y_()}}(e.fieldFilter.op),e.fieldFilter.value)}function oT(e){switch(e.unaryFilter.op){case"IS_NAN":var t=iT(e.unaryFilter.field);return QI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=iT(e.unaryFilter.field);return QI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=iT(e.unaryFilter.field);return QI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=iT(e.unaryFilter.field);return QI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Y_()}}function uT(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function sT(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function cT(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fT(t)),t=lT(e.get(n),t);return fT(t)}function lT(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fT(e){return e+"\x01\x01"}function hT(e){var t=e.length;if($_(t>=2),2===t)return $_("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),mx.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Y_(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Y_()}a=o+2}return new mx(r)}var dT=["userId","batchId"];function pT(e,t){return[e,cT(t)]}function vT(e,t,n){return[e,cT(t),n]}var yT={},mT=["prefixPath","collectionGroup","readTime","documentId"],gT=["prefixPath","collectionGroup","documentId"],kT=["collectionGroup","readTime","prefixPath","documentId"],wT=["canonicalId","targetId"],bT=["targetId","path"],_T=["path","targetId"],xT=["collectionId","parent"],IT=["indexId","uid"],ST=["uid","sequenceNumber"],ET=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TT=["indexId","uid","orderedDocumentKey"],CT=["userId","collectionPath","documentId"],NT=["userId","collectionPath","largestBatchId"],PT=["userId","collectionGroup","largestBatchId"],AT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),DT=[].concat(R(AT),["documentOverlays"]),RT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OT=RT,LT=[].concat(OT,["indexConfiguration","indexState","indexEntries"]),MT=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return M(n)}(Ax);function FT(e,t){var n=X_(e);return Mx.M(n.ie,t)}var UT=function(){function e(t,n,r,i){O(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return M(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&HS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=dr(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=GS(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=dr(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=GS(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=vE();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=KS(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(vx.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),kE())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hx(this.mutations,e.mutations,(function(e,t){return YS(e,t)}))&&hx(this.baseMutations,e.baseMutations,(function(e,t){return YS(e,t)}))}}]),e}(),VT=function(){function e(t,n,r,i){O(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return M(e,null,[{key:"from",value:function(t,n,r){$_(t.mutations.length===r.length);for(var i=mE,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),jT=function(){function e(t,n){O(this,e),this.largestBatchId=t,this.mutation=n}return M(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),qT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vx.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vx.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:rI.EMPTY_BYTE_STRING;O(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return M(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),BT=M((function e(t){O(this,e),this.re=t}));function zT(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:WT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:jE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:OE(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:KT(t.version)};else{if(!t.isUnknownDocument())return Y_();r.unknownDocument={path:n.path.toArray(),version:KT(t.version)}}return r}function WT(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function KT(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function HT(e){var t=new px(e.seconds,e.nanoseconds);return vx.fromTimestamp(t)}function GT(e,t){for(var n=(t.baseMutations||[]).map((function(t){return $E(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return $E(e.re,t)})),u=px.fromMillis(t.localWriteTimeMs);return new UT(t.batchId,u,n,o)}function QT(e){var t,n,r=HT(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?HT(e.lastLimboFreeSnapshotVersion):vx.min();return void 0!==e.query.documents?($_(1===(n=e.query).documents.length),t=yS(lS(zE(n.documents[0])))):t=function(e){return yS(ZE(e))}(e.query),new qT(t,e.targetId,0,e.lastListenSequenceNumber,r,i,rI.fromBase64String(e.resumeToken))}function YT(e,t){var n,r=KT(t.snapshotVersion),i=KT(t.lastLimboFreeSnapshotVersion);n=WI(t.target)?XE(e.re,t.target):JE(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:BI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function $T(e){var t=ZE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mS(t,t.limit,"L"):t}function XT(e,t){return new jT(t.largestBatchId,$E(e.re,t.overlayMutation))}function JT(e,t){var n=t.path.lastSegment();return[e,cT(t.path.popLast()),n]}function ZT(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:KT(r.readTime),documentKey:cT(r.documentKey.path),largestBatchId:r.largestBatchId}}var eC=function(){function e(){O(this,e)}return M(e,[{key:"getBundleMetadata",value:function(e,t){return tC(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:HT(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return tC(e).put({bundleId:(n=t).id,createTime:KT(FE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return nC(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:$T(t.bundledQuery),readTime:HT(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return nC(e).put(function(e){return{name:e.name,readTime:KT(FE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function tC(e){return FT(e,"bundles")}function nC(e){return FT(e,"namedQueries")}var rC=function(){function e(t,n){O(this,e),this.It=t,this.userId=n}return M(e,[{key:"getOverlay",value:function(e,t){var n=this;return iC(e).get(JT(this.userId,t)).next((function(e){return e?XT(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=pE();return Ox.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new jT(t,a);i.push(r.ue(e,o))})),Ox.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cT(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(iC(e).Y("collectionPathOverlayIndex",i))})),Ox.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=pE(),a=cT(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return iC(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=dr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=XT(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=pE(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return iC(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=XT(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return iC(e).put(function(e,t,n){var r=c(JT(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:YE(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function iC(e){return FT(e,"documentOverlays")}var aC=function(){function e(){O(this,e)}return M(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(oI(e.integerValue));else if("doubleValue"in e){var n=oI(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),pI(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(uI(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?DI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Y_()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),wx.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function oC(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function uC(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=oC(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}aC.Te=new aC;var sC=function(){function e(){O(this,e),this.buffer=new Uint8Array(1024),this.position=0}return M(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=uC(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=uC(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),cC=function(){function e(t){O(this,e),this.Be=t}return M(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),lC=function(){function e(t){O(this,e),this.Be=t}return M(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),fC=function(){function e(){O(this,e),this.Be=new sC,this.Le=new cC(this.Be),this.Ue=new lC(this.Be)}return M(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),hC=function(){function e(t,n,r,i){O(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return M(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function dC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=pC(e.arrayValue,t.arrayValue))?n:0!==(n=pC(e.directionalValue,t.directionalValue))?n:wx.comparator(e.documentKey,t.documentKey)}function pC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vC=function(){function e(t){O(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=dr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return M(e,[{key:"We",value:function(e){var t=_x(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=xx(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=dr(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),yC=function(){function e(){O(this,e),this.Ye=new mC}return M(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Ox.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ox.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ox.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ox.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ox.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ox.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ox.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ox.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ox.resolve(Cx.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ox.resolve(Cx.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ox.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ox.resolve()}}]),e}(),mC=function(){function e(){O(this,e),this.index={}}return M(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zx(mx.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Zx(mx.comparator)).toArray()}}]),e}(),gC=new Uint8Array(0),kC=function(){function e(t,n){O(this,e),this.user=t,this.databaseId=n,this.Xe=new mC,this.Ze=new sE((function(e){return BI(e)}),(function(e,t){return zI(e,t)})),this.uid=t.uid||""}return M(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:cT(i)};return wC(e).put(a)}return Ox.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[dx(t),""],!1,!0);return wC(e).W(r).next((function(e){var r,i=dr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=_C(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=xC(e);return a.next((function(e){o.put(ZT(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=_C(e),r=xC(e),i=bC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=bC(e),i=!0,a=new Map;return Ox.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=kE(),o=[];return Ox.forEach(a,(function(i,a){var u;K_("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(BI(t)));var s=function(e,t){var n=_x(t);if(void 0===n)return null;var r,i=dr(KI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=dr(xx(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=dr(KI(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=dr(xx(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?HI(e,o.fieldPath,e.startAt):GI(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new rS(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=dr(xx(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?GI(e,o.fieldPath,e.endAt):HI(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new rS(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Ox.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=wx.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ox.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):gC,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,R(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new hC(e,wx.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new hC(e,wx.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new vC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=dr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Ox.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Zx(kx.comparator),r=!1,i=dr(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=dr(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new fC,i=dr(xx(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);aC.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new fC;return aC.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new fC;return aC.Te.ce(SI(this.databaseId,t),n.qe(function(e){var t=xx(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new fC);var i,a=0,o=dr(xx(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=dr(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&TI(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);aC.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=R(e),a=[],o=dr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=dr(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new fC;f.seed(l.$e()),aC.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof QI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=_C(e),i=xC(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Ox.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Sx(t.sequenceNumber,new Cx(HT(t.readTime),new wx(hT(t.documentKey)),t.largestBatchId)):Sx.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Ix(kx.fromServerFormat(n),r)}));return new bx(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fx(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=_C(e),a=xC(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ox.forEach(t,(function(t){return a.put(ZT(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ox.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ox.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ox.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Ox.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return bC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return bC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=bC(e),i=new Zx(dC);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new hC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Zx(dC),r=this.an(t,e);if(null==r)return n;var i=_x(t);if(null!=i){var a=e.data.field(i.fieldPath);if(TI(a)){var o,u=dr(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new hC(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new hC(t.indexId,e.key,gC,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;K_("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=tI(a),s=tI(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=tI(o)):l?(i(u),u=tI(a)):(u=tI(a),s=tI(o))}}(r,i,dC,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Ox.waitFor(o)}},{key:"_n",value:function(e){var t=1;return xC(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return dC(e,t)})).filter((function(e,t,n){return!t||0!==dC(e,n[t-1])}));var r=[];r.push(e);var i,a=dr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=dC(o,e),s=dC(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,gC,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,gC,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(IC)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ox.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Y_()}))})).next(IC)}}]),e}();function wC(e){return FT(e,"collectionParents")}function bC(e){return FT(e,"indexEntries")}function _C(e){return FT(e,"indexConfiguration")}function xC(e){return FT(e,"indexState")}function IC(e){$_(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Nx(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Cx(t.readTime,t.documentKey,n)}var SC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EC=function(){function e(t,n,r){O(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return M(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function TC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){$_(1===u)})));var c,l=[],f=dr(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=vT(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ox.waitFor(a).next((function(){return l}))}function CC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Y_();t=e.noDocument}return JSON.stringify(t).length}EC.DEFAULT_COLLECTION_PERCENTILE=10,EC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,EC.DEFAULT=new EC(41943040,EC.DEFAULT_COLLECTION_PERCENTILE,EC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),EC.DISABLED=new EC(-1,0,0);var NC=function(){function e(t,n,r,i){O(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return M(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return AC(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=DC(e),o=AC(e);return o.add({}).next((function(u){$_("number"==typeof u);var s,c=new UT(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return YE(e.re,t)})),i=n.mutations.map((function(t){return YE(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new Zx((function(e,t){return fx(e.canonicalString(),t.canonicalString())})),d=dr(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=vT(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,yT))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Ox.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return AC(e).get(t).next((function(e){return e?($_(e.userId===n.userId),GT(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Ox.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return AC(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&($_(t.batchId>=r),a=GT(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return AC(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return AC(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return GT(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=pT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return DC(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=hT(l);if(s===n.userId&&t.path.isEqual(h))return AC(e).get(f).next((function(e){if(!e)throw Y_();$_(e.userId===n.userId),a.push(GT(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zx(fx),i=[];return t.forEach((function(t){var a=pT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=DC(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=hT(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Ox.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=pT(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Zx(fx);return DC(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=hT(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(AC(e).get(t).next((function(e){if(null===e)throw Y_();$_(e.userId===n.userId),r.push(GT(n.It,e))})))})),Ox.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return TC(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Ox.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ox.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return DC(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hT(e[1]);i.push(a)}else r.done()})).next((function(){$_(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return PC(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return RC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return $_(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function PC(e,t,n){var r=pT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return DC(e).Z({range:a,X:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function AC(e){return FT(e,"mutations")}function DC(e){return FT(e,"documentMutations")}function RC(e){return FT(e,"mutationQueues")}var OC=function(){function e(t){O(this,e),this.bn=t}return M(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),LC=function(){function e(t,n){O(this,e),this.referenceDelegate=t,this.It=n}return M(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new OC(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return vx.fromTimestamp(new px(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return MC(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return $_(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return MC(e).Z((function(o,u){var s=QT(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ox.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return MC(e).Z((function(e,n){var r=QT(n);t(r)}))}},{key:"Vn",value:function(e){return FC(e).get("targetGlobalKey").next((function(e){return $_(null!==e),e}))}},{key:"Sn",value:function(e,t){return FC(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return MC(e).put(YT(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=BI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return MC(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=QT(n);zI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=UC(e);return t.forEach((function(t){var o=cT(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ox.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=UC(e);return Ox.forEach(t,(function(t){var a=cT(t.path);return Ox.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=UC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=UC(e),i=kE();return r.Z({range:n,X:!0},(function(e,t,n){var r=hT(e[1]),a=new wx(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cT(t.path),r=IDBKeyRange.bound([n],[dx(n)],!1,!0),i=0;return UC(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return MC(e).get(t).next((function(e){return e?QT(e):null}))}}]),e}();function MC(e){return FT(e,"targets")}function FC(e){return FT(e,"targetGlobal")}function UC(e){return FT(e,"targetDocuments")}function VC(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=fx(r,o);return 0===s?fx(i,u):s}var jC=function(){function e(t){O(this,e),this.xn=t,this.buffer=new Zx(VC),this.Nn=0}return M(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();VC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),qC=function(){function e(t,n,r){O(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return M(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;K_("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Vx(e.t0)){e.next=12;break}K_("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Dx(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),BC=function(){function e(t,n){O(this,e),this.$n=t,this.params=n}return M(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ox.resolve(Hx.at);var r=new jC(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(K_("LruGarbageCollector","Garbage collection skipped; disabled"),Ox.resolve(SC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(K_("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),SC):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(K_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),W_()<=hi.DEBUG&&K_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ox.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),zC=function(){function e(t,n){O(this,e),this.db=t,this.garbageCollector=function(e,t){return new BC(e,t)}(this,n)}return M(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return WC(e,n)}},{key:"removeReference",value:function(e,t,n){return WC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return WC(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return RC(e).tt((function(r){return PC(e,r,t).next((function(e){return e&&(n=!0),Ox.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,vx.min()),UC(e).delete([0,cT(o.path)])}))}));i.push(s)}})).next((function(){return Ox.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return WC(e,t)}},{key:"Kn",value:function(e,t){var n,r=UC(e),i=Hx.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Hx.at&&t(new wx(hT(n)),i),i=s,n=u):i=Hx.at})).next((function(){i!==Hx.at&&t(new wx(hT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function WC(e,t){return UC(e).put(function(e,t){return{targetId:0,path:cT(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var KC=function(){function e(){O(this,e),this.changes=new sE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return M(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,VI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ox.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),HC=function(){function e(t){O(this,e),this.It=t}return M(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return $C(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return $C(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],WT(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=VI.newInvalidDocument(t);return $C(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(XC(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:VI.newInvalidDocument(t)};return $C(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(XC(t))},(function(e,i){r={document:n.jn(t,i),size:CC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=lE();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=lE(),i=new $x(wx.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,CC(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Ox.resolve();var r=new Zx(ZC);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(XC(r.first()),XC(r.last())),a=r.getIterator(),o=a.getNext();return $C(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=wx.fromSegments([].concat(R(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ZC(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(XC(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),WT(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $C(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=lE(),i=dr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(wx.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=lE(),o=JC(t,n),u=JC(t,Cx.max());return $C(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(wx.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new QC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return YC(e).get("remoteDocumentGlobalKey").next((function(e){return $_(!!e),e}))}},{key:"Qn",value:function(e,t){return YC(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=GE(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=wx.fromSegments(t.noDocument.path),i=HT(t.noDocument.readTime);n=VI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Y_();var a=wx.fromSegments(t.unknownDocument.path),o=HT(t.unknownDocument.version);n=VI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new px(e[0],e[1]);return vx.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(vx.min()))return n}return VI.newInvalidDocument(e)}}]),e}();function GC(e){return new HC(e)}var QC=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new sE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return M(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Zx((function(e,t){return fx(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=zT(t.Yn.It,o);i=i.add(a.path.popLast());var c=CC(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=zT(t.Yn.It,o.convertToNoDocument(vx.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Ox.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(KC);function YC(e){return FT(e,"remoteDocumentGlobal")}function $C(e){return FT(e,"remoteDocumentsV14")}function XC(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function JC(e,t){var n=t.documentKey.path.toArray();return[e,WT(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ZC(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=fx(n[a],r[a]))return i;return(i=fx(n.length,r.length))||((i=fx(n[n.length-2],r[r.length-2]))||fx(n[n.length-1],r[r.length-1]))}var eN=M((function e(t,n){O(this,e),this.overlayedDocument=t,this.mutatedFields=n})),tN=function(){function e(t,n,r,i){O(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return M(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&GS(r.mutation,e,nI.empty(),px.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,kE()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kE(),i=pE();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=hE();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=pE();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,kE())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=lE(),a=yE(),o=yE();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof XS)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),GS(o.mutation,t,o.mutation.getFieldMask(),px.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new eN(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=yE(),i=new $x((function(e,t){return e-t})),a=kE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=dr(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||nI.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||kE()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=vE();c.forEach((function(e){if(!a.has(e)){var n=KS(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ox.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return wx.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ox.resolve(pE()),u=-1,s=a;return o.next((function(t){return Ox.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ox.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,kE())})).next((function(e){return{batchId:u,changes:dE(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new wx(t)).next((function(e){var t=hE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=hE();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ox.forEach(o,(function(o){var u=function(e,t){return new sS(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,VI.newInvalidDocument(n)))}));var n=hE();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&GS(a.mutation,i,nI.empty(),px.now()),bS(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ox.resolve(VI.newInvalidDocument(t))}}]),e}(),nN=function(){function e(t){O(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return M(e,[{key:"getBundleMetadata",value:function(e,t){return Ox.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:FE(n.createTime)}),Ox.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ox.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:$T(e.bundledQuery),readTime:FE(e.readTime)}}(t)),Ox.resolve()}}]),e}(),rN=function(){function e(){O(this,e),this.overlays=new $x(wx.comparator),this.es=new Map}return M(e,[{key:"getOverlay",value:function(e,t){return Ox.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=pE();return Ox.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Ox.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Ox.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=pE(),i=t.length+1,a=new wx(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ox.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new $x((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=pE(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=pE(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ox.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new jT(t,n));var a=this.es.get(t);void 0===a&&(a=kE(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),iN=function(){function e(){O(this,e),this.ns=new Zx(aN.ss),this.rs=new Zx(aN.os)}return M(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new aN(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new aN(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new wx(new mx([])),r=new aN(n,e),i=new aN(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new wx(new mx([])),n=new aN(t,e),r=new aN(t,e+1),i=kE();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new aN(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),aN=function(){function e(t,n){O(this,e),this.key=t,this._s=n}return M(e,null,[{key:"ss",value:function(e,t){return wx.comparator(e.key,t.key)||fx(e._s,t._s)}},{key:"os",value:function(e,t){return fx(e._s,t._s)||wx.comparator(e.key,t.key)}}]),e}(),oN=function(){function e(t,n){O(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Zx(aN.ss)}return M(e,[{key:"checkEmpty",value:function(e){return Ox.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new UT(i,t,n,r);this.mutationQueue.push(a);var o,u=dr(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new aN(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ox.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ox.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Ox.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ox.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Ox.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new aN(t,0),i=new aN(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Ox.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Zx(fx);return t.forEach((function(e){var t=new aN(e,0),i=new aN(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Ox.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wx.isDocumentKey(i)||(i=i.child(""));var a=new aN(new wx(i),0),o=new Zx(fx);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Ox.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$_(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Ox.forEach(t.mutations,(function(i){var a=new aN(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new aN(t,0),r=this.gs.firstAfterOrEqual(n);return Ox.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ox.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),uN=function(){function e(t){O(this,e),this.Es=t,this.docs=new $x(wx.comparator),this.size=0}return M(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ox.resolve(n?n.document.mutableCopy():VI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=lE();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():VI.newInvalidDocument(e))})),Ox.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=lE(),i=new wx(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Nx(Tx(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ox.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Y_()}},{key:"As",value:function(e,t){return Ox.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new sN(this)}},{key:"getSize",value:function(e){return Ox.resolve(this.size)}}]),e}(),sN=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).Yn=e,r}return M(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Ox.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(KC),cN=function(){function e(t){O(this,e),this.persistence=t,this.Rs=new sE((function(e){return BI(e)}),zI),this.lastRemoteSnapshotVersion=vx.min(),this.highestTargetId=0,this.bs=0,this.Ps=new iN,this.targetCount=0,this.vs=OC.Pn()}return M(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Ox.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ox.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ox.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Ox.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Ox.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new OC(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Ox.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Ox.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ox.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ox.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ox.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Ox.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Ox.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ox.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Ox.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Ox.resolve(n)}},{key:"containsKey",value:function(e,t){return Ox.resolve(this.Ps.containsKey(t))}}]),e}(),lN=function(){function e(t,n){var r=this;O(this,e),this.Vs={},this.overlays={},this.Ss=new Hx(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new cN(this),this.indexManager=new yC,this.remoteDocumentCache=new uN((function(e){return r.referenceDelegate.xs(e)})),this.It=new BT(n),this.Ns=new nN(this.It)}return M(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new rN,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new oN(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;K_("MemoryPersistence","Starting transaction:",e);var i=new fN(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Ox.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),fN=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return M(n)}(Ax),hN=function(){function e(t){O(this,e),this.persistence=t,this.Fs=new iN,this.$s=null}return M(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Y_()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Ox.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Ox.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Ox.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ox.forEach(this.Ls,(function(r){var i=wx.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,vx.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Ox.or([function(){return Ox.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),dN=function(){function e(t){O(this,e),this.It=t}return M(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Lx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dT,{unique:!0}),e.createObjectStore("documentMutations")}(e),pN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ox.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),pN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vx.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dT,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ox.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:CT});t.createIndex("collectionPathOverlayIndex",NT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",PT,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:mT});t.createIndex("documentKeyIndex",gT),t.createIndex("collectionGroupIndex",kT)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:IT}).createIndex("sequenceNumberIndex",ST,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ET}).createIndex("documentKeyIndex",TT,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=CC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Ox.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Ox.forEach(r,(function(r){$_(r.userId===n.userId);var i=GT(t.It,r);return TC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new mx(n),o=function(e){return[0,cT(e)]}(a);r.push(t.get(o).next((function(n){return n?Ox.resolve():function(n){return t.put({targetId:0,path:cT(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ox.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:xT});var n=t.store("collectionParents"),r=new mC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cT(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new mx(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],hT(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=QT(r),a=YT(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new wx(mx.fromString(i.document.name).popFirst(5)):i.noDocument?wx.fromSegments(i.noDocument.path):i.unknownDocument?wx.fromSegments(i.unknownDocument.path):Y_()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ox.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=GC(this.It),a=new lN(hN.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:kE();GT(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ox.forEach(r,(function(e,r){var o=new q_(r),u=rC.oe(n.It,o),s=a.getIndexManager(o),c=NC.oe(o,n.It,s,a.referenceDelegate);return new tN(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new MT(t,Hx.at),e).next()}))}))}}]),e}();function pN(e){e.createObjectStore("targetDocuments",{keyPath:bT}).createIndex("documentTargetsIndex",_T,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wT,{unique:!0}),e.createObjectStore("targetGlobal")}var vN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yN=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(O(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Z_(J_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zC(this,i),this.ii=n+"main",this.It=new BT(s),this.ri=new Mx(this.ii,this.Xs,new dN(this.It)),this.Cs=new LC(this.referenceDelegate,this.It),this.remoteDocumentCache=GC(this.It),this.Ns=new eC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&H_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return M(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Z_(J_.FAILED_PRECONDITION,vN);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Hx(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=hr(lr().mark((function n(r){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Vx(t))return K_("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return K_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return mN(e).get("owner").next((function(e){return Ox.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return gN(e).delete(this.clientId)}},{key:"yi",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=FT(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ox.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=dr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Ox.resolve(!0):mN(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Z_(J_.FAILED_PRECONDITION,vN);return!1}}return!(!t.networkEnabled||!t.inForeground)||gN(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&K_("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new MT(e,Hx.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gN(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return NC.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new kC(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return rC.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;K_("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?LT:14===i?OT:13===i?RT:12===i?DT:11===i?AT:void Y_();return this.ri.runTransaction(e,o,u,(function(i){return a=new MT(i,r.Ss?r.Ss.next():Hx.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw H_("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Z_(J_.FAILED_PRECONDITION,Px);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return mN(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Z_(J_.FAILED_PRECONDITION,vN)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mN(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=mN(e);return n.get("owner").next((function(e){return t.mi(e)?(K_("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ox.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(H_("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!Tr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return K_("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return H_("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(at){H_("Failed to set zombie client id.",at)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(at){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Mx.C()}}]),e}();function mN(e){return FT(e,"owner")}function gN(e){return FT(e,"clientMetadata")}function kN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var wN=function(){function e(t,n,r,i){O(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return M(e,null,[{key:"Ci",value:function(t,n){var r,i=kE(),a=kE(),o=dr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bN=function(){function e(){O(this,e),this.xi=!1}return M(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(fS(t))return Ox.resolve(null);var r=yS(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=mS(t,null,"F"),r=yS(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=kE.apply(void 0,R(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,mS(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return fS(t)||r.isEqual(vx.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(W_()<=hi.DEBUG&&K_("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wS(t)),i.Bi(e,o,t,Ex(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Zx(xS(e));return t.forEach((function(t,r){bS(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return W_()<=hi.DEBUG&&K_("QueryEngine","Using full collection scan to execute query:",wS(t)),this.Ni.getDocumentsMatchingQuery(e,t,Cx.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),_N=function(){function e(t,n,r,i){O(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new $x(fx),this.qi=new sE((function(e){return BI(e)}),zI),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return M(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tN(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function xN(e,t,n,r){return new _N(e,t,n,r)}function IN(e,t){return SN.apply(this,arguments)}function SN(){return SN=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=kE(),s=dr(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=dr(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=dr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=dr(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),SN.apply(this,arguments)}function EN(e,t){var n=X_(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ox.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$_(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=kE(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function TN(e){var t=X_(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function CN(e,t){var n=X_(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(rI.EMPTY_BYTE_STRING,vx.min()).withLastLimboFreeSnapshotVersion(vx.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=lE(),s=kE();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(NN(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(vx.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ox.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function NN(e,t,n){var r=kE(),i=kE();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=lE();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(vx.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):K_("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function PN(e,t){var n=X_(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function AN(e,t){var n=X_(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Ox.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new qT(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function DN(e,t,n){return RN.apply(this,arguments)}function RN(){return RN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=X_(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Vx(e.t1)){e.next=12;break}throw e.t1;case 12:K_("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),RN.apply(this,arguments)}function ON(e,t,n){var r=X_(e),i=vx.min(),a=kE();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=X_(e),i=r.qi.get(n);return void 0!==i?Ox.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,yS(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:vx.min(),n?a:kE())})).next((function(e){return FN(r,_S(t),e),{documents:e,Hi:a}}))}))}function LN(e,t){var n=X_(e),r=X_(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function MN(e,t){var n=X_(e),r=n.Ki.get(t)||vx.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,Ex(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return FN(n,t,e),e}))}function FN(e,t,n){var r=e.Ki.get(t)||vx.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function UN(e,t,n,r){return VN.apply(this,arguments)}function VN(){return VN=hr(lr().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=X_(t),o=kE(),u=lE(),s=dr(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,AN(a,function(e){return yS(lS(mx.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return NN(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),VN.apply(this,arguments)}function jN(e,t){return qN.apply(this,arguments)}function qN(){return qN=hr(lr().mark((function e(t,n){var r,i,a,o=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:kE(),e.next=3,AN(t,yS($T(n.bundledQuery)));case 3:return i=e.sent,a=X_(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=FE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(rI.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),qN.apply(this,arguments)}function BN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function WN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var KN=function(){function e(t,n,r,i){O(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return M(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Z_(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(H_("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),HN=function(){function e(t,n,r){O(this,e),this.targetId=t,this.state=n,this.error=r}return M(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Z_(i.error.code,i.error.message))),a?new e(t,i.state,r):(H_("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),GN=function(){function e(t,n){O(this,e),this.clientId=t,this.activeTargetIds=n}return M(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=bE(),o=0;i&&o<r.activeTargetIds.length;++o)i=vI(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(H_("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),QN=function(){function e(t,n){O(this,e),this.clientId=t,this.onlineState=n}return M(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(H_("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),YN=function(){function e(){O(this,e),this.activeTargetIds=bE()}return M(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),$N=function(){function e(t,n,r,i,a){O(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $x(fx),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=BN(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new YN),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return M(e,[{key:"start",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=dr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(BN(this.persistenceKey,i)))&&(o=GN.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=dr(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(WN(this.persistenceKey,e));if(n){var r=HN.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(WN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return K_("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){K_("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){K_("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(K_("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void H_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(hr(lr().mark((function e(){var r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Hx.at;if(null!=e)try{var n=JSON.parse(e);$_("number"==typeof n),t=n}catch(e){H_("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Hx.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new KN(this.currentUser,e,t,n),i=zN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=zN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=WN(this.persistenceKey,e),i=new HN(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return GN.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return KN.Zi(new q_(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return HN.Zi(r,t)}},{key:"yr",value:function(e){return QN.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:K_("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=bE();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),XN=function(){function e(){O(this,e),this.Lr=new YN,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return M(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new YN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),JN=function(){function e(){O(this,e)}return M(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ZN=function(){function e(){var t=this;O(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return M(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){K_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=dr(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){K_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=dr(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),eP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},tP=function(){function e(t){O(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return M(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),nP=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return M(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new V_;o.setWithCredentials(!0),o.listenOnce(O_.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case R_.NO_ERROR:var t=o.getResponseJson();K_("Connection","XHR received:",JSON.stringify(t)),i(t);break;case R_.TIMEOUT:K_("Connection",'RPC "'+e+'" timed out'),a(new Z_(J_.DEADLINE_EXCEEDED,"Request time out"));break;case R_.HTTP_ERROR:var n=o.getStatus();if(K_("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(J_).indexOf(t)>=0?t:J_.UNKNOWN}(r.status);a(new Z_(u,r.message))}else a(new Z_(J_.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Z_(J_.UNAVAILABLE,"Connection failed."));break;default:Y_()}}finally{K_("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=A_(),a=D_(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new F_({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");K_("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new tP({Hr:function(e){l?K_("Connection","Not sending because WebChannel is closed:",e):(c||(K_("Connection","Opening WebChannel transport."),s.open(),c=!0),K_("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,U_.EventType.OPEN,(function(){l||K_("Connection","WebChannel transport opened.")})),h(s,U_.EventType.CLOSE,(function(){l||(l=!0,K_("Connection","WebChannel transport closed"),f.io())})),h(s,U_.EventType.ERROR,(function(e){l||(l=!0,G_("Connection","WebChannel transport errored:",e),f.io(new Z_(J_.UNAVAILABLE,"The operation could not be completed")))})),h(s,U_.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];$_(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){K_("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=tE[e];if(void 0!==t)return uE(t)}(a),u=i.message;void 0===o&&(o=J_.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Z_(o,u)),s.close()}else K_("Connection","WebChannel received:",n),f.ro(n)}})),h(a,L_.STAT_EVENT,(function(e){e.stat===M_.PROXY?K_("Connection","Detected buffering proxy"):e.stat===M_.NOPROXY&&K_("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){O(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return M(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);K_("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return K_("RestConnection","Received: ",e),e}),(function(t){throw G_("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+B_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=eP[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function rP(){return"undefined"!=typeof window?window:null}function iP(){return"undefined"!=typeof document?document:null}function aP(e){return new RE(e,!0)}var oP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;O(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return M(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&K_("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),uP=function(){function e(t,n,r,i,a,o,u,s){O(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new oP(t,n)}return M(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===J_.RESOURCE_EXHAUSTED?(H_(n.toString()),H_("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===J_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Z_(J_.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return K_("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(K_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),sP=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return M(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Y_()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?($_(void 0===t||"string"==typeof t),rI.fromBase64String(t||"")):($_(void 0===t||t instanceof Uint8Array),rI.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?J_.UNKNOWN:uE(e.code);return new Z_(t,e.message||"")}(o);n=new EE(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=qE(e,s.document.name),l=FE(s.document.updateTime),f=new FI({mapValue:{fields:s.document.fields}}),h=VI.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new IE(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=qE(e,v.document),m=v.readTime?FE(v.readTime):vx.min(),g=VI.newNoDocument(y,m),k=v.removedTargetIds||[];n=new IE([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=qE(e,w.document),_=w.removedTargetIds||[];n=new IE([],_,b,null)}else{if(!("filter"in t))return Y_();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new aE(I),E=x.targetId;n=new SE(E,S)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return vx.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vx.min():t.readTime?FE(t.readTime):vx.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=WE(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=WI(r)?{documents:XE(e,r)}:{query:JE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=LE(e,t.resumeToken):t.snapshotVersion.compareTo(vx.min())>0&&(n.readTime=OE(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Y_()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=WE(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(uP),cP=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return M(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,If(V(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if($_(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?($_(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?FE(e.updateTime):FE(t);return n.isEqual(vx.min())&&(n=FE(t)),new qS(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=FE(e.commitTime);return this.listener.Zo(n,t)}return $_(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=WE(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return YE(t.It,e)}))};this.Bo(n)}}]),n}(uP),lP=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return M(n,[{key:"su",value:function(){if(this.nu)throw new Z_(J_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===J_.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Z_(J_.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===J_.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Z_(J_.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return M((function e(){O(this,e)}))}());var fP=function(){function e(t,n){O(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return M(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(H_(t),this.ou=!1):K_("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),hP=M((function e(t,n,r,i,a){var o=this;O(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xP(o),!e.t0){e.next=5;break}return K_("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=X_(t))._u.add(4),e.next=4,vP(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,dP(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new fP(r,i)}));function dP(e){return pP.apply(this,arguments)}function pP(){return pP=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xP(t)){e.next=18;break}n=dr(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),pP.apply(this,arguments)}function vP(e){return yP.apply(this,arguments)}function yP(){return yP=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=dr(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),yP.apply(this,arguments)}function mP(e,t){var n=X_(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),_P(n)?bP(n):JP(n).ko()&&kP(n,t))}function gP(e,t){var n=X_(e),r=JP(n);n.du.delete(t),r.ko()&&wP(n,t),0===n.du.size&&(r.ko()?r.Fo():xP(n)&&n.gu.set("Unknown"))}function kP(e,t){e.yu.Mt(t.targetId),JP(e).zo(t)}function wP(e,t){e.yu.Mt(t),JP(e).Ho(t)}function bP(e){e.yu=new CE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),JP(e).start(),e.gu.uu()}function _P(e){return xP(e)&&!JP(e).No()&&e.du.size>0}function xP(e){return 0===X_(e)._u.size}function IP(e){e.yu=void 0}function SP(e){return EP.apply(this,arguments)}function EP(){return EP=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){kP(t,e)}));case 1:case"end":return e.stop()}}),e)}))),EP.apply(this,arguments)}function TP(e,t){return CP.apply(this,arguments)}function CP(){return CP=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:IP(t),_P(t)?(t.gu.hu(n),bP(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),CP.apply(this,arguments)}function NP(e,t,n){return PP.apply(this,arguments)}function PP(){return PP=hr(lr().mark((function e(t,n,r){var i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof EE&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=dr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),K_("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,AP(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof IE?t.yu.Gt(n):n instanceof SE?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(vx.min())){e.next=29;break}return e.prev=14,e.next=17,TN(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(rI.EMPTY_BYTE_STRING,n.snapshotVersion)),wP(e,t);var r=new qT(n.target,t,1,n.sequenceNumber);kP(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),K_("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,AP(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),PP.apply(this,arguments)}function AP(e,t,n){return DP.apply(this,arguments)}function DP(){return DP=hr(lr().mark((function e(t,n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vx(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,vP(t);case 5:t.gu.set("Offline"),r||(r=function(){return TN(t.localStore)}),t.asyncQueue.enqueueRetryable(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K_("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,dP(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),DP.apply(this,arguments)}function RP(e,t){return t().catch((function(n){return AP(e,n,t)}))}function OP(e){return LP.apply(this,arguments)}function LP(){return LP=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=X_(t),r=ZP(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!MP(n)){e.next=19;break}return e.prev=3,e.next=6,PN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,FP(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,AP(n,e.t0);case 17:e.next=2;break;case 19:UP(n)&&VP(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),LP.apply(this,arguments)}function MP(e){return xP(e)&&e.fu.length<10}function FP(e,t){e.fu.push(t);var n=ZP(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function UP(e){return xP(e)&&!ZP(e).No()&&e.fu.length>0}function VP(e){ZP(e).start()}function jP(e){return qP.apply(this,arguments)}function qP(){return qP=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ZP(t).eu();case 1:case"end":return e.stop()}}),e)}))),qP.apply(this,arguments)}function BP(e){return zP.apply(this,arguments)}function zP(){return zP=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ZP(t),r=dr(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),zP.apply(this,arguments)}function WP(e,t,n){return KP.apply(this,arguments)}function KP(){return KP=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=VT.from(i,n,r),e.next=3,RP(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,OP(t);case 5:case"end":return e.stop()}}),e)}))),KP.apply(this,arguments)}function HP(e,t){return GP.apply(this,arguments)}function GP(){return GP=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ZP(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oE(i=n.code)||i===J_.ABORTED){e.next=7;break}return r=t.fu.shift(),ZP(t).Mo(),e.next=5,RP(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,OP(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:UP(t)&&VP(t);case 5:case"end":return e.stop()}}),e)}))),GP.apply(this,arguments)}function QP(e,t){return YP.apply(this,arguments)}function YP(){return YP=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=X_(t)).asyncQueue.verifyOperationInProgress(),K_("RemoteStore","RemoteStore received new credentials"),i=xP(r),r._u.add(3),e.next=6,vP(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,dP(r);case 12:case"end":return e.stop()}}),e)}))),YP.apply(this,arguments)}function $P(e,t){return XP.apply(this,arguments)}function XP(){return XP=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X_(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,dP(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,vP(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),XP.apply(this,arguments)}function JP(e){return e.pu||(e.pu=function(e,t,n){var r=X_(e);return r.su(),new sP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:SP.bind(null,e),Zr:TP.bind(null,e),Wo:NP.bind(null,e)}),e.wu.push(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),_P(e)?bP(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:IP(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function ZP(e){return e.Iu||(e.Iu=function(e,t,n){var r=X_(e);return r.su(),new cP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:jP.bind(null,e),Zr:HP.bind(null,e),tu:BP.bind(null,e),Zo:WP.bind(null,e)}),e.wu.push(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,OP(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(K_("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var eA=function(){function e(t,n,r,i,a){O(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ex,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return M(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Z_(J_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function tA(e,t){if(H_("AsyncQueue","".concat(t,": ").concat(e)),Vx(e))return new Z_(J_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var nA=function(){function e(t){O(this,e),this.comparator=t?function(e,n){return t(e,n)||wx.comparator(e.key,n.key)}:function(e,t){return wx.comparator(e.key,t.key)},this.keyedMap=hE(),this.sortedSet=new $x(this.comparator)}return M(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),rA=function(){function e(){O(this,e),this.Tu=new $x(wx.comparator)}return M(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Y_():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),iA=function(){function e(t,n,r,i,a,o,u,s,c){O(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return M(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,nA.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),aA=M((function e(){O(this,e),this.Au=void 0,this.listeners=[]})),oA=M((function e(){O(this,e),this.queries=new sE((function(e){return kS(e)}),gS),this.onlineState="Unknown",this.Ru=new Set}));function uA(e,t){return sA.apply(this,arguments)}function sA(){return sA=hr(lr().mark((function e(t,n){var r,i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X_(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new aA),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=tA(e.t0,"Initialization of query '".concat(wS(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&dA(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),sA.apply(this,arguments)}function cA(e,t){return lA.apply(this,arguments)}function lA(){return lA=hr(lr().mark((function e(t,n){var r,i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X_(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function fA(e,t){var n,r=X_(e),i=!1,a=dr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=dr(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&dA(r)}function hA(e,t,n){var r=X_(e),i=r.queries.get(t);if(i){var a,o=dr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function dA(e){e.Ru.forEach((function(e){e.next()}))}var pA=function(){function e(t,n,r){O(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return M(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=dr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new iA(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=iA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),vA=function(){function e(t,n){O(this,e),this.ku=t,this.byteLength=n}return M(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),yA=function(){function e(t){O(this,e),this.It=t}return M(e,[{key:"Ji",value:function(e){return qE(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?GE(this.It,e.document,!1):VI.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return FE(e)}}]),e}(),mA=function(){function e(t,n,r){O(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gA(t)}return M(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=mx.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new yA(this.It),i=dr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=dr(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||kE()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UN(this.localStore,new yA(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=dr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,jN(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function gA(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var kA=M((function e(t){O(this,e),this.key=t})),wA=M((function e(t){O(this,e),this.key=t})),bA=function(){function e(t,n){O(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=kE(),this.mutatedKeys=kE(),this.Gu=xS(t),this.Qu=new nA(this.Gu)}return M(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new rA,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=bS(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y_()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new iA(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rA,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=kE(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new wA(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new kA(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=kE();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return iA.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),_A=M((function e(t,n,r){O(this,e),this.query=t,this.targetId=n,this.view=r})),xA=M((function e(t){O(this,e),this.key=t,this.nc=!1})),IA=function(){function e(t,n,r,i,a,o){O(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new sE((function(e){return kS(e)}),gS),this.rc=new Map,this.oc=new Set,this.uc=new $x(wx.comparator),this.cc=new Map,this.ac=new iN,this.hc={},this.lc=new Map,this.fc=OC.vn(),this.onlineState="Unknown",this.dc=void 0}return M(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function SA(e,t){return EA.apply(this,arguments)}function EA(){return EA=hr(lr().mark((function e(t,n){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gD(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,AN(r.localStore,yS(n));case 8:return u=e.sent,r.isPrimaryClient&&mP(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,TA(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function TA(e,t,n,r,i){return CA.apply(this,arguments)}function CA(){return CA=hr(lr().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,ON(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(QA(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ON(t.localStore,n,!0);case 3:return o=e.sent,u=new bA(n,o.Hi),s=u.Wu(o.documents),c=xE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),QA(t,r,l.Xu),f=new _A(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),CA.apply(this,arguments)}function NA(e,t){return PA.apply(this,arguments)}function PA(){return PA=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X_(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!gS(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,DN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),gP(r.remoteStore,i.targetId),HA(r,i.targetId)})).catch(Dx);case 9:e.next=14;break;case 11:return HA(r,i.targetId),e.next=14,DN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),PA.apply(this,arguments)}function AA(e,t,n){return DA.apply(this,arguments)}function DA(){return DA=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kD(t),e.prev=1,e.next=4,function(e,t){var n,r,i=X_(e),a=px.now(),o=t.reduce((function(e,t){return e.add(t.key)}),kE());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=lE(),s=kE();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=dr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=QS(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new XS(c.key,l,UI(l.value.mapValue),BS.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:dE(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new $x(fx)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,XA(i,a.changes);case 9:return e.next=11,OP(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=tA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),DA.apply(this,arguments)}function RA(e,t){return OA.apply(this,arguments)}function OA(){return OA=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.prev=1,e.next=4,CN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&($_(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?$_(n.nc):e.removedDocuments.size>0&&($_(n.nc),n.nc=!1))})),e.next=8,XA(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Dx(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),OA.apply(this,arguments)}function LA(e,t,n){var r=X_(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=X_(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=dr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&dA(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function MA(e,t,n){return FA.apply(this,arguments)}function FA(){return FA=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=X_(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new $x(wx.comparator)).insert(o,VI.newNoDocument(o,vx.min())),s=kE().add(o),c=new _E(vx.min(),new Map,new Zx(fx),u,s),e.next=9,RA(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),$A(i),e.next=16;break;case 14:return e.next=16,DN(i.localStore,n,!1).then((function(){return HA(i,n,r)})).catch(Dx);case 16:case"end":return e.stop()}}),e)}))),FA.apply(this,arguments)}function UA(e,t){return VA.apply(this,arguments)}function VA(){return VA=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),i=n.batch.batchId,e.prev=1,e.next=4,EN(r.localStore,n);case 4:return a=e.sent,KA(r,i,null),WA(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,XA(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),VA.apply(this,arguments)}function jA(e,t,n){return qA.apply(this,arguments)}function qA(){return qA=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=X_(t),e.prev=1,e.next=4,function(e,t){var n=X_(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return $_(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,KA(i,n,r),WA(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,XA(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Dx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qA.apply(this,arguments)}function BA(e,t){return zA.apply(this,arguments)}function zA(){return zA=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xP((r=X_(t)).remoteStore)||K_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=X_(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=tA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),zA.apply(this,arguments)}function WA(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function KA(e,t,n){var r=X_(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function HA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=dr(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||GA(e,t)}))}function GA(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(gP(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),$A(e))}function QA(e,t,n){var r,i=dr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof kA?(e.ac.addReference(a.key,t),YA(e,a)):a instanceof wA?(K_("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||GA(e,a.key)):Y_()}}catch(o){i.e(o)}finally{i.f()}}function YA(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(K_("SyncEngine","New document in limbo: "+n),e.oc.add(r),$A(e))}function $A(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new wx(mx.fromString(t)),r=e.fc.next();e.cc.set(r,new xA(n)),e.uc=e.uc.insert(n,r),mP(e.remoteStore,new qT(yS(lS(n.path)),r,2,Hx.at))}}function XA(e,t,n){return JA.apply(this,arguments)}function JA(){return JA=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=X_(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=wN.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ox.forEach(n,(function(t){return Ox.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ox.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Vx(e.t0)){e.next=10;break}throw e.t0;case 10:K_("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=dr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),JA.apply(this,arguments)}function ZA(e,t){return eD.apply(this,arguments)}function eD(){return eD=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=X_(t)).currentUser.isEqual(n)){e.next=11;break}return K_("SyncEngine","User change. New user:",n.toKey()),e.next=5,IN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Z_(J_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,XA(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),eD.apply(this,arguments)}function tD(e,t){var n=X_(e),r=n.cc.get(t);if(r&&r.nc)return kE().add(r.key);var i=kE(),a=n.rc.get(t);if(!a)return i;var o,u=dr(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function nD(e,t){return rD.apply(this,arguments)}function rD(){return rD=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.next=3,ON(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&QA(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),rD.apply(this,arguments)}function iD(e,t){return aD.apply(this,arguments)}function aD(){return aD=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),e.abrupt("return",MN(r.localStore,n).then((function(e){return XA(r,e)})));case 2:case"end":return e.stop()}}),e)}))),aD.apply(this,arguments)}function oD(e,t,n,r){return uD.apply(this,arguments)}function uD(){return uD=hr(lr().mark((function e(t,n,r,i){var a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=X_(t),e.next=3,function(e,t){var n=X_(e),r=X_(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ox.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,OP(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(KA(a,n,i||null),WA(a,n),function(e,t){X_(X_(e).mutationQueue).An(t)}(a.localStore,n)):Y_();case 11:return e.next=13,XA(a,o);case 13:e.next=16;break;case 15:K_("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),uD.apply(this,arguments)}function sD(e,t){return cD.apply(this,arguments)}function cD(){return cD=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gD(r=X_(t)),kD(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,lD(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,$P(r.remoteStore,!0);case 9:o=dr(a);try{for(o.s();!(u=o.n()).done;)s=u.value,mP(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return HA(r,t),DN(r.localStore,t,!0)})),gP(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,lD(r,c);case 21:return function(e){var t=X_(e);t.cc.forEach((function(e,n){gP(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new $x(wx.comparator)}(r),r.dc=!1,e.next=25,$P(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),cD.apply(this,arguments)}function lD(e,t,n){return fD.apply(this,arguments)}function fD(){return fD=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=X_(t),a=[],o=[],u=dr(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,AN(i.localStore,yS(f[0]));case 11:l=e.sent,h=dr(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,nD(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,LN(i.localStore,c);case 36:return m=e.sent,e.next=39,AN(i.localStore,m);case 39:return l=e.sent,e.next=42,TA(i,hD(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),fD.apply(this,arguments)}function hD(e){return cS(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function dD(e){var t=X_(e);return X_(X_(t.localStore).persistence).vi()}function pD(e,t,n,r){return vD.apply(this,arguments)}function vD(){return vD=hr(lr().mark((function e(t,n,r,i){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=X_(t)).dc){e.next=3;break}return e.abrupt("return",void K_("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,MN(a.localStore,_S(o[0]));case 10:return u=e.sent,s=_E.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,rI.EMPTY_BYTE_STRING),e.next=14,XA(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,DN(a.localStore,n,!0);case 17:return HA(a,n,i),e.abrupt("break",20);case 19:Y_();case 20:case"end":return e.stop()}}),e)}))),vD.apply(this,arguments)}function yD(e,t,n){return mD.apply(this,arguments)}function mD(){return mD=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=gD(t)).dc){e.next=45;break}a=dr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return K_("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,LN(i.localStore,u);case 12:return s=e.sent,e.next=15,AN(i.localStore,s);case 15:return c=e.sent,e.next=18,TA(i,hD(s),c.targetId,!1,c.resumeToken);case 18:mP(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=dr(r),e.prev=30,h=lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,DN(i.localStore,t,!1).then((function(){gP(i.remoteStore,t),HA(i,t)})).catch(Dx);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),mD.apply(this,arguments)}function gD(e){var t=X_(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=RA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MA.bind(null,t),t.sc.Wo=fA.bind(null,t.eventManager),t.sc.wc=hA.bind(null,t.eventManager),t}function kD(e){var t=X_(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jA.bind(null,t),t}function wD(e,t,n){var r=X_(e);(function(){var e=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=X_(e),r=FE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(gA(i)),a=new mA(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,XA(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=X_(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(G_("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var bD=function(){function e(){O(this,e),this.synchronizeTabs=!1}return M(e,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=aP(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return xN(this.persistence,new bN,e.initialUser,this.It)}},{key:"yc",value:function(e){return new lN(hN.Bs,this.It)}},{key:"gc",value:function(e){return new XN}},{key:"terminate",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_D=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return M(n,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(V(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,kD(this.Ac.syncEngine);case 6:return e.next=8,OP(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return xN(this.persistence,new bN,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new qC(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Kx(t,this.persistence);return new Wx(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=kN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?EC.withCacheSize(this.cacheSizeBytes):EC.DEFAULT;return new yN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,rP(),iP(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new XN}}]),n}(bD),xD=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return M(n,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){var r,i=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(V(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof $N,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:oD.bind(null,r),$r:pD.bind(null,r),Br:yD.bind(null,r),vi:dD.bind(null,r),Mr:iD.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sD(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=rP();if(!$N.C(t))throw new Z_(J_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $N(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(_D),ID=function(){function e(){O(this,e)}return M(e,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t,n){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return LA(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ZA.bind(null,this.syncEngine),e.next=12,$P(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new oA}},{key:"createDatastore",value:function(e){var t,n=aP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new nP(t));return function(e,t,n,r){return new lP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return LA(o.syncEngine,e,0)},a=ZN.C()?new ZN:new JN,new hP(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new IA(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X_(t),K_("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,vP(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function SD(e,t,n){if(!n)throw new Z_(J_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ED(e,t,n,r){if(!0===t&&!0===r)throw new Z_(J_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function TD(e){if(!wx.isDocumentKey(e))throw new Z_(J_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function CD(e){if(wx.isDocumentKey(e))throw new Z_(J_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ND(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Y_()}function PD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z_(J_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ND(e);throw new Z_(J_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function AD(e,t){if(t<=0)throw new Z_(J_.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var DD=new Map,RD=function(){function e(t){var n;if(O(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Z_(J_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Z_(J_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ED("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return M(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),OD=function(){function e(t,n,r,i){O(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RD({}),this._settingsFrozen=!1}return M(e,[{key:"app",get:function(){if(!this._app)throw new Z_(J_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Z_(J_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nx;switch(e.type){case"gapi":var t=e.client;return new ox(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Z_(J_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=DD.get(e);t&&(K_("ComponentProvider","Removing Datastore"),DD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function LD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=PD(e,OD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&G_("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=q_.MOCK_USER;else{o=Ur(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Z_(J_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new q_(s)}e._authCredentials=new rx(new tx(o,u))}}var MD=function(){function e(t,n,r){O(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return M(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new UD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),FD=function(){function e(t,n,r){O(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return M(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),UD=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e,r,lS(i)))._path=i,a.type="collection",a}return M(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new MD(this.firestore,null,new wx(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(FD);function VD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),SD("collection","path",t),e instanceof OD){var a=mx.fromString.apply(mx,[t].concat(r));return CD(a),new UD(e,null,a)}if(!(e instanceof MD||e instanceof UD))throw new Z_(J_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mx.fromString.apply(mx,[t].concat(r)));return CD(o),new UD(e.firestore,null,o)}function jD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ui(e),1===arguments.length&&(t=lx.R()),SD("doc","path",t),e instanceof OD){var a=mx.fromString.apply(mx,[t].concat(r));return TD(a),new MD(e,null,new wx(a))}if(!(e instanceof MD||e instanceof UD))throw new Z_(J_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(mx.fromString.apply(mx,[t].concat(r)));return TD(o),new MD(e.firestore,e instanceof UD?e.converter:null,new wx(o))}function qD(e,t){return e=ui(e),t=ui(t),(e instanceof MD||e instanceof UD)&&(t instanceof MD||t instanceof UD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function BD(e,t){return e=ui(e),t=ui(t),e instanceof FD&&t instanceof FD&&e.firestore===t.firestore&&gS(e._query,t._query)&&e.converter===t.converter}function zD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return hr(lr().mark((function r(){var i;return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var WD=function(){function e(t){O(this,e),this.observer=t,this.muted=!1}return M(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):H_("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),KD=function(){function e(t,n){var r=this;O(this,e),this.Pc=t,this.It=n,this.metadata=new ex,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return M(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new vA(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),HD=function(){function e(t){O(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return M(e,[{key:"lookup",value:function(){var e=hr(lr().mark((function e(t){var n,r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Z_(J_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),i=WE(r.It)+"/documents",a={documents:n.map((function(e){return jE(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=QE(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());$_(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new rE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=hr(lr().mark((function e(){var t,n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=wx.fromPath(t);n.mutations.push(new iE(r,n.precondition(r)))})),e.next=7,function(){var e=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X_(t),i=WE(r.It)+"/documents",a={writes:n.map((function(e){return YE(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y_();t=vx.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Z_(J_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vx.min())?BS.exists(!1):BS.updateTime(t):BS.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vx.min()))throw new Z_(J_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return BS.updateTime(t)}return BS.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),GD=function(){function e(t,n,r,i,a){O(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new oP(this.asyncQueue,"transaction_retry")}return M(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new HD(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!dI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!oE(t)}return!1}}]),e}(),QD=function(){function e(t,n,r,i){var a=this;O(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=q_.UNAUTHENTICATED,this.clientId=lx.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K_("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return K_("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return M(e,[{key:"getConfiguration",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Z_(J_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ex;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(hr(lr().mark((function n(){var r;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=tA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function YD(e,t){return $D.apply(this,arguments)}function $D(){return $D=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),K_("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,IN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),$D.apply(this,arguments)}function XD(e,t){return JD.apply(this,arguments)}function JD(){return JD=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ZD(t);case 3:return r=e.sent,K_("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return QP(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return QP(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),JD.apply(this,arguments)}function ZD(e){return eR.apply(this,arguments)}function eR(){return eR=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return K_("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,YD(t,new bD);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),eR.apply(this,arguments)}function tR(e){return nR.apply(this,arguments)}function nR(){return nR=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return K_("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,XD(t,new ID);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),nR.apply(this,arguments)}function rR(e){return ZD(e).then((function(e){return e.persistence}))}function iR(e){return ZD(e).then((function(e){return e.localStore}))}function aR(e){return tR(e).then((function(e){return e.remoteStore}))}function oR(e){return tR(e).then((function(e){return e.syncEngine}))}function uR(e){return tR(e).then((function(e){return e.datastore}))}function sR(e){return cR.apply(this,arguments)}function cR(){return cR=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tR(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=SA.bind(null,n.syncEngine),r.onUnlisten=NA.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new WD({next:function(a){t.enqueueAndForget((function(){return cA(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Z_(J_.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Z_(J_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new pA(lS(n.path),a,{includeMetadataChanges:!0,Nu:!0});return uA(e,o)},i.next=3,sR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function fR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new WD({next:function(n){t.enqueueAndForget((function(){return cA(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Z_(J_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new pA(n,a,{includeMetadataChanges:!0,Nu:!0});return uA(e,o)},i.next=3,sR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var hR=function(){function e(){var t=this;O(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new oP(this,"async_queue_retry"),this.Wc=function(){var e=iP();e&&K_("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=iP();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return M(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=iP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new ex;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Vx(e.t0)){e.next=12;break}throw e.t0;case 12:K_("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw H_("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=eA.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&Y_()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=dr(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=dr(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function dR(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=dr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var pR=function(){function e(){O(this,e),this._progressObserver={},this._taskCompletionResolver=new ex,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return M(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),vR=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new hR,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return M(n,[{key:"_terminate",value:function(){return this._firestoreClient||mR(this),this._firestoreClient.terminate()}}]),n}(OD);function yR(e){return e._firestoreClient||mR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function mR(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new fI(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new QD(e._authCredentials,e._appCheckCredentials,e._queue,r)}function gR(e,t,n){var r=new ex;return e.asyncQueue.enqueue(hr(lr().mark((function i(){var a;return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,YD(e,n);case 3:return i.next=5,XD(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===J_.FAILED_PRECONDITION||e.code===J_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:G_("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function kR(e){return function(e){return e.asyncQueue.enqueue(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rR(e);case 2:return n=t.sent,t.next=5,aR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=X_(e);return t._u.delete(0),dP(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(yR(e=PD(e,vR)))}function wR(e){return function(e){return e.asyncQueue.enqueue(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rR(e);case 2:return n=t.sent,t.next=5,aR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=X_(t))._u.add(0),e.next=4,vP(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(yR(e=PD(e,vR)))}function bR(e,t){var n=yR(e=PD(e,vR)),r=new pR;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new KD(e,t)}(function(e,t){if(e instanceof Uint8Array)return zD(e,t);if(e instanceof ArrayBuffer)return zD(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,aP(t));e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wD,t.next=3,oR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function _R(e,t){return function(e,t){return e.asyncQueue.enqueue(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=X_(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,iR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(yR(e=PD(e,vR)),t).then((function(t){return t?new FD(e,null,t.query):null}))}function xR(e){if(e._initialized||e._terminated)throw new Z_(J_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var IR=function(){function e(t){O(this,e),this._byteString=t}return M(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(rI.fromBase64String(t))}catch(t){throw new Z_(J_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(rI.fromUint8Array(t))}}]),e}(),SR=function(){function e(){O(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Z_(J_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kx(n)}return M(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ER=M((function e(t){O(this,e),this._methodName=t})),TR=function(){function e(t,n){if(O(this,e),!isFinite(t)||t<-90||t>90)throw new Z_(J_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z_(J_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return M(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fx(this._lat,e._lat)||fx(this._long,e._long)}}]),e}(),CR=/^__.*__$/,NR=function(){function e(t,n,r){O(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return M(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new XS(e,this.data,this.fieldMask,t,this.fieldTransforms):new $S(e,this.data,t,this.fieldTransforms)}}]),e}(),PR=function(){function e(t,n,r){O(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return M(e,[{key:"toMutation",value:function(e,t){return new XS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function AR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y_()}}var DR=function(){function e(t,n,r,i,a,o){O(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return M(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return JR(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(AR(this.sa)&&CR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),RR=function(){function e(t,n,r){O(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||aP(t)}return M(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new DR({sa:e,methodName:t,fa:n,path:kx.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function OR(e){var t=e._freezeSettings(),n=aP(e._databaseId);return new RR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function LR(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);QR("Data must be an object, but it was:",o,r);var u,s,c=HR(r,o);if(a.merge)u=new nI(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=dr(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=YR(t,d,n);if(!o.contains(p))throw new Z_(J_.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ZR(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new nI(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new NR(new FI(c),u,s)}var MR=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ER);function FR(e,t,n){return new DR({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var UR=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"_toFieldTransform",value:function(e){return new jS(e.path,new DS)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ER),VR=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e))._a=r,i}return M(n,[{key:"_toFieldTransform",value:function(e){var t=FR(this,e,!0),n=this._a.map((function(e){return KR(e,t)})),r=new RS(n);return new jS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ER),jR=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e))._a=r,i}return M(n,[{key:"_toFieldTransform",value:function(e){var t=FR(this,e,!0),n=this._a.map((function(e){return KR(e,t)})),r=new LS(n);return new jS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ER),qR=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e)).wa=r,i}return M(n,[{key:"_toFieldTransform",value:function(e){var t=new FS(e.It,TS(e.It,this.wa));return new jS(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ER);function BR(e,t,n,r){var i=e.da(1,t,n);QR("Data must be an object, but it was:",i,r);var a=[],o=FI.empty();Qx(r,(function(e,r){var u=XR(t,e,n);r=ui(r);var s=i.ca(u);if(r instanceof MR)a.push(u);else{var c=KR(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new nI(a);return new PR(o,u,i.fieldTransforms)}function zR(e,t,n,r,i,a){var o=e.da(1,t,n),u=[YR(t,r,n)],s=[i];if(a.length%2!=0)throw new Z_(J_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(YR(t,a[c])),s.push(a[c+1]);for(var l=[],f=FI.empty(),h=u.length-1;h>=0;--h)if(!ZR(l,u[h])){var d=u[h],p=s[h];p=ui(p);var v=o.ca(d);if(p instanceof MR)l.push(d);else{var y=KR(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new nI(l);return new PR(f,m,o.fieldTransforms)}function WR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return KR(n,e.da(r?4:3,t))}function KR(e,t){if(GR(e=ui(e)))return QR("Unsupported field value:",t,e),HR(e,t);if(e instanceof ER)return function(e,t){if(!AR(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=dr(e);try{for(a.s();!(n=a.n()).done;){var o=KR(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ui(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return TS(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=px.fromDate(e);return{timestampValue:OE(t.It,n)}}if(e instanceof px){var r=new px(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:OE(t.It,r)}}if(e instanceof TR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof IR)return{bytesValue:LE(t.It,e._byteString)};if(e instanceof MD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:UE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(ND(e)))}(e,t)}function HR(e,t){var n={};return Yx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qx(e,(function(e,r){var i=KR(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function GR(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof px||e instanceof TR||e instanceof IR||e instanceof MD||e instanceof ER)}function QR(e,t,n){if(!GR(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ND(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function YR(e,t,n){if((t=ui(t))instanceof SR)return t._internalPath;if("string"==typeof t)return XR(e,t);throw JR("Field path arguments must be of type string or ",e,!1,void 0,n)}var $R=new RegExp("[~\\*/\\[\\]]");function XR(e,t,n){if(t.search($R)>=0)throw JR("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return K(SR,R(t.split(".")))._internalPath}catch(ht){throw JR("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function JR(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Z_(J_.INVALID_ARGUMENT,u+e+s)}function ZR(e,t){return e.some((function(e){return e.isEqual(t)}))}var eO=function(){function e(t,n,r,i,a){O(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return M(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new MD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(nO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tO=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"data",value:function(){return If(V(n.prototype),"data",this).call(this)}}]),n}(eO);function nO(e,t){return"string"==typeof t?XR(e,t):t instanceof SR?t._internalPath:t._delegate._internalPath}function rO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Z_(J_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var iO=M((function e(){O(this,e)}));function aO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var oO=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return M(n,[{key:"_apply",value:function(e){var t=OR(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Z_(J_.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){mO(o,a);var s,c=[],l=dr(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(yO(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=yO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||mO(o,a),u=WR(n,"where",o,"in"===a||"not-in"===a);var h=QI.create(i,a,u);return function(e,t){if(t.dt()){var n=dS(e);if(null!==n&&!n.isEqual(t.field))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=hS(e);null!==r&&gO(e,t.field,r)}var i=function(e,t){var n,r=dr(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Z_(J_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Z_(J_.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new FD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(iO);var uO=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return M(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new iS(t,n);return function(e,t){if(null===hS(e)){var n=dS(e);null!==n&&gO(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new FD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new sS(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(iO);var sO=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return M(n,[{key:"_apply",value:function(e){return new FD(e.firestore,e.converter,mS(e._query,this.Ia,this.Ta))}}]),n}(iO);var cO=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return M(n,[{key:"_apply",value:function(e){var t=vO(e,this.type,this.Ea,this.Aa);return new FD(e.firestore,e.converter,function(e,t){return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(iO);function lO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cO("startAt",t,!0)}function fO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cO("startAfter",t,!1)}var hO=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return M(n,[{key:"_apply",value:function(e){var t=vO(e,this.type,this.Ea,this.Aa);return new FD(e.firestore,e.converter,function(e,t){return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(iO);function dO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hO("endBefore",t,!1)}function pO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hO("endAt",t,!0)}function vO(e,t,n,r){if(n[0]=ui(n[0]),n[0]instanceof eO)return function(e,t,n,r,i){if(!r)throw new Z_(J_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=dr(vS(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(SI(t,r.key));else{var c=r.data.field(s.field);if(sI(c))throw new Z_(J_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new rS(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=OR(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Z_(J_.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!pS(e)&&-1!==c.indexOf("/"))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(mx.fromString(c));if(!wx.isDocumentKey(l))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new wx(l);u.push(SI(t,f))}else{var h=WR(n,r,c);u.push(h)}}return new rS(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function yO(e,t,n){if("string"==typeof(n=ui(n))){if(""===n)throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pS(t)&&-1!==n.indexOf("/"))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(mx.fromString(n));if(!wx.isDocumentKey(r))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return SI(e,new wx(r))}if(n instanceof MD)return SI(e,n._key);throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ND(n),"."))}function mO(e,t){if(!Array.isArray(e)||0===e.length)throw new Z_(J_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Z_(J_.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function gO(e,t,n){if(!n.isEqual(t))throw new Z_(J_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var kO=function(){function e(){O(this,e)}return M(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gI(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oI(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uI(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Y_()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Qx(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new TR(oI(e.latitude),oI(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=cI(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(lI(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=aI(e);return new px(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=mx.fromString(e);$_(sT(n));var r=new hI(n.get(1),n.get(3)),i=new wx(n.popFirst(5));return r.isEqual(t)||H_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function wO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bO=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return M(n,[{key:"convertBytes",value:function(e){return new IR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new MD(this.firestore,null,t)}}]),n}(kO),_O=function(){function e(t,n){O(this,e),this.hasPendingWrites=t,this.fromCache=n}return M(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),xO=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return M(n,[{key:"exists",value:function(){return If(V(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new IO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(nO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(eO),IO=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return If(V(n.prototype),"data",this).call(this,e)}}]),n}(xO),SO=function(){function e(t,n,r,i){O(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new _O(i.hasPendingWrites,i.fromCache),this.query=r}return M(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new IO(n._firestore,n._userDataWriter,r.key,r,new _O(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z_(J_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new IO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _O(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new IO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _O(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:EO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function EO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y_()}}function TO(e,t){return e instanceof xO&&t instanceof xO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof SO&&t instanceof SO&&e._firestore===t._firestore&&BD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var CO=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return M(n,[{key:"convertBytes",value:function(e){return new IR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new MD(this.firestore,null,t)}}]),n}(kO);function NO(e){e=PD(e,MD);var t=PD(e.firestore,vR),n=yR(t),r=new CO(t);return function(e,t){var n=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=X_(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Z_(J_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=tA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,iR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new xO(t,r,e._key,n,new _O(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function PO(e){e=PD(e,FD);var t=PD(e.firestore,vR),n=yR(t),r=new CO(t);return function(e,t){var n=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ON(t,n,!0);case 3:i=e.sent,a=new bA(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=tA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,iR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new SO(t,r,e,n)}))}function AO(e,t,n){e=PD(e,MD);var r=PD(e.firestore,vR),i=wO(e.converter,t,n);return LO(r,[LR(OR(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,BS.none())])}function DO(e,t,n){e=PD(e,MD);for(var r=PD(e.firestore,vR),i=OR(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return LO(r,[("string"==typeof(t=ui(t))||t instanceof SR?zR(i,"updateDoc",e._key,t,n,o):BR(i,"updateDoc",e._key,t)).toMutation(e._key,BS.exists(!0))])}function RO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ui(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||dR(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(dR(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof MD)l=PD(e.firestore,vR),f=lS(e._key.path),c={next:function(t){n[s]&&n[s](MO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=PD(e,FD);l=PD(p.firestore,vR),f=p._query;var v=new CO(l);c={next:function(e){n[s]&&n[s](new SO(l,v,p,e))},error:n[s+1],complete:n[s+2]},rO(e._query)}return function(e,t,n,r){var i=new WD(r),a=new pA(t,i,n);return e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uA,t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cA,t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(yR(l),f,h,c)}function OO(e,t){return function(e,t){var n=new WD(t);return e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){X_(e).Ru.add(t),t.next()},t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){X_(e).Ru.delete(t)},t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(yR(e=PD(e,vR)),dR(t)?t:{next:t})}function LO(e,t){return function(e,t){var n=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=AA,r.next=3,oR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(yR(e),t)}function MO(e,t,n){var r=n.docs.get(t._key),i=new CO(e);return new xO(e,i,t._key,r,new _O(n.hasPendingWrites,n.fromCache),t.converter)}var FO={maxAttempts:5},UO=function(){function e(t,n){O(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=OR(t)}return M(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=VO(e,this._firestore),i=wO(r.converter,t,n),a=LR(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,BS.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=VO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof SR?zR(this._dataReader,"WriteBatch.update",i._key,t,n,o):BR(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,BS.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=VO(e,this._firestore);return this._mutations=this._mutations.concat(new rE(t._key,BS.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Z_(J_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function VO(e,t){if((e=ui(e)).firestore!==t)throw new Z_(J_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var jO=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r))._firestore=e,i}return M(n,[{key:"get",value:function(e){var t=this,r=VO(e,this._firestore),i=new CO(this._firestore);return If(V(n.prototype),"get",this).call(this,e).then((function(e){return new xO(t._firestore,i,r._key,e._document,new _O(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){O(this,e),this._firestore=t,this._transaction=n,this._dataReader=OR(t)}return M(e,[{key:"get",value:function(e){var t=this,n=VO(e,this._firestore),r=new bO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Y_();var i=e[0];if(i.isFoundDocument())return new eO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eO(t._firestore,r,n._key,null,n.converter);throw Y_()}))}},{key:"set",value:function(e,t,n){var r=VO(e,this._firestore),i=wO(r.converter,t,n),a=LR(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=VO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ui(t))||t instanceof SR?zR(this._dataReader,"Transaction.update",i._key,t,n,o):BR(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=VO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function qO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new VR("arrayUnion",t)}function BO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jR("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){B_=e}(ta),Qi(new si("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new vR(new ix(e.getProvider("auth-internal")),new sx(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Z_(J_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hI(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ua(j_,"3.7.2",e),ua(j_,"3.7.2","esm2017")}();function zO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Z_("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function WO(){if("undefined"===typeof Uint8Array)throw new Z_("unimplemented","Uint8Arrays are not available in this environment.")}function KO(){if("undefined"==typeof atob)throw new Z_("unimplemented","Blobs are unavailable in Firestore in this environment.")}var HO=function(){function e(t){O(this,e),this._delegate=t}return M(e,[{key:"toBase64",value:function(){return KO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return WO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return KO(),new e(IR.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return WO(),new e(IR.fromUint8Array(t))}}]),e}();function GO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=dr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var QO=function(){function e(){O(this,e)}return M(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){xR(e=PD(e,vR));var n=yR(e),r=e._freezeSettings(),i=new ID;return gR(n,i,new _D(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){xR(e=PD(e,vR));var t=yR(e),n=e._freezeSettings(),r=new ID;return gR(t,r,new xD(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Z_(J_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ex;return e._queue.enqueueAndForgetEvenWhileRestricted(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mx.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Mx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(kN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),YO=function(){function e(t,n,r){var i=this;O(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof hI||(this._appCompat=t)}return M(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||G_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};LD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return kR(this._delegate)}},{key:"disableNetwork",value:function(){return wR(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ED("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=BA,n.next=3,oR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(yR(e=PD(e,vR)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return OO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Z_("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new cL(this,VD(this._delegate,e))}catch(t){throw tL(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new eL(this,jD(this._delegate,e))}catch(t){throw tL(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new oL(this,function(e,t){if(e=PD(e,OD),SD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Z_(J_.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new FD(e,null,function(e){return new sS(mx.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw tL(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=PD(e,vR);var r=Object.assign(Object.assign({},FO),n);return function(e){if(e.maxAttempts<1)throw new Z_(J_.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ex;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){var a;return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,uR(e);case 2:a=i.sent,new GD(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(yR(e),(function(n){return t(new jO(e,n))}),r)}(this._delegate,(function(n){return e(new XO(t,n))}))}},{key:"batch",value:function(){var e=this;return yR(this._delegate),new JO(new UO(this._delegate,(function(t){return LO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return bR(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return _R(this._delegate,e).then((function(e){return e?new oL(t,e):null}))}}]),e}(),$O=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return M(n,[{key:"convertBytes",value:function(e){return new HO(new IR(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return eL.forKey(t,this.firestore,null)}}]),n}(kO);var XO=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $O(t)}return M(e,[{key:"get",value:function(e){var t=this,n=lL(e);return this._delegate.get(n).then((function(e){return new iL(t._firestore,new xO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=lL(e);return n?(zO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lL(e);return this._delegate.delete(t),this}}]),e}(),JO=function(){function e(t){O(this,e),this._delegate=t}return M(e,[{key:"set",value:function(e,t,n){var r=lL(e);return n?(zO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ZO=function(){function e(t,n,r){O(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return M(e,[{key:"fromFirestore",value:function(e,t){var n=new IO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $O(t),n),i.set(n,a)),a}}]),e}();ZO.INSTANCES=new WeakMap;var eL=function(){function e(t,n){O(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $O(t)}return M(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new cL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new cL(this.firestore,VD(this._delegate,e))}catch(t){throw tL(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ui(e))instanceof MD&&qD(this._delegate,e)}},{key:"set",value:function(e,t){t=zO("DocumentReference.set",t);try{return t?AO(this._delegate,e,t):AO(this._delegate,e)}catch(n){throw tL(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?DO(this._delegate,e):DO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw tL(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return LO(PD(e.firestore,vR),[new rE(e._key,BS.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nL(n),a=rL(n,(function(t){return new iL(e.firestore,new xO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return RO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?NO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=PD(e,MD);var t=PD(e.firestore,vR);return lR(yR(t),e._key,{source:"server"}).then((function(n){return MO(t,e,n)}))}(this._delegate):function(e){e=PD(e,MD);var t=PD(e.firestore,vR);return lR(yR(t),e._key).then((function(n){return MO(t,e,n)}))}(this._delegate),t.then((function(e){return new iL(n.firestore,new xO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ZO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Z_("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new MD(n._delegate,r,new wx(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new MD(n._delegate,r,t))}}]),e}();function tL(e,t,n){return e.message=e.message.replace(t,n),e}function nL(e){var t,n=dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!GO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function rL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=GO(e[0])?e[0]:GO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var iL=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return M(e,[{key:"ref",get:function(){return new eL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return TO(this._delegate,e._delegate)}}]),e}(),aL=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return M(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Y_()}(void 0!==t),t}}]),n}(iL),oL=function(){function e(t,n){O(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $O(t)}return M(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,aO(this._delegate,function(e,t,n){var r=t,i=nO("where",e);return new oO(i,r,n)}(t,n,r)))}catch(i){throw tL(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,aO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=nO("orderBy",e);return new uO(n,t)}(t,n)))}catch(r){throw tL(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,aO(this._delegate,function(e){return AD("limit",e),new sO("limit",e,"F")}(t)))}catch(n){throw tL(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,aO(this._delegate,function(e){return AD("limitToLast",e),new sO("limitToLast",e,"L")}(t)))}catch(n){throw tL(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,aO(this._delegate,lO.apply(void 0,arguments)))}catch(t){throw tL(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,aO(this._delegate,fO.apply(void 0,arguments)))}catch(t){throw tL(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,aO(this._delegate,dO.apply(void 0,arguments)))}catch(t){throw tL(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,aO(this._delegate,pO.apply(void 0,arguments)))}catch(t){throw tL(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return BD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=PD(e,FD);var t=PD(e.firestore,vR),n=yR(t),r=new CO(t);return fR(n,e._query,{source:"server"}).then((function(n){return new SO(t,r,e,n)}))}(this._delegate):function(e){e=PD(e,FD);var t=PD(e.firestore,vR),n=yR(t),r=new CO(t);return rO(e._query),fR(n,e._query).then((function(n){return new SO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new sL(n.firestore,new SO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nL(n),a=rL(n,(function(t){return new sL(e.firestore,new SO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return RO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ZO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),uL=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return M(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new aL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sL=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return M(e,[{key:"query",get:function(){return new oL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new aL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new uL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new aL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return TO(this._delegate,e._delegate)}}]),e}(),cL=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return M(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new eL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new eL(this.firestore,void 0===e?jD(this._delegate):jD(this._delegate,e))}catch(t){throw tL(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=PD(e.firestore,vR),r=jD(e),i=wO(e.converter,t);return LO(n,[LR(OR(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,BS.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new eL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ZO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(oL);function lL(e){return PD(e,MD)}var fL=function(){function e(){O(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=K(SR,n)}return M(e,[{key:"isEqual",value:function(e){return(e=ui(e))instanceof SR&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(kx.keyField().canonicalString())}}]),e}(),hL=function(){function e(t){O(this,e),this._delegate=t}return M(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new UR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new MR("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=qO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=BO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new qR("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),dL={Firestore:YO,GeoPoint:TR,Timestamp:px,Blob:HO,Transaction:XO,WriteBatch:JO,DocumentReference:eL,DocumentSnapshot:iL,Query:oL,QueryDocumentSnapshot:aL,QuerySnapshot:sL,CollectionReference:cL,FieldPath:fL,FieldValue:hL,setLogLevel:function(e){!function(e){z_.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new si("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dL)))}(e,(function(e,t){return new YO(e,t,new QO)})),e.registerVersion("@firebase/firestore-compat","0.2.2")}(_f);_f.initializeApp({apiKey:"AIzaSyAj_z4uNCAb8O6Vqmih-Fbs_Mm0cm2ZeYY",authDomain:"sweeptakes-28.firebaseapp.com",databaseURL:"https://sweeptakes-28-default-rtdb.firebaseio.com",projectId:"sweeptakes-28",storageBucket:"sweeptakes-28.appspot.com",messagingSenderId:"903090746477",appId:"1:903090746477:web:8d637ee0d9c5f74ee4fb64"}).firestore();i.createRoot(document.getElementById("root")).render((0,sr.jsx)(t.StrictMode,{children:(0,sr.jsx)(ir,{children:(0,sr.jsx)(S,{store:vf,children:(0,sr.jsx)(df,{})})})})),pf()}()}();
//# sourceMappingURL=main.f315e2be.js.map