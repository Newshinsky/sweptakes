/*! For license information please see main.09522fd0.js.LICENSE.txt */
!function(){var e={472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(_){}}}}return t}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var F,M=Object.assign;function U(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=_i(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Me=null,Ue=!1,je=null,Ve={onError:function(e){Fe=!0,Me=e}};function qe(e,t,n,r,i,a,o,u,s){Fe=!1,Me=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var zt=k.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=_t,a=zt.transition;zt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,zt.transition=a}}function Ht(e,t,n,r){var i=_t,a=zt.transition;zt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Ft(Nt,e,t,n,r,i),!0;case"mouseover":return At=Ft(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ft(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Ft(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},fn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(gn),kn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=M({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Fn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,_r=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var l=Me;Fe=!1,Me=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Mr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Wn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,_)).length&&(_=new kn(_,e,null,n,i),o.push({event:_,listeners:y}),g?_.data=g:null!==(g=qn(n))&&(_.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return M({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{_t=t,Vi=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,_a=null,ka=null;function wa(){ka=_a=ga=null}function ba(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ka=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ga)throw Error(a(308));_a=e,ga.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var _=d(i,v,g.value,c);if(null===_){null===v&&(v=y);break}e&&v&&null===_.alternate&&t(i,v),u=o(_,u,m),null===f?l=_:f.sibling=_,f=_,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,_o=!1,ko=0,wo=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),_o){o=0;do{if(_o=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(_o)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==ko;return ko=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){Fo(t)&&Mo(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function qo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{_t=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){_o=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _u=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ds,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Fi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Wu(e,t,a);r=t.stateNode,_u.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Du,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&_(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),_e(s,u);var l=_e(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):_(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,_s(e,t,n)}function _s(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?bs(i):null!==s?(s.return=o,Xu=s):bs(i);for(;null!==a;)Xu=a,_s(a,t,n),a=a.sibling;Xu=i,Yu=u,$u=c}ks(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ks(e)}}function ks(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=k.ReactCurrentDispatcher,Ss=k.ReactCurrentOwner,Ts=k.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ps=0,Rs=0,Ds=Ii(0),Os=0,Ls=null,Fs=0,Ms=0,Us=0,js=null,Vs=null,qs=0,Bs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,$s=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Ms|=n),4===Os&&uc(e,Ps)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Je()+500,ji&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ps===t||(zs=null,Bs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Ps=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),t);break}wc(e,Vs,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),r);break}wc(e,Vs,zs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));bc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,zs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Je()+500,ji&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&bc();var t=Cs;Cs|=1;var n=Ts.transition,r=_t;try{if(Ts.transition=null,_t=1,e)return e()}finally{_t=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function fc(){Rs=Ds.current,Ei(Ds)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Dc(e.current,null),Ps=Rs=t,Os=0,Ls=null,Us=Ms=Fs=0,Vs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,_o=!1,ko=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hs||!Hs.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Fa(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}kc(n)}catch(k){t=k,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Ms)||uc(Ns,Ps)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ps===t||(zs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Ps=0,Os}function yc(){for(;null!==As;)_c(As)}function gc(){for(;null!==As&&!Ye();)_c(As)}function _c(e){var t=xs(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?kc(e):As=t,Ss.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=_t,i=Ts.transition;try{Ts.transition=null,_t=1,function(e,t,n,r){do{bc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=_t;_t=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,_t=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&bc(),0!==(1&(o=e.pendingLanes))?e===Js?$s++:($s=0,Js=e):$s=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,_t=r}return null}function bc(){if(null!==Qs){var e=kt(Ys),t=Ts.transition,n=_t;try{if(Ts.transition=null,_t=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var _=e.current;for(Xu=_;null!==Xu;){var k=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Xu=k;else e:for(u=_;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(b){Ic(s,s.return,b)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{_t=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ps&n)===n&&(4===Os||3===Os&&(130023424&Ps)===Ps&&500>Je()-qs?hc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Mu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),zu(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(Bs=Je()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[_i,ki,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function b(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return b(e)||w(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===_||e.$$typeof===k||e.$$typeof===y)},t.typeOf=w},441:function(e,t,n){"use strict";e.exports=n(372)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=_.prototype=new g;k.constructor=_,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function b(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof _)x=function(){_(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".b90ea991.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="sweeptakes:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/sweptakes/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunksweeptakes=self.webpackChunksweeptakes||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ga},SDK_VERSION:function(){return Lo},_DEFAULT_ENTRY_NAME:function(){return bo},_addComponent:function(){return So},_addOrOverwriteComponent:function(){return To},_apps:function(){return Io},_clearComponents:function(){return Po},_components:function(){return Eo},_getProvider:function(){return No},_registerComponent:function(){return Co},_removeServiceInstance:function(){return Ao},deleteApp:function(){return jo},getApp:function(){return Mo},getApps:function(){return Uo},initializeApp:function(){return Fo},onLog:function(){return Bo},registerVersion:function(){return qo},setLogLevel:function(){return zo}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}var l=n(248),f=n(327),h=n(164);var d=function(e){e()},p=function(){return d},v=(0,t.createContext)(null);function m(){return(0,t.useContext)(v)}var y=function(){throw new Error("uSES not initialized!")},g=y,_=function(e,t){return e===t};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?m:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=g(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var w=k();n(110),n(900);var b={notify:function(){},get:function(){return[]}};function x(e,t){var n,r=b;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=p(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=b)},getListeners:function(){return r}};return o}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var E=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=x(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);I((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||v;return t.createElement(s.Provider,{value:o},i)};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?m:function(){return(0,t.useContext)(e)};return function(){return n().store}}var T=S();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?T:S(e);return function(){return t().dispatch}}var N,A,P=C();function R(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(e){return function(e){if(Array.isArray(e))return o(e)}(e)||R(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function U(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){if(t&&("object"===q(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function W(e){var t=V();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z(this,n)}}function K(e,t,n){return K=V()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&M(i,n.prototype),i},K.apply(null,arguments)}function H(e){var t="function"===typeof Map?new Map:void 0;return H=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return K(e,arguments,j(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),M(n,e)},H(e)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}!function(e){g=e}(f.useSyncExternalStoreWithSelector),function(e){e}(l.useSyncExternalStore),N=h.unstable_batchedUpdates,d=N,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(A||(A={}));var Q,Y="popstate";function $(e){return{usr:e.state,key:e.key}}function J(e,t,n,r){return void 0===n&&(n=null),G({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Z(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function X(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Z(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ee(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:X(e);return new URL(n,t)}function te(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=A.Pop,f=null;function h(){l=A.Pop,f&&f({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Y,h),f=e,function(){o.removeEventListener(Y,h),f=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=ee(X(e));return G({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){l=A.Push;var r=J(d.location,e,t);n&&n(r,e);var i=$(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(wu){o.location.assign(a)}s&&f&&f({action:l,location:d.location})},replace:function(e,t){l=A.Replace;var r=J(d.location,e,t);n&&n(r,e);var i=$(r),a=d.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function ne(e,t,n){void 0===n&&(n="/");var r=le(("string"===typeof t?Z(t):t).pathname||"/",n);if(null==r)return null;var i=re(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=ue(i[o],ce(r));return a}function re(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(fe(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=me([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(fe(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),re(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:oe(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Q||(Q={}));var ie=/^:\w+$/,ae=function(e){return"*"===e};function oe(e,t){var n=e.split("/"),r=n.length;return n.some(ae)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!ae(e)})).reduce((function(e,t){return e+(ie.test(t)?3:""===t?1:10)}),r)}function ue(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=se({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:me([i,l.pathname]),pathnameBase:ye(me([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=me([i,l.pathnameBase]))}return a}function se(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);he("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(wu){return he(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+wu+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function ce(e){try{return decodeURI(e)}catch(wu){return he(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+wu+")."),e}}function le(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function fe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function he(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function de(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function pe(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ve(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Z(e):(fe(!(i=G({},e)).pathname||!i.pathname.includes("?"),de("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),de("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),de("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Z(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ge(a),hash:_e(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var me=function(e){return e.join("/").replace(/\/\/+/g,"/")},ye=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ge=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},_e=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ke=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n)}(H(Error));var we=F((function e(t,n,r){O(this,e),this.status=t,this.statusText=n||"",this.data=r}));function be(e){return e instanceof we}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var xe=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD"].concat(D(xe)));function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}var Ee="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Se=t.useState,Te=t.useEffect,Ce=t.useLayoutEffect,Ne=t.useDebugValue;function Ae(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ee(n,r)}catch(wu){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var Pe=t.createContext(null);var Re=t.createContext(null);var De=t.createContext(null);var Oe=t.createContext(null);var Le=t.createContext(null);var Fe=t.createContext(null);var Me=t.createContext({outlet:null,matches:[]});var Ue=t.createContext(null);function je(){return null!=t.useContext(Fe)}function Ve(){return je()||fe(!1),t.useContext(Fe).location}function qe(){je()||fe(!1);var e=t.useContext(Le),n=e.basename,r=e.navigator,i=t.useContext(Me).matches,a=Ve().pathname,o=JSON.stringify(pe(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=ve(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:me([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function Be(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(Me).matches,a=Ve().pathname,o=JSON.stringify(pe(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return ve(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function ze(){var e=function(){var e,n=t.useContext(Ue),r=Ye(Ke.UseRouteError),i=t.useContext(Me),a=i.matches[i.matches.length-1];if(n)return n;return i||fe(!1),!a.route.id&&fe(!1),null==(e=r.errors)?void 0:e[a.route.id]}(),n=be(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var We,Ke,He=function(e){U(r,e);var n=W(r);function r(e){var t;return O(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return F(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Ue.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function Ge(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Pe);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(Me.Provider,{value:n},i)}function Qe(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||fe(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(ze,null):null,l=function(){return t.createElement(Ge,{match:o,routeContext:{outlet:e,matches:n.concat(i.slice(0,u+1))}},s?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===u)?t.createElement(He,{location:r.location,component:c,error:s,children:l()}):l()}),null)}function Ye(e){var n=t.useContext(De);return n||fe(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(We||(We={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ke||(Ke={}));var $e;function Je(e){fe(!1)}function Xe(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?A.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;je()&&fe(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Z(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,_=p.hash,k=void 0===_?"":_,w=p.state,b=void 0===w?null:w,x=p.key,I=void 0===x?"default":x,E=t.useMemo((function(){var e=le(m,h);return null==e?null:{pathname:e,search:g,hash:k,state:b,key:I}}),[h,m,g,k,b,I]);return null==E?null:t.createElement(Le.Provider,{value:d},t.createElement(Fe.Provider,{children:a,value:{location:E,navigationType:s}}))}function Ze(e){var n=e.children,r=e.location,i=t.useContext(Re);return function(e,n){je()||fe(!1);var r,i=t.useContext(De),a=t.useContext(Me).matches,o=a[a.length-1],u=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,Ve());if(n){var l,f="string"===typeof n?Z(n):n;"/"===s||(null==(l=f.pathname)?void 0:l.startsWith(s))||fe(!1),r=f}else r=c;var h=r.pathname||"/",d=ne(e,{pathname:"/"===s?h:h.slice(s.length)||"/"}),p=Qe(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:me([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:me([s,e.pathnameBase])})})),a,i||void 0);return n&&p?t.createElement(Fe.Provider,{value:{location:Ie({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:A.Pop}},p):p}(i&&!n?i.router.routes:tt(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}($e||($e={}));var et=new Promise((function(){}));t.Component;function tt(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==Je&&fe(!1),e.props.index&&e.props.children&&fe(!1);var a=[].concat(D(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=tt(e.props.children,a)),r.push(o)}else r.push.apply(r,tt(e.props.children,n))})),r}function nt(e,t){return function(){return e.apply(t,arguments)}}var rt,it=Object.prototype.toString,at=Object.getPrototypeOf,ot=(rt=Object.create(null),function(e){var t=it.call(e);return rt[t]||(rt[t]=t.slice(8,-1).toLowerCase())}),ut=function(e){return e=e.toLowerCase(),function(t){return ot(t)===e}},st=function(e){return function(t){return typeof t===e}},ct=Array.isArray,lt=st("undefined");var ft=ut("ArrayBuffer");var ht=st("string"),dt=st("function"),pt=st("number"),vt=function(e){return null!==e&&"object"===typeof e},mt=function(e){if("object"!==ot(e))return!1;var t=at(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yt=ut("Date"),gt=ut("File"),_t=ut("Blob"),kt=ut("FileList"),wt=ut("URLSearchParams");function bt(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ct(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var u,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)u=s[n],t.call(null,e[u],u,e)}}var xt,It=(xt="undefined"!==typeof Uint8Array&&at(Uint8Array),function(e){return xt&&e instanceof xt}),Et=ut("HTMLFormElement"),St=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Tt=ut("RegExp"),Ct=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};bt(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Nt={isArray:ct,isArrayBuffer:ft,isBuffer:function(e){return null!==e&&!lt(e)&&null!==e.constructor&&!lt(e.constructor)&&dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||it.call(e)===t||dt(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ft(e.buffer)},isString:ht,isNumber:pt,isBoolean:function(e){return!0===e||!1===e},isObject:vt,isPlainObject:mt,isUndefined:lt,isDate:yt,isFile:gt,isBlob:_t,isRegExp:Tt,isFunction:dt,isStream:function(e){return vt(e)&&dt(e.pipe)},isURLSearchParams:wt,isTypedArray:It,isFileList:kt,forEach:bt,merge:function e(){for(var t={},n=function(n,r){mt(t[r])&&mt(n)?t[r]=e(t[r],n):mt(n)?t[r]=e({},n):ct(n)?t[r]=n.slice():t[r]=n},r=0,i=arguments.length;r<i;r++)arguments[r]&&bt(arguments[r],n);return t},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.allOwnKeys;return bt(t,(function(t,r){n&&dt(t)?e[r]=nt(t,n):e[r]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&at(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ot,kindOfTest:ut,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(ct(e))return e;var t=e.length;if(!pt(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Et,hasOwnProperty:St,hasOwnProp:St,reduceDescriptors:Ct,freezeMethods:function(e){Ct(e,(function(t,n){var r=e[n];dt(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return ct(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t}};function At(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Nt.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Pt=At.prototype,Rt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Rt[e]={value:e}})),Object.defineProperties(At,Rt),Object.defineProperty(Pt,"isAxiosError",{value:!0}),At.from=function(e,t,n,r,i,a){var o=Object.create(Pt);return Nt.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),At.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Dt=At,Ot=n(472);function Lt(e){return Nt.isPlainObject(e)||Nt.isArray(e)}function Ft(e){return Nt.endsWith(e,"[]")?e.slice(0,-2):e}function Mt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ft(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Ut=Nt.toFlatObject(Nt,{},null,(function(e){return/^is[A-Z]/.test(e)}));var jt=function(e,t,n){if(!Nt.isObject(e))throw new TypeError("target must be an object");t=t||new(Ot||FormData);var r,i=(n=Nt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Nt.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,u=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((r=t)&&Nt.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!Nt.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Nt.isDate(e))return e.toISOString();if(!s&&Nt.isBlob(e))throw new Dt("Blob is not supported. Use a Buffer instead.");return Nt.isArrayBuffer(e)||Nt.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){var a=e;if(e&&!r&&"object"===typeof e)if(Nt.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Nt.isArray(e)&&function(e){return Nt.isArray(e)&&!e.some(Lt)}(e)||Nt.isFileList(e)||Nt.endsWith(n,"[]")&&(a=Nt.toArray(e)))return n=Ft(n),a.forEach((function(e,r){!Nt.isUndefined(e)&&null!==e&&t.append(!0===u?Mt([n],r,o):null===u?n:n+"[]",c(e))})),!1;return!!Lt(e)||(t.append(Mt(r,n,o),c(e)),!1)}var f=[],h=Object.assign(Ut,{defaultVisitor:l,convertValue:c,isVisitable:Lt});if(!Nt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Nt.isUndefined(n)){if(-1!==f.indexOf(n))throw Error("Circular reference detected in "+r.join("."));f.push(n),Nt.forEach(n,(function(n,i){!0===(!(Nt.isUndefined(n)||null===n)&&a.call(t,n,Nt.isString(i)?i.trim():i,r,h))&&e(n,r?r.concat(i):[i])})),f.pop()}}(e),t};function Vt(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function qt(e,t){this._pairs=[],e&&jt(e,this,t)}var Bt=qt.prototype;Bt.append=function(e,t){this._pairs.push([e,t])},Bt.toString=function(e){var t=e?function(t){return e.call(this,t,Vt)}:Vt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var zt=qt;function Wt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Kt(e,t,n){if(!t)return e;var r,i=n&&n.encode||Wt,a=n&&n.serialize;if(r=a?a(t,n):Nt.isURLSearchParams(t)?t.toString():new zt(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Ht=function(){function e(){O(this,e),this.handlers=[]}return F(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Nt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Gt=Ht,Qt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yt="undefined"!==typeof URLSearchParams?URLSearchParams:zt,$t=FormData,Jt=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),Xt={isBrowser:!0,classes:{URLSearchParams:Yt,FormData:$t,Blob:Blob},isStandardBrowserEnv:Jt,protocols:["http","https","file","blob","url","data"]};var Zt=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&Nt.isArray(r)?r.length:a,u?(Nt.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Nt.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Nt.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Nt.isFormData(e)&&Nt.isFunction(e.entries)){var n={};return Nt.forEachEntry(e,(function(e,r){t(function(e){return Nt.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var en=Xt.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Nt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Nt.isString(r)&&o.push("path="+r),Nt.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function tn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var nn=Xt.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Nt.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function rn(e,t,n){Dt.call(this,null==e?"canceled":e,Dt.ERR_CANCELED,t,n),this.name="CanceledError"}Nt.inherits(rn,Dt,{__CANCEL__:!0});var an=rn;var on=Nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),un=Symbol("internals"),sn=Symbol("defaults");function cn(e){return e&&String(e).trim().toLowerCase()}function ln(e){return!1===e||null==e?e:Nt.isArray(e)?e.map(ln):String(e)}function fn(e,t,n,r){return Nt.isFunction(r)?r.call(this,t,n):Nt.isString(t)?Nt.isString(r)?-1!==t.indexOf(r):Nt.isRegExp(r)?r.test(t):void 0:void 0}function hn(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}function dn(e,t){e&&this.set(e),this[sn]=t||null}Object.assign(dn.prototype,{set:function(e,t,n){var r=this;function i(e,t,n){var i=cn(t);if(!i)throw new Error("header name must be a non-empty string");var a=hn(r,i);(!a||!0===n||!1!==r[a]&&!1!==n)&&(r[a||t]=ln(e))}return Nt.isPlainObject(e)?Nt.forEach(e,(function(e,n){i(e,n,t)})):i(t,e,n),this},get:function(e,t){if(e=cn(e)){var n=hn(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Nt.isFunction(t))return t.call(this,r,n);if(Nt.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}},has:function(e,t){if(e=cn(e)){var n=hn(this,e);return!(!n||t&&!fn(0,this[n],n,t))}return!1},delete:function(e,t){var n=this,r=!1;function i(e){if(e=cn(e)){var i=hn(n,e);!i||t&&!fn(0,n[i],i,t)||(delete n[i],r=!0)}}return Nt.isArray(e)?e.forEach(i):i(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){var t=this,n={};return Nt.forEach(this,(function(r,i){var a=hn(n,i);if(a)return t[a]=ln(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ln(r),n[o]=!0})),this},toJSON:function(e){var t=Object.create(null);return Nt.forEach(Object.assign({},this[sn]||null,this),(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Nt.isArray(n)?n.join(", "):n)})),t}}),Object.assign(dn,{from:function(e){return Nt.isString(e)?new this(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&on[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e)):e instanceof this?e:new this(e)},accessor:function(e){var t=(this[un]=this[un]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=cn(e);t[r]||(!function(e,t){var n=Nt.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Nt.isArray(e)?e.forEach(r):r(e),this}}),dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),Nt.freezeMethods(dn.prototype),Nt.freezeMethods(dn);var pn=dn;var vn=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function mn(e,t){var n=0,r=vn(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0};c[t?"download":"upload"]=!0,e(c)}}function yn(e){return new Promise((function(t,n){var r,i=e.data,a=pn.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Nt.isFormData(i)&&Xt.isStandardBrowserEnv&&a.setContentType(!1);var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=tn(e.baseURL,e.url);function h(){if(s){var r=pn.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Dt("Request failed with status code "+n.status,[Dt.ERR_BAD_REQUEST,Dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),Kt(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new Dt("Request aborted",Dt.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new Dt("Network Error",Dt.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Qt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Dt(t,r.clarifyTimeoutError?Dt.ETIMEDOUT:Dt.ECONNABORTED,e,s)),s=null},Xt.isStandardBrowserEnv){var d=(e.withCredentials||nn(f))&&e.xsrfCookieName&&en.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&Nt.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),Nt.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",mn(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",mn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new an(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===Xt.protocols.indexOf(p)?n(new Dt("Unsupported protocol "+p+":",Dt.ERR_BAD_REQUEST,e)):s.send(i||null)}))}var gn={http:yn,xhr:yn},_n=function(e){if(Nt.isString(e)){var t=gn[e];if(!e)throw Error(Nt.hasOwnProp(e)?"Adapter '".concat(e,"' is not available in the build"):"Can not resolve adapter '".concat(e,"'"));return t}if(!Nt.isFunction(e))throw new TypeError("adapter is not a function");return e},kn={"Content-Type":"application/x-www-form-urlencoded"};var wn={transitional:Qt,adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=_n("xhr"):"undefined"!==typeof process&&"process"===Nt.kindOf(process)&&(e=_n("http")),e}(),transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Nt.isObject(e);if(a&&Nt.isHTMLForm(e)&&(e=new FormData(e)),Nt.isFormData(e))return i&&i?JSON.stringify(Zt(e)):e;if(Nt.isArrayBuffer(e)||Nt.isBuffer(e)||Nt.isStream(e)||Nt.isFile(e)||Nt.isBlob(e))return e;if(Nt.isArrayBufferView(e))return e.buffer;if(Nt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return jt(e,new Xt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Xt.isNode&&Nt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Nt.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return jt(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Nt.isString(e))try{return(t||JSON.parse)(e),Nt.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||wn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Nt.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Dt.from(a,Dt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xt.classes.FormData,Blob:Xt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Nt.forEach(["delete","get","head"],(function(e){wn.headers[e]={}})),Nt.forEach(["post","put","patch"],(function(e){wn.headers[e]=Nt.merge(kn)}));var bn=wn;function xn(e,t){var n=this||bn,r=t||n,i=pn.from(r.headers),a=r.data;return Nt.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function In(e){return!(!e||!e.__CANCEL__)}function En(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new an}function Sn(e){return En(e),e.headers=pn.from(e.headers),e.data=xn.call(e,e.transformRequest),(e.adapter||bn.adapter)(e).then((function(t){return En(e),t.data=xn.call(e,e.transformResponse,t),t.headers=pn.from(t.headers),t}),(function(t){return In(t)||(En(e),t&&t.response&&(t.response.data=xn.call(e,e.transformResponse,t.response),t.response.headers=pn.from(t.response.headers))),Promise.reject(t)}))}function Tn(e,t){t=t||{};var n={};function r(e,t){return Nt.isPlainObject(e)&&Nt.isPlainObject(t)?Nt.merge(e,t):Nt.isPlainObject(t)?Nt.merge({},t):Nt.isArray(t)?t.slice():t}function i(n){return Nt.isUndefined(t[n])?Nt.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function a(e){if(!Nt.isUndefined(t[e]))return r(void 0,t[e])}function o(n){return Nt.isUndefined(t[n])?Nt.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function u(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return Nt.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=s[e]||i,r=t(e);Nt.isUndefined(r)&&t!==u||(n[e]=r)})),n}var Cn="1.1.3",Nn={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Nn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var An={};Nn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.1.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Dt(r(i," has been removed"+(t?" in "+t:"")),Dt.ERR_DEPRECATED);return t&&!An[i]&&(An[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Pn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Dt("options must be an object",Dt.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Dt("option "+a+" must be "+s,Dt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Dt("Unknown option "+a,Dt.ERR_BAD_OPTION)}},validators:Nn},Rn=Pn.validators,Dn=function(){function e(t){O(this,e),this.defaults=t,this.interceptors={request:new Gt,response:new Gt}}return F(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=Tn(this.defaults,t),r=n.transitional,i=n.paramsSerializer;void 0!==r&&Pn.assertOptions(r,{silentJSONParsing:Rn.transitional(Rn.boolean),forcedJSONParsing:Rn.transitional(Rn.boolean),clarifyTimeoutError:Rn.transitional(Rn.boolean)},!1),void 0!==i&&Pn.assertOptions(i,{encode:Rn.function,serialize:Rn.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=t.headers&&Nt.merge(t.headers.common,t.headers[t.method]);a&&Nt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),t.headers=new pn(t.headers,a);var o=[],u=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,f=0;if(!u){var h=[Sn.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),l=h.length,s=Promise.resolve(t);f<l;)s=s.then(h[f++],h[f++]);return s}l=o.length;var d=t;for(f=0;f<l;){var p=o[f++],v=o[f++];try{d=p(d)}catch(wu){v.call(this,wu);break}}try{s=Sn.call(this,d)}catch(wu){return Promise.reject(wu)}for(f=0,l=c.length;f<l;)s=s.then(c[f++],c[f++]);return s}},{key:"getUri",value:function(e){return Kt(tn((e=Tn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Nt.forEach(["delete","get","head","options"],(function(e){Dn.prototype[e]=function(t,n){return this.request(Tn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Nt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Tn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Dn.prototype[e]=t(),Dn.prototype[e+"Form"]=t(!0)}));var On=Dn,Ln=function(){function e(t){if(O(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new an(e,t,i),n(r.reason))}))}return F(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),Fn=Ln;var Mn=function e(t){var n=new On(t),r=nt(On.prototype.request,n);return Nt.extend(r,On.prototype,n,{allOwnKeys:!0}),Nt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Tn(t,n))},r}(bn);Mn.Axios=On,Mn.CanceledError=an,Mn.CancelToken=Fn,Mn.isCancel=In,Mn.VERSION=Cn,Mn.toFormData=jt,Mn.AxiosError=Dt,Mn.Cancel=Mn.CanceledError,Mn.all=function(e){return Promise.all(e)},Mn.spread=function(e){return function(t){return e.apply(null,t)}},Mn.isAxiosError=function(e){return Nt.isObject(e)&&!0===e.isAxiosError},Mn.formToJSON=function(e){return Zt(Nt.isHTMLForm(e)?new FormData(e):e)};var Un=Mn;Un.Axios,Un.AxiosError,Un.CanceledError,Un.isCancel,Un.CancelToken,Un.VERSION,Un.all,Un.Cancel,Un.isAxiosError,Un.spread,Un.toFormData;function jn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Vn(e){return!!e&&!!e[Nr]}function qn(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ar}(e)||Array.isArray(e)||!!e[Cr]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Cr])||Qn(e)||Yn(e))}function Bn(e,t,n){void 0===n&&(n=!1),0===zn(e)?(n?Object.keys:Pr)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function zn(e){var t=e[Nr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Qn(e)?2:Yn(e)?3:0}function Wn(e,t){return 2===zn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Kn(e,t){return 2===zn(e)?e.get(t):e[t]}function Hn(e,t,n){var r=zn(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Gn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Qn(e){return Ir&&e instanceof Map}function Yn(e){return Er&&e instanceof Set}function $n(e){return e.o||e.t}function Jn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Rr(e);delete t[Nr];for(var n=Pr(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Xn(e,t){return void 0===t&&(t=!1),er(e)||Vn(e)||!qn(e)||(zn(e)>1&&(e.set=e.add=e.clear=e.delete=Zn),Object.freeze(e),t&&Bn(e,(function(e,t){return Xn(t,!0)}),!0)),e}function Zn(){jn(2)}function er(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function tr(e){var t=Dr[e];return t||jn(18,e),t}function nr(e,t){Dr[e]||(Dr[e]=t)}function rr(){return br}function ir(e,t){t&&(tr("Patches"),e.u=[],e.s=[],e.v=t)}function ar(e){or(e),e.p.forEach(sr),e.p=null}function or(e){e===br&&(br=e.l)}function ur(e){return br={p:[],l:br,h:e,m:!0,_:0}}function sr(e){var t=e[Nr];0===t.i||1===t.i?t.j():t.O=!0}function cr(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||tr("ES5").S(t,e,r),r?(n[Nr].P&&(ar(t),jn(4)),qn(e)&&(e=lr(t,e),t.l||hr(t,e)),t.u&&tr("Patches").M(n[Nr].t,e,t.u,t.s)):e=lr(t,n,[]),ar(t),t.u&&t.v(t.u,t.s),e!==Tr?e:void 0}function lr(e,t,n){if(er(t))return t;var r=t[Nr];if(!r)return Bn(t,(function(i,a){return fr(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return hr(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Jn(r.k):r.o;Bn(3===r.i?new Set(i):i,(function(t,a){return fr(e,r,i,t,a,n)})),hr(e,i,!1),n&&e.u&&tr("Patches").R(r,n,e.u,e.s)}return r.o}function fr(e,t,n,r,i,a){if(Vn(i)){var o=lr(e,i,a&&t&&3!==t.i&&!Wn(t.D,r)?a.concat(r):void 0);if(Hn(n,r,o),!Vn(o))return;e.m=!1}if(qn(i)&&!er(i)){if(!e.h.F&&e._<1)return;lr(e,i),t&&t.A.l||hr(e,i)}}function hr(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Xn(t,n)}function dr(e,t){var n=e[Nr];return(n?$n(n):e)[t]}function pr(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function vr(e){e.P||(e.P=!0,e.l&&vr(e.l))}function mr(e){e.o||(e.o=Jn(e.t))}function yr(e,t,n){var r=Qn(t)?tr("MapSet").N(t,n):Yn(t)?tr("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:rr(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Or;n&&(i=[r],a=Lr);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):tr("ES5").J(t,n);return(n?n.A:rr()).p.push(r),r}function gr(e){return Vn(e)||jn(22,e),function e(t){if(!qn(t))return t;var n,r=t[Nr],i=zn(t);if(r){if(!r.P&&(r.i<4||!tr("ES5").K(r)))return r.t;r.I=!0,n=_r(t,i),r.I=!1}else n=_r(t,i);return Bn(n,(function(t,i){r&&Kn(r.t,t)===i||Hn(n,t,e(i))})),3===i?new Set(n):n}(e)}function _r(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Jn(e)}function kr(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Nr];return Or.get(t,e)},set:function(t){var n=this[Nr];Or.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Nr];if(!i.P)switch(i.i){case 5:r(i)&&vr(i);break;case 4:n(i)&&vr(i)}}}function n(e){for(var t=e.t,n=e.k,r=Pr(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Nr){var o=t[a];if(void 0===o&&!Wn(t,a))return!0;var u=n[a],s=u&&u[Nr];if(s?s.t!==o:!Gn(u,o))return!0}}var c=!!t[Nr];return r.length!==Pr(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};nr("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Rr(n);delete a[Nr];for(var o=Pr(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:rr(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Nr,{value:a,writable:!0}),i},S:function(e,n,i){i?Vn(n)&&n[Nr].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Nr];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)Bn(a,(function(t){t!==Nr&&(void 0!==i[t]||Wn(i,t)?o[t]||e(a[t]):(o[t]=!0,vr(n)))})),Bn(i,(function(e){void 0!==a[e]||Wn(a,e)||(o[e]=!1,vr(n))}));else if(5===u){if(r(n)&&(vr(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var wr,br,xr="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ir="undefined"!=typeof Map,Er="undefined"!=typeof Set,Sr="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Tr=xr?Symbol.for("immer-nothing"):((wr={})["immer-nothing"]=!0,wr),Cr=xr?Symbol.for("immer-draftable"):"__$immer_draftable",Nr=xr?Symbol.for("immer-state"):"__$immer_state",Ar=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Pr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Rr=Object.getOwnPropertyDescriptors||function(e){var t={};return Pr(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Dr={},Or={get:function(e,t){if(t===Nr)return e;var n=$n(e);if(!Wn(n,t))return function(e,t,n){var r,i=pr(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!qn(r)?r:r===dr(e.t,t)?(mr(e),e.o[t]=yr(e.A.h,r,e)):r},has:function(e,t){return t in $n(e)},ownKeys:function(e){return Reflect.ownKeys($n(e))},set:function(e,t,n){var r=pr($n(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=dr($n(e),t),a=null==i?void 0:i[Nr];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Gn(n,i)&&(void 0!==n||Wn(e.t,t)))return!0;mr(e),vr(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==dr(e.t,t)||t in e.t?(e.D[t]=!1,mr(e),vr(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$n(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){jn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){jn(12)}},Lr={};Bn(Or,(function(e,t){Lr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Lr.deleteProperty=function(e,t){return Lr.set.call(this,e,t,void 0)},Lr.set=function(e,t,n){return Or.set.call(this,e[0],t,n,e[0])};var Fr=function(){function e(e){var t=this;this.g=Sr,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&jn(6),void 0!==r&&"function"!=typeof r&&jn(7),qn(e)){var u=ur(t),s=yr(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?ar(u):or(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return ir(u,r),cr(e,u)}),(function(e){throw ar(u),e})):(ir(u,r),cr(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Tr&&(o=void 0),t.F&&Xn(o,!0),r){var l=[],f=[];tr("Patches").M(e,o,l,f),r(l,f)}return o}jn(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){qn(e)||jn(8),Vn(e)&&(e=gr(e));var t=ur(this),n=yr(this,e,void 0);return n[Nr].C=!0,or(t),n},t.finishDraft=function(e,t){var n=(e&&e[Nr]).A;return ir(n,t),cr(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Sr&&jn(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=tr("Patches").$;return Vn(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Mr=new Fr,Ur=Mr.produce,jr=(Mr.produceWithPatches.bind(Mr),Mr.setAutoFreeze.bind(Mr),Mr.setUseProxies.bind(Mr),Mr.applyPatches.bind(Mr),Mr.createDraft.bind(Mr),Mr.finishDraft.bind(Mr),Ur);function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){Vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Wr="function"===typeof Symbol&&Symbol.observable||"@@observable",Kr=function(){return Math.random().toString(36).substring(7).split("").join(".")},Hr={INIT:"@@redux/INIT"+Kr(),REPLACE:"@@redux/REPLACE"+Kr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Kr()}};function Gr(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Qr(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(zr(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(zr(1));return n(Qr)(e,t)}if("function"!==typeof e)throw new Error(zr(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(zr(3));return a}function f(e){if("function"!==typeof e)throw new Error(zr(4));if(s)throw new Error(zr(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(zr(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Gr(e))throw new Error(zr(7));if("undefined"===typeof e.type)throw new Error(zr(8));if(s)throw new Error(zr(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(zr(10));i=e,h({type:Hr.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(zr(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Wr]=function(){return this},e}return h({type:Hr.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[Wr]=p,r}function Yr(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Hr.INIT}))throw new Error(zr(12));if("undefined"===typeof n(void 0,{type:Hr.PROBE_UNKNOWN_ACTION()}))throw new Error(zr(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(zr(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function $r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Jr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(zr(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=$r.apply(void 0,a)(n.dispatch),Br(Br({},n),{},{dispatch:r})}}}function Xr(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Zr=Xr();Zr.withExtraArgument=Xr;var ei=Zr,ti=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ni=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ri=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ii=Object.defineProperty,ai=Object.defineProperties,oi=Object.getOwnPropertyDescriptors,ui=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable,li=function(e,t,n){return t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fi=function(e,t){for(var n in t||(t={}))si.call(t,n)&&li(e,n,t[n]);if(ui)for(var r=0,i=ui(t);r<i.length;r++){n=i[r];ci.call(t,n)&&li(e,n,t[n])}return e},hi=function(e,t){return ai(e,oi(t))},di=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},pi="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?$r:$r.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function vi(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var mi=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ti(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ri([void 0],e[0].concat(this)))):new(t.bind.apply(t,ri([void 0],e.concat(this))))},t}(Array);function yi(e){return qn(e)?jr(e,(function(){})):e}function gi(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new mi);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(ei.withExtraArgument(n.extraArgument)):r.push(ei));0;return r}(e)}}function _i(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return fi(fi({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ki(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var wi=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},bi=["name","message","stack","code"],xi=function(e,t){this.payload=e,this.meta=t},Ii=function(e,t){this.payload=e,this.meta=t},Ei=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=bi;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=_i(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:hi(fi({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=_i(e+"/pending",(function(e,t,n){return{payload:void 0,meta:hi(fi({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=_i(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||Ei)(e||"Rejected"),meta:hi(fi({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):wi(),h=new o,d=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),p=!1;function v(e){p&&(l=e,h.abort())}var m=function(){return di(this,null,(function(){var o,l,m,y,g;return ni(this,(function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(k=y)||"object"!==typeof k||"function"!==typeof k.then?[3,2]:[4,y];case 1:y=_.sent(),_.label=2;case 2:if(!1===y)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return p=!0,u(i(f,e,null==(l=null==n?void 0:n.getPendingMeta)?void 0:l.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([d,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:v,rejectWithValue:function(e,t){return new xi(e,t)},fulfillWithValue:function(e,t){return new Ii(e,t)}})).then((function(t){if(t instanceof xi)throw t;return t instanceof Ii?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return m=_.sent(),[3,5];case 4:return g=_.sent(),m=g instanceof xi?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(m)&&m.meta.condition||u(m),[2,m]}var k}))}))}();return Object.assign(m,{abort:v,requestId:f,arg:e,unwrap:function(){return m.then(Si)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=e}();function Si(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Ti="listenerMiddleware";_i(Ti+"/add"),_i(Ti+"/removeAll"),_i(Ti+"/remove");var Ci;"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:n.g);kr();var Ni=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:yi(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?ki(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=fi(fi({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ki(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return yi(e())};else{var c=yi(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=ri([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(Vn(e))return void 0===(r=n(e,t))?e:r;if(qn(e))return jr(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?_i(c,r):_i(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"soccerScore",initialState:{allMatch:[{_id:"629c9c8a5749c4077500ead4",away_score:0,away_scorers:["null"],away_team_id:"4",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"3",id:"1",local_date:"11/21/2022 19:00",matchday:"2",persian_date:"1400-08-30 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0633\u0646\u06af\u0627\u0644",away_team_fa:"\u0647\u0644\u0646\u062f",home_team_en:"Senegal",away_team_en:"Nederlands",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Flag_of_Senegal.svg/125px-Flag_of_Senegal.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Flag_of_the_Netherlands.svg/125px-Flag_of_the_Netherlands.svg.png"},{_id:"629c9c8a5749c4077500ead5",away_score:0,away_scorers:["null"],away_team_id:"6",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"5",id:"2",local_date:"11/21/2022 16:00",matchday:"2",persian_date:"1400-08-01 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0646\u06af\u0644\u0633\u062a\u0627\u0646",away_team_fa:"\u0627\u06cc\u0631\u0627\u0646",home_team_en:"England",away_team_en:"Iran",home_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/b/be/Flag_of_England.svg/125px-Flag_of_England.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Flag_of_Iran.svg/125px-Flag_of_Iran.svg.png"},{_id:"629c9c8a5749c4077500ead6",away_score:0,away_scorers:["null"],away_team_id:"2",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"1",id:"3",local_date:"11/20/2022 19:00",matchday:"1",persian_date:"1400-08-29 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0642\u0637\u0631",away_team_fa:"\u0627\u06a9\u0648\u0627\u062f\u0648\u0631",home_team_en:"Qatar",away_team_en:"Ecuador",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Qatar.svg/125px-Flag_of_Qatar.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Flag_of_Ecuador.svg/125px-Flag_of_Ecuador.svg.png"},{_id:"629c9c8a5749c4077500ead7",away_score:0,away_scorers:["null"],away_team_id:"8",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"7",id:"4",local_date:"11/21/2022 22:00",matchday:"2",persian_date:"1400-08-30 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0622\u0645\u0631\u06cc\u06a9\u0627",away_team_fa:"\u0648\u0644\u0632",home_team_en:"United States",away_team_en:"Wales",home_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/125px-Flag_of_the_United_States.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Flag_of_Wales_%281959%29.svg/125px-Flag_of_Wales_%281959%29.svg.png"},{_id:"629c9c8a5749c4077500ead8",away_score:0,away_scorers:["null"],away_team_id:"10",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"9",id:"5",local_date:"11/22/2022 13:00",matchday:"3",persian_date:"1400-09-01 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0622\u0631\u0698\u0627\u0646\u062a\u06cc\u0646",away_team_fa:"\u0639\u0631\u0628\u0633\u062a\u0627\u0646",home_team_en:"Argentina",away_team_en:"Saudi Arabia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Flag_of_Argentina.svg/125px-Flag_of_Argentina.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Flag_of_Saudi_Arabia.svg/125px-Flag_of_Saudi_Arabia.svg.png"},{_id:"629c9c8a5749c4077500ead9",away_score:0,away_scorers:["null"],away_team_id:"12",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"11",id:"6",local_date:"11/22/2022 16:00",matchday:"3",persian_date:"1400-09-01 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u062f\u0627\u0646\u0645\u0627\u0631\u06a9",away_team_fa:"\u062a\u0648\u0646\u0633",home_team_en:"Denmark",away_team_en:"Tunisia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Denmark.svg/125px-Flag_of_Denmark.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Tunisia.svg/125px-Flag_of_Tunisia.svg.png"},{_id:"629c9c8a5749c4077500eada",away_score:0,away_scorers:["null"],away_team_id:"14",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"13",id:"7",local_date:"11/22/2022 19:00",matchday:"3",persian_date:"1400-09-01 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0645\u06a9\u0632\u06cc\u06a9",away_team_fa:"\u0644\u0647\u0633\u062a\u0627\u0646",home_team_en:"Mexico",away_team_en:"Poland",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Flag_of_Mexico.svg/125px-Flag_of_Mexico.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Flag_of_Poland.svg/125px-Flag_of_Poland.svg.png"},{_id:"629c9c8a5749c4077500eadb",away_score:0,away_scorers:["null"],away_team_id:"16",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"15",id:"8",local_date:"11/21/2022 22:00",matchday:"3",persian_date:"1400-09-01 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0641\u0631\u0627\u0646\u0633\u0647",away_team_fa:"\u0627\u0633\u062a\u0631\u0627\u0644\u06cc\u0627",home_team_en:"France",away_team_en:"Australia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg/125px-Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Flag_of_Australia_%28converted%29.svg/125px-Flag_of_Australia_%28converted%29.svg.png"},{_id:"629c9c8a5749c4077500eadc",away_score:0,away_scorers:["null"],away_team_id:"18",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"17",id:"9",local_date:"11/23/2022 13:00",matchday:"4",persian_date:"1400-09-02 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0645\u0631\u0627\u06a9\u0634",away_team_fa:"\u06a9\u0631\u0648\u0627\u0633\u06cc",home_team_en:"Morocco",away_team_en:"Croatia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Flag_of_Morocco.svg/125px-Flag_of_Morocco.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Flag_of_Croatia.svg/125px-Flag_of_Croatia.svg.png"},{_id:"629c9c8a5749c4077500eadd",away_score:0,away_scorers:["null"],away_team_id:"20",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"19",id:"10",local_date:"11/23/2022 16:00",matchday:"4",persian_date:"1400-09-02 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0622\u0644\u0645\u0627\u0646",away_team_fa:"\u0698\u0627\u067e\u0646",home_team_en:"Germany",away_team_en:"Japan",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Flag_of_Germany.svg/125px-Flag_of_Germany.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/125px-Flag_of_Japan.svg.png"},{_id:"629c9c8a5749c4077500eade",away_score:0,away_scorers:["null"],away_team_id:"22",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"21",id:"11",local_date:"11/23/2022 19:00",matchday:"4",persian_date:"1400-09-02 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0633\u067e\u0627\u0646\u06cc\u0627",away_team_fa:"\u06a9\u0627\u0633\u062a\u0627\u0631\u06cc\u06a9\u0627",home_team_en:"Spain",away_team_en:"Costa Rica",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Spain.svg/125px-Flag_of_Spain.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_Costa_Rica_%28state%29.svg/125px-Flag_of_Costa_Rica_%28state%29.svg.png"},{_id:"629c9c8a5749c4077500eadf",away_score:0,away_scorers:["null"],away_team_id:"24",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"23",id:"12",local_date:"11/23/2022 22:00",matchday:"4",persian_date:"1400-09-02 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0628\u0644\u0698\u06cc\u06a9",away_team_fa:"\u06a9\u0627\u0646\u0627\u062f\u0627",home_team_en:"Belgium",away_team_en:"Canada",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Belgium.svg/125px-Flag_of_Belgium.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Flag_of_Canada_%28Pantone%29.svg/125px-Flag_of_Canada_%28Pantone%29.svg.png"},{_id:"629c9c8a5749c4077500eae0",away_score:0,away_scorers:["null"],away_team_id:"26",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"25",id:"13",local_date:"11/24/2022 13:00",matchday:"5",persian_date:"1400-09-03 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0628\u0631\u0632\u06cc\u0644",away_team_fa:"\u0635\u0631\u0628\u0633\u062a\u0627\u0646",home_team_en:"Brazil",away_team_en:"Serbia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/125px-Flag_of_Brazil.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Flag_of_Serbia.svg/125px-Flag_of_Serbia.svg.png"},{_id:"629c9c8a5749c4077500eae1",away_score:0,away_scorers:["null"],away_team_id:"28",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"27",id:"14",local_date:"11/24/2022 16:00",matchday:"5",persian_date:"1400-09-03 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u067e\u0631\u062a\u063a\u0627\u0644",away_team_fa:"\u063a\u0646\u0627",home_team_en:"Portugal",away_team_en:"Ghana",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/125px-Flag_of_Portugal.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Flag_of_Ghana.svg/125px-Flag_of_Ghana.svg.png"},{_id:"629c9c8a5749c4077500eae2",away_score:0,away_scorers:["null"],away_team_id:"30",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"29",id:"15",local_date:"11/24/2022 19:00",matchday:"5",persian_date:"1400-09-03 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0631\u0648\u06af\u0648\u0626\u0647",away_team_fa:"\u06a9\u0631\u0647 \u062c\u0646\u0648\u0628\u06cc",home_team_en:"Uruguay",away_team_en:"South Korea",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Flag_of_Uruguay.svg/125px-Flag_of_Uruguay.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Flag_of_South_Korea.svg/125px-Flag_of_South_Korea.svg.png"},{_id:"629c9c8a5749c4077500eae3",away_score:0,away_scorers:["null"],away_team_id:"32",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"31",id:"16",local_date:"11/24/2022 10:00",matchday:"5",persian_date:"1400-09-03 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0633\u0648\u0626\u06cc\u0633",away_team_fa:"\u06a9\u0627\u0645\u0631\u0648\u0646",home_team_en:"Switzerland",away_team_en:"Cameroon",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Flag_of_Switzerland.svg/100px-Flag_of_Switzerland.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Flag_of_Cameroon.svg/125px-Flag_of_Cameroon.svg.png"},{_id:"629c9c8a5749c4077500eae4",away_score:0,away_scorers:["null"],away_team_id:"8",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"6",id:"17",local_date:"11/25/2022 13:00",matchday:"6",persian_date:"1400-09-04 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u06cc\u0631\u0627\u0646",away_team_fa:"\u0648\u0644\u0632",home_team_en:"Iran",away_team_en:"Wales",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Flag_of_Iran.svg/125px-Flag_of_Iran.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Flag_of_Wales_%281959%29.svg/125px-Flag_of_Wales_%281959%29.svg.png"},{_id:"629c9c8a5749c4077500eae5",away_score:0,away_scorers:["null"],away_team_id:"3",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"1",id:"18",local_date:"11/25/2022 16:00",matchday:"6",persian_date:"1400-09-04 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0642\u0637\u0631",away_team_fa:"\u0633\u0646\u06af\u0627\u0644",home_team_en:"Qatar",away_team_en:"Senegal",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Qatar.svg/125px-Flag_of_Qatar.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Flag_of_Senegal.svg/125px-Flag_of_Senegal.svg.png"},{_id:"629c9c8a5749c4077500eae6",away_score:0,away_scorers:["null"],away_team_id:"2",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"4",id:"19",local_date:"11/25/2022 19:00",matchday:"6",persian_date:"1400-09-04 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0647\u0644\u0646\u062f",away_team_fa:"\u0627\u06a9\u0648\u0627\u062f\u0648\u0631",home_team_en:"Nederlands",away_team_en:"Ecuador",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Flag_of_the_Netherlands.svg/125px-Flag_of_the_Netherlands.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Flag_of_Ecuador.svg/125px-Flag_of_Ecuador.svg.png"},{_id:"629c9c8a5749c4077500eae7",away_score:0,away_scorers:["null"],away_team_id:"7",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"5",id:"20",local_date:"11/25/2022 22:00",matchday:"6",persian_date:"1400-09-04 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0646\u06af\u0644\u0633\u062a\u0627\u0646",away_team_fa:"\u0622\u0645\u0631\u06cc\u06a9\u0627",home_team_en:"England",away_team_en:"United States",home_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/b/be/Flag_of_England.svg/125px-Flag_of_England.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/125px-Flag_of_the_United_States.svg.png"},{_id:"629c9c8a5749c4077500eae8",away_score:0,away_scorers:["null"],away_team_id:"16",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"12",id:"21",local_date:"11/26/2022 13:00",matchday:"7",persian_date:"1400-09-05 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u062a\u0648\u0646\u0633",away_team_fa:"\u0627\u0633\u062a\u0631\u0627\u0644\u06cc\u0627",home_team_en:"Tunisia",away_team_en:"Australia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Tunisia.svg/125px-Flag_of_Tunisia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Flag_of_Australia_%28converted%29.svg/125px-Flag_of_Australia_%28converted%29.svg.png"},{_id:"629c9c8a5749c4077500eae9",away_score:0,away_scorers:["null"],away_team_id:"10",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"14",id:"22",local_date:"11/26/2022 16:00",matchday:"7",persian_date:"1400-09-05 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0644\u0647\u0633\u062a\u0627\u0646",away_team_fa:"\u0639\u0631\u0628\u0633\u062a\u0627\u0646",home_team_en:"Poland",away_team_en:"Saudi Arabia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Flag_of_Poland.svg/125px-Flag_of_Poland.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Flag_of_Saudi_Arabia.svg/125px-Flag_of_Saudi_Arabia.svg.png"},{_id:"629c9c8a5749c4077500eaea",away_score:0,away_scorers:["null"],away_team_id:"11",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"15",id:"23",local_date:"11/26/2022 19:00",matchday:"7",persian_date:"1400-09-05 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0641\u0631\u0627\u0646\u0633\u0647",away_team_fa:"\u062f\u0627\u0646\u0645\u0627\u0631\u06a9",home_team_en:"France",away_team_en:"Denmark",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg/125px-Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Denmark.svg/125px-Flag_of_Denmark.svg.png"},{_id:"629c9c8a5749c4077500eaeb",away_score:0,away_scorers:["null"],away_team_id:"13",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"9",id:"24",local_date:"11/26/2022 22:00",matchday:"7",persian_date:"1400-09-05 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0622\u0631\u0698\u0627\u0646\u062a\u06cc\u0646",away_team_fa:"\u0645\u06a9\u0632\u06cc\u06a9",home_team_en:"Argentina",away_team_en:"Mexico",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Flag_of_Argentina.svg/125px-Flag_of_Argentina.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Flag_of_Mexico.svg/125px-Flag_of_Mexico.svg.png"},{_id:"629c9c8a5749c4077500eaec",away_score:0,away_scorers:["null"],away_team_id:"22",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"20",id:"25",local_date:"11/27/2022 13:00",matchday:"8",persian_date:"1400-09-06 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0698\u0627\u067e\u0646",away_team_fa:"\u06a9\u0627\u0633\u062a\u0627\u0631\u06cc\u06a9\u0627",home_team_en:"Japan",away_team_en:"Costa Rica",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/125px-Flag_of_Japan.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_Costa_Rica_%28state%29.svg/125px-Flag_of_Costa_Rica_%28state%29.svg.png"},{_id:"629c9c8a5749c4077500eaed",away_score:0,away_scorers:["null"],away_team_id:"17",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"23",id:"26",local_date:"11/27/2022 16:00",matchday:"8",persian_date:"1400-09-06 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0628\u0644\u0698\u06cc\u06a9",away_team_fa:"\u0645\u0631\u0627\u06a9\u0634",home_team_en:"Belgium",away_team_en:"Morocco",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Belgium.svg/125px-Flag_of_Belgium.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Flag_of_Morocco.svg/125px-Flag_of_Morocco.svg.png"},{_id:"629c9c8a5749c4077500eaee",away_score:0,away_scorers:["null"],away_team_id:"24",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"18",id:"27",local_date:"11/27/2022 19:00",matchday:"8",persian_date:"1400-09-06 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0631\u0648\u0627\u0633\u06cc",away_team_fa:"\u06a9\u0627\u0646\u0627\u062f\u0627",home_team_en:"Croatia",away_team_en:"Canada",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Flag_of_Croatia.svg/125px-Flag_of_Croatia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Flag_of_Canada_%28Pantone%29.svg/125px-Flag_of_Canada_%28Pantone%29.svg.png"},{_id:"629c9c8a5749c4077500eaef",away_score:0,away_scorers:["null"],away_team_id:"19",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"21",id:"28",local_date:"11/27/2022 22:00",matchday:"8",persian_date:"1400-09-06 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0633\u067e\u0627\u0646\u06cc\u0627",away_team_fa:"\u0622\u0644\u0645\u0627\u0646",home_team_en:"Spain",away_team_en:"Germany",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Spain.svg/125px-Flag_of_Spain.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Flag_of_Germany.svg/125px-Flag_of_Germany.svg.png"},{_id:"629c9c8a5749c4077500eaf0",away_score:0,away_scorers:["null"],away_team_id:"32",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"26",id:"29",local_date:"11/28/2022 13:00",matchday:"9",persian_date:"1400-09-07 13:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0635\u0631\u0628\u0633\u062a\u0627\u0646",away_team_fa:"\u06a9\u0627\u0645\u0631\u0648\u0646",home_team_en:"Serbia",away_team_en:"Cameroon",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Flag_of_Serbia.svg/125px-Flag_of_Serbia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Flag_of_Cameroon.svg/125px-Flag_of_Cameroon.svg.png"},{_id:"629c9c8a5749c4077500eaf1",away_score:0,away_scorers:["null"],away_team_id:"28",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"30",id:"30",local_date:"11/28/2022 16:00",matchday:"9",persian_date:"1400-09-07 16:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0631\u0647 \u062c\u0646\u0648\u0628\u06cc",away_team_fa:"\u063a\u0646\u0627",home_team_en:"South Korea",away_team_en:"Ghana",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Flag_of_South_Korea.svg/125px-Flag_of_South_Korea.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Flag_of_Ghana.svg/125px-Flag_of_Ghana.svg.png"},{_id:"629c9c8a5749c4077500eaf2",away_score:0,away_scorers:["null"],away_team_id:"31",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"25",id:"31",local_date:"11/28/2022 19:00",matchday:"9",persian_date:"1400-09-07 19:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0628\u0631\u0632\u06cc\u0644",away_team_fa:"\u0633\u0648\u0626\u06cc\u0633",home_team_en:"Brazil",away_team_en:"Switzerland",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/125px-Flag_of_Brazil.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Flag_of_Switzerland.svg/100px-Flag_of_Switzerland.svg.png"},{_id:"629c9c8a5749c4077500eaf3",away_score:0,away_scorers:["null"],away_team_id:"29",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"27",id:"32",local_date:"11/28/2022 22:00",matchday:"9",persian_date:"1400-09-07 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u067e\u0631\u062a\u063a\u0627\u0644",away_team_fa:"\u0627\u0631\u0648\u06af\u0648\u0626\u0647",home_team_en:"Portugal",away_team_en:"Uruguay",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/125px-Flag_of_Portugal.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Flag_of_Uruguay.svg/125px-Flag_of_Uruguay.svg.png"},{_id:"629c9c8a5749c4077500eaf4",away_score:0,away_scorers:["null"],away_team_id:"8",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"5",id:"33",local_date:"11/29/2022 22:00",matchday:"10",persian_date:"1400-09-08 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u0646\u06af\u0644\u0633\u062a\u0627\u0646",away_team_fa:"\u0648\u0644\u0632",home_team_en:"England",away_team_en:"Wales",home_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/b/be/Flag_of_England.svg/125px-Flag_of_England.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Flag_of_Wales_%281959%29.svg/125px-Flag_of_Wales_%281959%29.svg.png"},{_id:"629c9c8a5749c4077500eaf5",away_score:0,away_scorers:["null"],away_team_id:"7",finished:"FALSE",group:"B",home_score:0,home_scorers:["null"],home_team_id:"6",id:"34",local_date:"11/29/2022 22:00",matchday:"10",persian_date:"1400-09-08 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u06cc\u0631\u0627\u0646",away_team_fa:"\u0622\u0645\u0631\u06cc\u06a9\u0627",home_team_en:"Iran",away_team_en:"United States",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Flag_of_Iran.svg/125px-Flag_of_Iran.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/125px-Flag_of_the_United_States.svg.png"},{_id:"629c9c8a5749c4077500eaf6",away_score:0,away_scorers:["null"],away_team_id:"3",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"2",id:"35",local_date:"11/29/2022 18:00",matchday:"10",persian_date:"1400-09-08 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0627\u06a9\u0648\u0627\u062f\u0648\u0631",away_team_fa:"\u0633\u0646\u06af\u0627\u0644",home_team_en:"Ecuador",away_team_en:"Senegal",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Flag_of_Ecuador.svg/125px-Flag_of_Ecuador.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Flag_of_Senegal.svg/125px-Flag_of_Senegal.svg.png"},{_id:"629c9c8a5749c4077500eaf7",away_score:0,away_scorers:["null"],away_team_id:"1",finished:"FALSE",group:"A",home_score:0,home_scorers:["null"],home_team_id:"4",id:"36",local_date:"11/29/2022 18:00",matchday:"10",persian_date:"1400-09-08 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0647\u0644\u0646\u062f",away_team_fa:"\u0642\u0637\u0631",home_team_en:"Nederlands",away_team_en:"Qatar",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/Flag_of_the_Netherlands.svg/125px-Flag_of_the_Netherlands.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Qatar.svg/125px-Flag_of_Qatar.svg.png"},{_id:"629c9c8a5749c4077500eaf8",away_score:0,away_scorers:["null"],away_team_id:"16",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"11",id:"37",local_date:"11/29/2022 18:00",matchday:"11",persian_date:"1400-09-08 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u062f\u0627\u0646\u0645\u0627\u0631\u06a9",away_team_fa:"\u0627\u0633\u062a\u0631\u0627\u0644\u06cc\u0627",home_team_en:"Denmark",away_team_en:"Australia",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Flag_of_Denmark.svg/125px-Flag_of_Denmark.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Flag_of_Australia_%28converted%29.svg/125px-Flag_of_Australia_%28converted%29.svg.png"},{_id:"629c9c8a5749c4077500eaf9",away_score:0,away_scorers:["null"],away_team_id:"15",finished:"FALSE",group:"D",home_score:0,home_scorers:["null"],home_team_id:"12",id:"38",local_date:"11/29/2022 18:00",matchday:"11",persian_date:"1400-09-08 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u062a\u0648\u0646\u0633",away_team_fa:"\u0641\u0631\u0627\u0646\u0633\u0647",home_team_en:"Tunisia",away_team_en:"France",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Tunisia.svg/125px-Flag_of_Tunisia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg/125px-Flag_of_France_%281794%E2%80%931815%2C_1830%E2%80%931974%2C_2020%E2%80%93present%29.svg.png"},{_id:"629c9c8a5749c4077500eafa",away_score:0,away_scorers:["null"],away_team_id:"9",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"14",id:"39",local_date:"11/30/2022 22:00",matchday:"11",persian_date:"1400-09-09 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0644\u0647\u0633\u062a\u0627\u0646",away_team_fa:"\u0622\u0631\u0698\u0627\u0646\u062a\u06cc\u0646",home_team_en:"Poland",away_team_en:"Argentina",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/Flag_of_Poland.svg/125px-Flag_of_Poland.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Flag_of_Argentina.svg/125px-Flag_of_Argentina.svg.png"},{_id:"629c9c8a5749c4077500eafb",away_score:0,away_scorers:["null"],away_team_id:"13",finished:"FALSE",group:"C",home_score:0,home_scorers:["null"],home_team_id:"10",id:"40",local_date:"11/30/2022 22:00",matchday:"11",persian_date:"1400-09-09 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0639\u0631\u0628\u0633\u062a\u0627\u0646",away_team_fa:"\u0645\u06a9\u0632\u06cc\u06a9",home_team_en:"Saudi Arabia",away_team_en:"Mexico",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Flag_of_Saudi_Arabia.svg/125px-Flag_of_Saudi_Arabia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Flag_of_Mexico.svg/125px-Flag_of_Mexico.svg.png"},{_id:"629c9c8a5749c4077500eafc",away_score:0,away_scorers:["null"],away_team_id:"23",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"18",id:"41",local_date:"12/1/2022 18:00",matchday:"12",persian_date:"1400-09-10 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0631\u0648\u0627\u0633\u06cc",away_team_fa:"\u0628\u0644\u0698\u06cc\u06a9",home_team_en:"Croatia",away_team_en:"Belgium",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Flag_of_Croatia.svg/125px-Flag_of_Croatia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Flag_of_Belgium.svg/125px-Flag_of_Belgium.svg.png"},{_id:"629c9c8a5749c4077500eafd",away_score:0,away_scorers:["null"],away_team_id:"17",finished:"FALSE",group:"F",home_score:0,home_scorers:["null"],home_team_id:"24",id:"42",local_date:"12/1/2022 18:00",matchday:"12",persian_date:"1400-09-10 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0627\u0646\u0627\u062f\u0627",away_team_fa:"\u0645\u0631\u0627\u06a9\u0634",home_team_en:"Canada",away_team_en:"Morocco",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Flag_of_Canada_%28Pantone%29.svg/125px-Flag_of_Canada_%28Pantone%29.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Flag_of_Morocco.svg/125px-Flag_of_Morocco.svg.png"},{_id:"629c9c8a5749c4077500eafe",away_score:0,away_scorers:["null"],away_team_id:"21",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"20",id:"43",local_date:"12/1/2022 22:00",matchday:"12",persian_date:"1400-09-10 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0698\u0627\u067e\u0646",away_team_fa:"\u0627\u0633\u067e\u0627\u0646\u06cc\u0627",home_team_en:"Japan",away_team_en:"Spain",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/125px-Flag_of_Japan.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Spain.svg/125px-Flag_of_Spain.svg.png"},{_id:"629c9c8a5749c4077500eaff",away_score:0,away_scorers:["null"],away_team_id:"19",finished:"FALSE",group:"E",home_score:0,home_scorers:["null"],home_team_id:"22",id:"44",local_date:"12/1/2022 22:00",matchday:"12",persian_date:"1400-09-10 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0627\u0633\u062a\u0627\u0631\u06cc\u06a9\u0627",away_team_fa:"\u0622\u0644\u0645\u0627\u0646",home_team_en:"Costa Rica",away_team_en:"Germany",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Flag_of_Costa_Rica_%28state%29.svg/125px-Flag_of_Costa_Rica_%28state%29.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Flag_of_Germany.svg/125px-Flag_of_Germany.svg.png"},{_id:"629c9c8a5749c4077500eb00",away_score:0,away_scorers:["null"],away_team_id:"29",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"28",id:"45",local_date:"12/2/2022 18:00",matchday:"13",persian_date:"1400-09-11 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u063a\u0646\u0627",away_team_fa:"\u0627\u0631\u0648\u06af\u0648\u0626\u0647",home_team_en:"Ghana",away_team_en:"Uruguay",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Flag_of_Ghana.svg/125px-Flag_of_Ghana.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Flag_of_Uruguay.svg/125px-Flag_of_Uruguay.svg.png"},{_id:"629c9c8a5749c4077500eb01",away_score:0,away_scorers:["null"],away_team_id:"27",finished:"FALSE",group:"H",home_score:0,home_scorers:["null"],home_team_id:"30",id:"46",local_date:"12/2/2022 18:00",matchday:"13",persian_date:"1400-09-11 18:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u06a9\u0631\u0647 \u062c\u0646\u0648\u0628\u06cc",away_team_fa:"\u067e\u0631\u062a\u063a\u0627\u0644",home_team_en:"South Korea",away_team_en:"Portugal",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Flag_of_South_Korea.svg/125px-Flag_of_South_Korea.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/125px-Flag_of_Portugal.svg.png"},{_id:"629c9c8a5749c4077500eb02",away_score:0,away_scorers:["null"],away_team_id:"31",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"26",id:"47",local_date:"12/2/2022 22:00",matchday:"13",persian_date:"1400-09-11 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0635\u0631\u0628\u0633\u062a\u0627\u0646",away_team_fa:"\u0633\u0648\u0626\u06cc\u0633",home_team_en:"Serbia",away_team_en:"Switzerland",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Flag_of_Serbia.svg/125px-Flag_of_Serbia.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Flag_of_Switzerland.svg/100px-Flag_of_Switzerland.svg.png"},{_id:"629c9c8a5749c4077500eb03",away_score:0,away_scorers:["null"],away_team_id:"32",finished:"FALSE",group:"G",home_score:0,home_scorers:["null"],home_team_id:"25",id:"48",local_date:"12/2/2022 22:00",matchday:"13",persian_date:"1400-09-11 22:30",stadium_id:"1",time_elapsed:"notstarted",type:"group",home_team_fa:"\u0628\u0631\u0632\u06cc\u0644",away_team_fa:"\u06a9\u0627\u0645\u0631\u0648\u0646",home_team_en:"Brazil",away_team_en:"Cameroon",home_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Flag_of_Brazil.svg/125px-Flag_of_Brazil.svg.png",away_flag:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Flag_of_Cameroon.svg/125px-Flag_of_Cameroon.svg.png"}],firebasePrediction:[],allPredictions:[]},reducers:{setAllMatch:function(e,t){e.allMatch=t.payload},setFirebasePrediction:function(e,t){e.firebasePrediction=t.payload},setAllFirebasePrediction:function(e,t){e.allPredictions=t.payload}}}),Ai=Ni.actions,Pi=(Ai.setAllMatch,Ai.setFirebasePrediction),Ri=Ai.setAllFirebasePrediction,Di=(Ai.setMatch,Ni.reducer);function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(this,arguments)}function Li(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Fi=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Mi(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),te((function(e,t){var n=e.location;return J("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:X(t)}),null,n)));var u=o.current,s=c(t.useState({action:u.action,location:u.location}),2),l=s[0],f=s[1];return t.useLayoutEffect((function(){return u.listen(f)}),[u]),t.createElement(Xe,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}var Ui=t.forwardRef((function(e,n){var r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,f=Li(e,Fi),h=function(e,n){var r=(void 0===n?{}:n).relative;je()||fe(!1);var i=t.useContext(Le),a=i.basename,o=i.navigator,u=Be(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:me([a,c])),o.createHref({pathname:f,search:l,hash:s})}(c,{relative:i}),d=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=qe(),l=Ve(),f=Be(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:X(l)===X(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:i});return t.createElement("a",Oi({},f,{href:h,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:s}))}));var ji,Vi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ji||(ji={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Vi||(Vi={}));var qi=n(184),Bi=function(){return(0,qi.jsxs)("ul",{children:[(0,qi.jsx)("li",{children:(0,qi.jsx)(Ui,{to:"/sweptakes",children:"Prediction"})}),(0,qi.jsx)("li",{children:(0,qi.jsx)(Ui,{to:"/sweptakes/Result",children:"Results"})}),(0,qi.jsx)("li",{children:(0,qi.jsx)(Ui,{to:"/sweptakes/Standing",children:"Standing"})})]})};function zi(){zi=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==q(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(k.prototype),s(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Wi(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(wu){return void n(wu)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ki(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Wi(a,r,i,o,u,"next",e)}function u(e){Wi(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Hi(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var Gi=!1,Qi=!1,Yi="${JSCORE_VERSION}",$i=function(e,t){if(!e)throw Ji(t)},Ji=function(e){return new Error("Firebase Database ("+Yi+") INTERNAL ASSERT FAILED: "+e)},Xi=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Zi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xi(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ea=function(e){var t=Xi(e);return Zi.encodeByteArray(t,!0)},ta=function(e){return ea(e).replace(/\./g,"")},na=function(e){try{return Zi.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ra(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ra(e[n],t[n]));return e}function ia(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function aa(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ia())}function oa(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function ua(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function sa(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ca(){var e=ia();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function la(){return!0===Gi||!0===Qi}function fa(){return"object"===typeof indexedDB}var ha=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},da=function(){try{return ha()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&na(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},pa=function(e){var t=function(e){var t,n;return null===(n=null===(t=da())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},va=function(){var e;return null===(e=da())||void 0===e?void 0:e.config},ma=function(){function e(){var t=this;O(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return F(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ya(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ta(JSON.stringify({alg:"none",type:"JWT"})),ta(JSON.stringify(a)),""].join(".")}var ga=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(B(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(B(a),_a.prototype.create),a}return F(n)}(H(Error)),_a=function(){function e(t,n,r){O(this,e),this.service=t,this.serviceName=n,this.errors=r}return F(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ka(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ga(n,a,t);return o}}]),e}();function ka(e,t){return e.replace(wa,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var wa=/\{\$([^}]+)}/g;function ba(e){return JSON.parse(e)}function xa(e){return JSON.stringify(e)}var Ia=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ba(na(a[0])||""),n=ba(na(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Ea(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sa(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ta(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ca(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Na(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Aa(u)&&Aa(s)){if(!Na(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Aa(e){return null!==e&&"object"===typeof e}function Pa(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ra(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Da(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Oa=function(){function e(){O(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return F(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function La(e,t){var n=new Fa(e,t);return n.subscribe.bind(n)}var Fa=function(){function e(t,n){var r=this;O(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return F(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Hi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ma),void 0===r.error&&(r.error=Ma),void 0===r.complete&&(r.complete=Ma);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ma(){}function Ua(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ja=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Va(e){return e&&e._delegate?e._delegate:e}var qa=function(){function e(t,n,r){O(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return F(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ba="[DEFAULT]",za=function(){function e(t,n){O(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return F(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ma;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch(s){}var t,n=Hi(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(D(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),D(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Hi(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(IO){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ba?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(IO){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba;return this.component?this.component.multipleInstances?e:Ba:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Wa,Ka,Ha=function(){function e(t){O(this,e),this.name=t,this.providers=new Map}return F(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new za(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ga=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ka||(Ka={}));var Qa={debug:Ka.DEBUG,verbose:Ka.VERBOSE,info:Ka.INFO,warn:Ka.WARN,error:Ka.ERROR,silent:Ka.SILENT},Ya=Ka.INFO,$a=(Vr(Wa={},Ka.DEBUG,"log"),Vr(Wa,Ka.VERBOSE,"log"),Vr(Wa,Ka.INFO,"info"),Vr(Wa,Ka.WARN,"warn"),Vr(Wa,Ka.ERROR,"error"),Wa),Ja=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=$a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Xa=function(){function e(t){O(this,e),this.name=t,this._logLevel=Ya,this._logHandler=Ja,this._userLogHandler=null,Ga.push(this)}return F(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ka))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Qa[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ka.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ka.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ka.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ka.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ka.INFO].concat(t)),this._logHandler.apply(this,[this,Ka.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ka.WARN].concat(t)),this._logHandler.apply(this,[this,Ka.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ka.ERROR].concat(t)),this._logHandler.apply(this,[this,Ka.ERROR].concat(t))}}]),e}();var Za,eo;var to=new WeakMap,no=new WeakMap,ro=new WeakMap,io=new WeakMap,ao=new WeakMap;var oo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return no.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ro.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return co(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function uo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(eo||(eo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(lo(this),n),co(to.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return co(e.apply(lo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[lo(this),t].concat(r));return ro.set(a,t.sort?t.sort():[t]),co(a)}}function so(e){return"function"===typeof e?uo(e):(e instanceof IDBTransaction&&function(e){if(!no.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));no.set(e,t)}}(e),t=e,(Za||(Za=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,oo):e);var t}function co(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(co(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&to.set(t,e)})).catch((function(){})),ao.set(t,e),t}(e);if(io.has(e))return io.get(e);var t=so(e);return t!==e&&(io.set(e,t),ao.set(t,e)),t}var lo=function(e){return ao.get(e)};var fo,ho,po=["get","getKey","getAll","getAllKeys","count"],vo=["put","add","delete","clear"],mo=new Map;function yo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(mo.get(t))return mo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=vo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||po.includes(n))){var a=function(){var e=Ki(zi().mark((function e(t){var a,o,u,s,c,l,f=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return mo.set(t,a),a}}}oo=function(e){return Br(Br({},e),{},{get:function(t,n,r){return yo(t,n)||e.get(t,n,r)},has:function(t,n){return!!yo(t,n)||e.has(t,n)}})}(oo);var go=function(){function e(t){O(this,e),this.container=t}return F(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _o="@firebase/app",ko="0.8.3",wo=new Xa("@firebase/app"),bo="[DEFAULT]",xo=(Vr(fo={},_o,"fire-core"),Vr(fo,"@firebase/app-compat","fire-core-compat"),Vr(fo,"@firebase/analytics","fire-analytics"),Vr(fo,"@firebase/analytics-compat","fire-analytics-compat"),Vr(fo,"@firebase/app-check","fire-app-check"),Vr(fo,"@firebase/app-check-compat","fire-app-check-compat"),Vr(fo,"@firebase/auth","fire-auth"),Vr(fo,"@firebase/auth-compat","fire-auth-compat"),Vr(fo,"@firebase/database","fire-rtdb"),Vr(fo,"@firebase/database-compat","fire-rtdb-compat"),Vr(fo,"@firebase/functions","fire-fn"),Vr(fo,"@firebase/functions-compat","fire-fn-compat"),Vr(fo,"@firebase/installations","fire-iid"),Vr(fo,"@firebase/installations-compat","fire-iid-compat"),Vr(fo,"@firebase/messaging","fire-fcm"),Vr(fo,"@firebase/messaging-compat","fire-fcm-compat"),Vr(fo,"@firebase/performance","fire-perf"),Vr(fo,"@firebase/performance-compat","fire-perf-compat"),Vr(fo,"@firebase/remote-config","fire-rc"),Vr(fo,"@firebase/remote-config-compat","fire-rc-compat"),Vr(fo,"@firebase/storage","fire-gcs"),Vr(fo,"@firebase/storage-compat","fire-gcs-compat"),Vr(fo,"@firebase/firestore","fire-fst"),Vr(fo,"@firebase/firestore-compat","fire-fst-compat"),Vr(fo,"fire-js","fire-js"),Vr(fo,"firebase","fire-js-all"),fo),Io=new Map,Eo=new Map;function So(e,t){try{e.container.addComponent(t)}catch(n){wo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function To(e,t){e.container.addOrOverwriteComponent(t)}function Co(e){var t=e.name;if(Eo.has(t))return wo.debug("There were multiple attempts to register component ".concat(t,".")),!1;Eo.set(t,e);var n,r=Hi(Io.values());try{for(r.s();!(n=r.n()).done;){So(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function No(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bo;No(e,t).clearInstance(n)}function Po(){Eo.clear()}var Ro=(Vr(ho={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Vr(ho,"bad-app-name","Illegal App name: '{$appName}"),Vr(ho,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Vr(ho,"app-deleted","Firebase App named '{$appName}' already deleted"),Vr(ho,"no-options","Need to provide options, when not being deployed to hosting via source."),Vr(ho,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Vr(ho,"invalid-log-argument","First argument to `onLog` must be null or a function."),Vr(ho,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Vr(ho,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Vr(ho,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Vr(ho,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ho),Do=new _a("app","Firebase",Ro),Oo=function(){function e(t,n,r){var i=this;O(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qa("app",(function(){return i}),"PUBLIC"))}return F(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Do.create("app-deleted",{appName:this._name})}}]),e}(),Lo="9.13.0";function Fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:bo,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Do.create("bad-app-name",{appName:String(a)});if(n||(n=va()),!n)throw Do.create("no-options");var o=Io.get(a);if(o){if(Na(n,o.options)&&Na(i,o.config))return o;throw Do.create("duplicate-app",{appName:a})}var u,s=new Ha(a),c=Hi(Eo.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Oo(n,i,s);return Io.set(a,f),f}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo,t=Io.get(e);if(!t&&e===bo)return Fo();if(!t)throw Do.create("no-app",{appName:e});return t}function Uo(){return Array.from(Io.values())}function jo(e){return Vo.apply(this,arguments)}function Vo(){return(Vo=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Io.has(n)){e.next=6;break}return Io.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(e,t,n){var r,i=null!==(r=xo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wo.warn(u.join(" "))}Co(new qa("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Bo(e,t){if(null!==e&&"function"!==typeof e)throw Do.create("invalid-log-argument");!function(e,t){var n,r=Hi(Ga);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Qa[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ka[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function zo(e){var t;t=e,Ga.forEach((function(e){e.setLogLevel(t)}))}var Wo="firebase-heartbeat-store",Ko=null;function Ho(){return Ko||(Ko=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=co(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(co(u.result),e.oldVersion,e.newVersion,co(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Wo)}}).catch((function(e){throw Do.create("idb-open",{originalErrorMessage:e.message})}))),Ko}function Go(e){return Qo.apply(this,arguments)}function Qo(){return Qo=Ki(zi().mark((function e(t){var n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ho();case 3:return r=e.sent,e.abrupt("return",r.transaction(Wo).objectStore(Wo).get(Jo(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ga?wo.warn(e.t0.message):(i=Do.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),wo.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Qo.apply(this,arguments)}function Yo(e,t){return $o.apply(this,arguments)}function $o(){return $o=Ki(zi().mark((function e(t,n){var r,i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ho();case 3:return i=e.sent,a=i.transaction(Wo,"readwrite"),o=a.objectStore(Wo),e.next=8,o.put(n,Jo(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ga?wo.warn(e.t0.message):(u=Do.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),wo.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),$o.apply(this,arguments)}function Jo(e){return"".concat(e.name,"!").concat(e.options.appId)}var Xo=function(){function e(t){var n=this;O(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new nu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return F(e,[{key:"triggerHeartbeat",value:function(){var e=Ki(zi().mark((function e(){var t,n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Zo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Zo(),n=eu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ta(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zo(){return(new Date).toISOString().substring(0,10)}function eu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Hi(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ru(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ru(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var tu,nu=function(){function e(t){O(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return F(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(wu){t(wu)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Go(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Yo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Yo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(D(r.heartbeats),D(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ru(e){return ta(JSON.stringify({version:2,heartbeats:e})).length}tu="",Co(new qa("platform-logger",(function(e){return new go(e)}),"PRIVATE")),Co(new qa("heartbeat",(function(e){return new Xo(e)}),"PRIVATE")),qo(_o,ko,tu),qo(_o,ko,"esm2017"),qo("fire-js","");var iu="@firebase/database",au="0.13.10",ou="";var uu=function(){function e(t){O(this,e),this.domStorage_=t,this.prefix_="firebase:"}return F(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xa(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ba(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),su=function(){function e(){O(this,e),this.cache_={},this.isInMemoryStorage=!0}return F(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ea(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),cu=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new uu(t)}}catch(n){}return new su},lu=cu("localStorage"),fu=cu("sessionStorage"),hu=new Xa("@firebase/database"),du=function(){var e=1;return function(){return e++}}(),pu=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,$i(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Oa;n.update(t);var r=n.digest();return Zi.encodeByteArray(r)},vu=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?xa(r):r,t+=" "}return t},mu=null,yu=!0,gu=function(e,t){$i(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(hu.logLevel=Ka.VERBOSE,mu=hu.log.bind(hu),t&&fu.set("logging_enabled",!0)):"function"===typeof e?mu=e:(mu=null,fu.remove("logging_enabled"))},_u=function(){if(!0===yu&&(yu=!1,null===mu&&!0===fu.get("logging_enabled")&&gu(!0)),mu){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=vu.apply(null,t);mu(r)}},ku=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];_u.apply(void 0,[e].concat(n))}},wu=function(){var e="FIREBASE INTERNAL ERROR: "+vu.apply(void 0,arguments);hu.error(e)},bu=function(){var e="FIREBASE FATAL ERROR: ".concat(vu.apply(void 0,arguments));throw hu.error(e),new Error(e)},xu=function(){var e="FIREBASE WARNING: "+vu.apply(void 0,arguments);hu.warn(e)},Iu=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Eu="[MIN_NAME]",Su="[MAX_NAME]",Tu=function(e,t){if(e===t)return 0;if(e===Eu||t===Su)return-1;if(t===Eu||e===Su)return 1;var n=Mu(e),r=Mu(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Cu=function(e,t){return e===t?0:e<t?-1:1},Nu=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+xa(t))},Au=function e(t){if("object"!==typeof t||null===t)return xa(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=xa(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Pu=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Ru(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Du=function(e){$i(!Iu(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ou=new RegExp("^-?(0*)\\d{1,10}$"),Lu=-2147483648,Fu=2147483647,Mu=function(e){if(Ou.test(e)){var t=Number(e);if(t>=Lu&&t<=Fu)return t}return null},Uu=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw xu("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ju=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Vu=function(){function e(t,n){var r=this;O(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return F(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){xu('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),qu=function(){function e(t,n,r){var i=this;O(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return F(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(_u("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xu(e)}}]),e}(),Bu=function(){function e(t){O(this,e),this.accessToken=t}return F(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Bu.OWNER="owner";var zu="5",Wu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ku="websocket",Hu="long_polling",Gu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];O(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lu.get("host:"+t)||this._host}return F(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lu.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Qu(e,t,n){var r;if($i("string"===typeof t,"typeof type must == string"),$i("object"===typeof n,"typeof params must == object"),t===Ku)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Hu)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Ru(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Yu=function(){function e(){O(this,e),this.counters_={}}return F(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ea(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ra(void 0,this.counters_)}}]),e}(),$u={},Ju={};function Xu(e){var t=e.toString();return $u[t]||($u[t]=new Yu),$u[t]}var Zu=function(){function e(t){O(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return F(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Uu((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),es="start",ts="close",ns=function(){function e(t,n,r,i,a,o,u){var s=this;O(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ku(t),this.stats_=Xu(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Qu(n,Hu,e)}}return F(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(la()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new rs((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===es)n.id=a,n.password=o;else{if(i!==ts)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=zu,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Wu.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=xa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ea(t),r=Pu(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!la()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=xa(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!la()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),rs=function(){function e(t,n,r,i){if(O(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,la())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=du(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){_u("frame writing exception"),u.stack&&_u(u.stack),_u(u)}}}return F(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;la()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){_u("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_u("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),is=null;"undefined"!==typeof MozWebSocket?is=MozWebSocket:"undefined"!==typeof WebSocket&&(is=WebSocket);var as=function(){function e(t,n,r,i,a,o,u){O(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ku(this.connId),this.stats_=Xu(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return F(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lu.set("previous_websocket_failure",!0);try{var r;if(la()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(zu,"/").concat(ou,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new is(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){lu.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ba(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if($i(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=xa(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Pu(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=zu,!la()&&"undefined"!==typeof location&&location.hostname&&Wu.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Qu(e,Ku,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==is&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return lu.isInMemoryStorage||!0===lu.get("previous_websocket_failure")}}]),e}();as.responsesRequiredToBeHealthy=2,as.healthyTimeout=3e4;var os=function(){function e(t){O(this,e),this.initTransports_(t)}return F(e,[{key:"initTransports_",value:function(t){var n=as&&as.isAvailable(),r=n&&!as.previouslyFailed();if(t.webSocketOnly&&(n||xu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[as];else{var i,a=this.transports_=[],o=Hi(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ns,as]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();os.globalTransportInitialized_=!1;var us=function(){function e(t,n,r,i,a,o,u,s,c,l){O(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ku("c:"+this.id+":"),this.transportManager_=new os(n),this.log_("Connection created"),this.start_()}return F(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ju((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Nu("t",e),n=Nu("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Nu("t",e),n=Nu("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Nu("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?wu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wu("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zu!==n&&xu("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ju((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ju((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),ss=function(){function e(){O(this,e)}return F(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),cs=function(){function e(t){O(this,e),this.allowedEvents_=t,this.listeners_={},$i(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return F(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=D(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){$i(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),ls=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||aa()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return F(n,[{key:"getInitialEvent",value:function(e){return $i("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(cs),fs=function(){function e(t,n){if(O(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return F(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function hs(){return new fs("")}function ds(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ps(e){return e.pieces_.length-e.pieceNum_}function vs(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new fs(e.pieces_,t)}function ms(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ys(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function gs(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fs(t,0)}function _s(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fs)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new fs(n,0)}function ks(e){return e.pieceNum_>=e.pieces_.length}function ws(e,t){var n=ds(e),r=ds(t);if(null===n)return t;if(n===r)return ws(vs(e),vs(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function bs(e,t){if(ps(e)!==ps(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function xs(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ps(e)>ps(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Is=F((function e(t,n){O(this,e),this.errorPrefix_=n,this.parts_=ys(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ja(this.parts_[r]);Es(this)}));function Es(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ss(e))}function Ss(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ts=function(e){U(n,e);var t=W(n);function n(){var e,r,i;return O(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return F(n,[{key:"getInitialEvent",value:function(e){return $i("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(cs),Cs=1e3,Ns=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u,s,c){var l;if(O(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=ku("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Cs,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!la())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ts.getInstance().on("visible",l.onVisible_,B(l)),-1===e.host.indexOf("fblocal")&&ls.getInstance().on("online",l.onOnline_,B(l)),l}return F(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(xa(i)),$i(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ma,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),$i(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$i(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ia(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ia(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),$i(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+xa(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):wu("Unrecognized action received from server: "+xa(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;$i(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Cs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Cs),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ki(zi().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,p,v,m,y=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){$i(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=c(d,2),v=p[0],m=p[1],u?_u("getToken() completed but was canceled"):(_u("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new us(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){xu(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&xu(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){_u("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){_u("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ta(this.interruptReasons_)&&(this.reconnectDelay_=Cs,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Au(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new fs(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){_u("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){_u("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Hi(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Hi(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";la()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ou.replace(/\./g,"-")]=1,aa()?e["framework.cordova"]=1:sa()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=ls.getInstance().currentlyOnline();return Ta(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ea(e,"w")){var n=Sa(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();xu("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(ss);Ns.nextPersistentConnectionId_=0,Ns.nextConnectionId_=0;var As,Ps=function(){function e(t,n){O(this,e),this.name=t,this.node=n}return F(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Rs=function(){function e(){O(this,e)}return F(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Ps(Eu,e),r=new Ps(Eu,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Ps.MIN}}]),e}(),Ds=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"compare",value:function(e,t){return Tu(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ji("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Ps.MIN}},{key:"maxPost",value:function(){return new Ps(Su,As)}},{key:"makePost",value:function(e,t){return $i("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ps(e,As)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return As},set:function(e){As=e}}]),n}(Rs),Os=new Ds,Ls=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;O(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return F(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Fs=function(){function e(t,n,r,i,a){O(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:js.EMPTY_NODE,this.right=null!=a?a:js.EMPTY_NODE}return F(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return js.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return js.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Fs.RED=!0,Fs.BLACK=!1;var Ms,Us=function(){function e(){O(this,e)}return F(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Fs(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),js=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;O(this,e),this.comparator_=t,this.root_=n}return F(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fs.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fs.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Ls(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Ls(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Ls(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Ls(this.root_,null,this.comparator_,!0,e)}}]),e}();function Vs(e,t){return Tu(e.name,t.name)}function qs(e,t){return Tu(e,t)}js.EMPTY_NODE=new Us;var Bs,zs,Ws,Ks=function(e){return"number"===typeof e?"number:"+Du(e):"string:"+e},Hs=function(e){if(e.isLeafNode()){var t=e.val();$i("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ea(t,".sv"),"Priority must be a string or number.")}else $i(e===Ms||e.isEmpty(),"priority of unexpected type.");$i(e===Ms||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;O(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,$i(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Hs(this.priorityNode_)}return F(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ks(t)?this:".priority"===ds(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ds(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:($i(".priority"!==r||1===ps(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(vs(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ks(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Du(this.value_):this.value_,this.lazyHash_=pu(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:($i(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return $i(i>=0,"Unknown leaf type: "+n),$i(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Bs},set:function(e){Bs=e}}]),e}();Gs.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Qs,Ys,$s=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Ps.MIN}},{key:"maxPost",value:function(){return new Ps(Su,new Gs("[PRIORITY-POST]",Ws))}},{key:"makePost",value:function(e,t){var n=zs(e);return new Ps(t,new Gs("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Rs),Js=new $s,Xs=Math.log(2),Zs=function(){function e(t){O(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Xs,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return F(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),ec=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Fs(o,a.node,Fs.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Fs(o,a.node,Fs.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new Fs(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,Fs.BLACK):(u(f,Fs.BLACK),u(f,Fs.RED))}return a}(new Zs(e.length));return new js(r||t,a)},tc={},nc=function(){function e(t,n){O(this,e),this.indexes_=t,this.indexSet_=n}return F(e,[{key:"get",value:function(e){var t=Sa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof js?t:null}},{key:"hasIndex",value:function(e){return Ea(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){$i(t!==Os,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Ps.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?ec(i,t.getCompare()):tc;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ca(this.indexes_,(function(e,i){var a=Sa(r.indexSet_,i);if($i(a,"Missing index implementation for "+i),e===tc){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Ps.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),ec(o,a.getCompare())}return tc}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Ps(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ca(this.indexes_,(function(e){if(e===tc)return e;var r=n.get(t.name);return r?e.remove(new Ps(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return $i(tc&&Js,"ChildrenNode.ts has not been loaded"),Qs=Qs||new e({".priority":tc},{".priority":Js})}}]),e}(),rc=function(){function e(t,n,r){O(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Hs(this.priorityNode_),this.children_.isEmpty()&&$i(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return F(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Ys}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ys:t}},{key:"getChild",value:function(e){var t=ds(e);return null===t?this:this.getImmediateChild(t).getChild(vs(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if($i(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Ps(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Ys:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ds(e);if(null===n)return t;$i(".priority"!==ds(e)||1===ps(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(vs(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Js,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Ks(this.getPriority().val())+":"),this.forEachChild(Js,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":pu(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ps(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Ps(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Ps(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Ps.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Ps.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ic?-1:0}},{key:"withIndex",value:function(t){if(t===Os||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Os||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Js),r=t.getIterator(Js),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Os?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Ys||(Ys=new e(new js(qs),null,nc.Default))}}]),e}();rc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var ic=new(function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,new js(qs),rc.EMPTY_NODE,nc.Default)}return F(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return rc.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(rc));Object.defineProperties(Ps,{MIN:{value:new Ps(Eu,rc.EMPTY_NODE)},MAX:{value:new Ps(Su,ic)}}),Ds.__EMPTY_NODE=rc.EMPTY_NODE,Gs.__childrenNodeConstructor=rc,Ms=ic,function(e){Ws=e}(ic);function ac(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return rc.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),$i(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Gs(n,ac(t))}if(e instanceof Array){var r=rc.EMPTY_NODE;return Ru(e,(function(t,n){if(Ea(e,t)&&"."!==t.substring(0,1)){var i=ac(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(ac(t))}var i=[],a=!1,o=e;if(Ru(o,(function(e,t){if("."!==e.substring(0,1)){var n=ac(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Ps(e,n)))}})),0===i.length)return rc.EMPTY_NODE;var u=ec(i,Vs,(function(e){return e.name}),qs);if(a){var s=ec(i,Js.getCompare());return new rc(u,ac(t),new nc({".priority":s},{".priority":Js}))}return new rc(u,ac(t),nc.Default)}!function(e){zs=e}(ac);var oc=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).indexPath_=e,$i(!ks(e)&&".priority"!==ds(e),"Can't create PathIndex with empty path or .priority key"),r}return F(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=ac(e),r=rc.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ps(t,r)}},{key:"maxPost",value:function(){var e=rc.EMPTY_NODE.updateChild(this.indexPath_,ic);return new Ps(Su,e)}},{key:"toString",value:function(){return ys(this.indexPath_,0).join("/")}}]),n}(Rs),uc=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Tu(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Ps.MIN}},{key:"maxPost",value:function(){return Ps.MAX}},{key:"makePost",value:function(e,t){var n=ac(e);return new Ps(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Rs),sc=new uc,cc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function lc(e){return{type:"value",snapshotNode:e}}function fc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function hc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function dc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var pc=function(){function e(t){O(this,e),this.index_=t}return F(e,[{key:"updateChild",value:function(e,t,n,r,i,a){$i(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(hc(t,o)):$i(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(fc(t,n)):a.trackChildChange(dc(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Js,(function(e,r){t.hasChild(e)||n.trackChildChange(hc(e,r))})),t.isLeafNode()||t.forEachChild(Js,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(dc(t,r,i))}else n.trackChildChange(fc(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?rc.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),vc=function(){function e(t){O(this,e),this.indexedFilter_=new pc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return F(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Ps(t,n))||(n=rc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=rc.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(rc.EMPTY_NODE);var i=this;return t.forEachChild(Js,(function(e,t){i.matches(new Ps(e,t))||(r=r.updateImmediateChild(e,rc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),mc=function(){function e(t){O(this,e),this.rangedFilter_=new vc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return F(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Ps(t,n))||(n=rc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=rc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=rc.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(rc.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,rc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;$i(u.numChildren()===this.limit_,"");var s=new Ps(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(dc(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(hc(t,f));var p=u.updateImmediateChild(t,rc.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(fc(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(hc(c.name,c.node)),i.trackChildChange(fc(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,rc.EMPTY_NODE)):e}}]),e}(),yc=function(){function e(){O(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Js}return F(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return $i(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return $i(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return $i(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return $i(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Su}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return $i(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Js}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function gc(e){var t,n={};return e.isDefault()||(e.index_===Js?t="$priority":e.index_===sc?t="$value":e.index_===Os?t="$key":($i(e.index_ instanceof oc,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=xa(t),e.startSet_&&(n.startAt=xa(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+xa(e.indexStartName_))),e.endSet_&&(n.endAt=xa(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+xa(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function _c(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Js&&(t.i=e.index_.toString()),t}var kc=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=ku("p:rest:"),o.listens_={},o}return F(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=gc(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Sa(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=gc(e._queryParams),r=e._path.toString(),i=new ma;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Pa(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ba(l.responseText)}catch(n){xu("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&xu("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:($i(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(ss),wc=function(){function e(){O(this,e),this.rootNode_=rc.EMPTY_NODE}return F(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function bc(){return{value:null,children:new Map}}function xc(e,t,n){if(ks(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ds(t);e.children.has(r)||e.children.set(r,bc()),xc(e.children.get(r),t=vs(t),n)}}function Ic(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ic(r,new fs(t.toString()+"/"+e),n)}))}var Ec,Sc=function(){function e(t){O(this,e),this.collection_=t,this.last_=null}return F(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ru(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Tc=function(){function e(t,n){O(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Sc(t);var r=1e4+2e4*Math.random();ju(this.reportStats_.bind(this),Math.floor(r))}return F(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Ru(t,(function(t,i){i>0&&Ea(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),ju(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Cc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ec||(Ec={}));var Nc,Ac=function(){function e(t,n,r){O(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ec.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return F(e,[{key:"operationForChild",value:function(t){if(ks(this.path)){if(null!=this.affectedTree.value)return $i(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new fs(t));return new e(hs(),n,this.revert)}return $i(ds(this.path)===t,"operationForChild called for unrelated child."),new e(vs(this.path),this.affectedTree,this.revert)}}]),e}(),Pc=function(){function e(t,n){O(this,e),this.source=t,this.path=n,this.type=Ec.LISTEN_COMPLETE}return F(e,[{key:"operationForChild",value:function(t){return ks(this.path)?new e(this.source,hs()):new e(this.source,vs(this.path))}}]),e}(),Rc=function(){function e(t,n,r){O(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ec.OVERWRITE}return F(e,[{key:"operationForChild",value:function(t){return ks(this.path)?new e(this.source,hs(),this.snap.getImmediateChild(t)):new e(this.source,vs(this.path),this.snap)}}]),e}(),Dc=function(){function e(t,n,r){O(this,e),this.source=t,this.path=n,this.children=r,this.type=Ec.MERGE}return F(e,[{key:"operationForChild",value:function(t){if(ks(this.path)){var n=this.children.subtree(new fs(t));return n.isEmpty()?null:n.value?new Rc(this.source,hs(),n.value):new e(this.source,hs(),n)}return $i(ds(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,vs(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Oc=function(){function e(t,n,r){O(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return F(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ks(e))return this.isFullyInitialized()&&!this.filtered_;var t=ds(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Lc=F((function e(t){O(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Fc(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ji("Should only compare child_ events.");var r=new Ps(t.childName,t.snapshotNode),i=new Ps(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Mc(e,t){return{eventCache:e,serverCache:t}}function Uc(e,t,n,r){return Mc(new Oc(t,n,r),e.serverCache)}function jc(e,t,n,r){return Mc(e.eventCache,new Oc(t,n,r))}function Vc(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function qc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Bc=function(){return Nc||(Nc=new js(Cu)),Nc},zc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bc();O(this,e),this.value=t,this.children=n}return F(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:hs(),value:this.value};if(ks(e))return null;var n=ds(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(vs(e),t);return null!=i?{path:_s(new fs(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ks(t))return this;var n=ds(t),r=this.children.get(n);return null!==r?r.subtree(vs(t)):new e(null)}},{key:"set",value:function(t,n){if(ks(t))return new e(n,this.children);var r=ds(t),i=(this.children.get(r)||new e(null)).set(vs(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ks(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ds(t),r=this.children.get(n);if(r){var i,a=r.remove(vs(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ks(e))return this.value;var t=ds(e),n=this.children.get(t);return n?n.get(vs(e)):null}},{key:"setTree",value:function(t,n){if(ks(t))return n;var r,i=ds(t),a=(this.children.get(i)||new e(null)).setTree(vs(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(hs(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(_s(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,hs(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ks(e))return null;var i=ds(e),a=this.children.get(i);return a?a.findOnPath_(vs(e),_s(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,hs(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ks(t))return this;this.value&&r(n,this.value);var i=ds(t),a=this.children.get(i);return a?a.foreachOnPath_(vs(t),_s(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(hs(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(_s(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Ru(t,(function(e,t){n=n.set(new fs(e),t)})),n}}]),e}(),Wc=function(){function e(t){O(this,e),this.writeTree_=t}return F(e,null,[{key:"empty",value:function(){return new e(new zc(null))}}]),e}();function Kc(e,t,n){if(ks(t))return new Wc(new zc(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=ws(i,t);return a=a.updateChild(o,n),new Wc(e.writeTree_.set(i,a))}var u=new zc(n),s=e.writeTree_.setTree(t,u);return new Wc(s)}function Hc(e,t,n){var r=e;return Ru(n,(function(e,n){r=Kc(r,_s(t,e),n)})),r}function Gc(e,t){if(ks(t))return Wc.empty();var n=e.writeTree_.setTree(t,new zc(null));return new Wc(n)}function Qc(e,t){return null!=Yc(e,t)}function Yc(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ws(n.path,t)):null}function $c(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Js,(function(e,n){t.push(new Ps(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ps(e,n.value))})),t}function Jc(e,t){if(ks(t))return e;var n=Yc(e,t);return new Wc(null!=n?new zc(n):e.writeTree_.subtree(t))}function Xc(e){return e.writeTree_.isEmpty()}function Zc(e,t){return el(hs(),e.writeTree_,t)}function el(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?($i(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=el(_s(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(_s(e,".priority"),r)),n}function tl(e,t){return vl(t,e)}function nl(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function rl(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));$i(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&il(u,r.path)?i=!1:xs(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=ol(e.allWrites,al,hs()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Gc(e.visibleWrites,r.path):Ru(r.children,(function(t){e.visibleWrites=Gc(e.visibleWrites,_s(r.path,t))}));return!0}return!1}function il(e,t){if(e.snap)return xs(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&xs(_s(e.path,n),t))return!0;return!1}function al(e){return e.visible}function ol(e,t,n){for(var r=Wc.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)xs(n,o)?r=Kc(r,u=ws(n,o),a.snap):xs(o,n)&&(u=ws(o,n),r=Kc(r,hs(),a.snap.getChild(u)));else{if(!a.children)throw Ji("WriteRecord should have .snap or .children");if(xs(n,o))r=Hc(r,u=ws(n,o),a.children);else if(xs(o,n))if(ks(u=ws(o,n)))r=Hc(r,hs(),a.children);else{var s=Sa(a.children,ds(u));if(s){var c=s.getChild(vs(u));r=Kc(r,hs(),c)}}}}}return r}function ul(e,t,n,r,i){if(r||i){var a=Jc(e.visibleWrites,t);if(!i&&Xc(a))return n;if(i||null!=n||Qc(a,hs())){return Zc(ol(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(xs(e.path,t)||xs(t,e.path))}),t),n||rc.EMPTY_NODE)}return null}var o=Yc(e.visibleWrites,t);if(null!=o)return o;var u=Jc(e.visibleWrites,t);return Xc(u)?n:null!=n||Qc(u,hs())?Zc(u,n||rc.EMPTY_NODE):null}function sl(e,t,n,r){return ul(e.writeTree,e.treePath,t,n,r)}function cl(e,t){return function(e,t,n){var r=rc.EMPTY_NODE,i=Yc(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Js,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Jc(e.visibleWrites,t);return n.forEachChild(Js,(function(e,t){var n=Zc(Jc(a,new fs(e)),t);r=r.updateImmediateChild(e,n)})),$c(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return $c(Jc(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ll(e,t,n,r){return function(e,t,n,r,i){$i(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=_s(t,n);if(Qc(e.visibleWrites,a))return null;var o=Jc(e.visibleWrites,a);return Xc(o)?i.getChild(n):Zc(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function fl(e,t){return function(e,t){return Yc(e.visibleWrites,t)}(e.writeTree,_s(e.treePath,t))}function hl(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Jc(e.visibleWrites,t),c=Yc(s,hs());if(null!=c)u=c;else{if(null==n)return[];u=Zc(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function dl(e,t,n){return function(e,t,n,r){var i=_s(t,n),a=Yc(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Zc(Jc(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function pl(e,t){return vl(_s(e.treePath,t),e.writeTree)}function vl(e,t){return{treePath:e,writeTree:t}}var ml=function(){function e(){O(this,e),this.changeMap=new Map}return F(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;$i("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),$i(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,dc(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,hc(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,fc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ji("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,dc(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),yl=new(function(){function e(){O(this,e)}return F(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),gl=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;O(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return F(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Oc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dl(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qc(this.viewCache_),i=hl(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function _l(e,t,n,r,i){var a,o,u=new ml;if(n.type===Ec.OVERWRITE){var s=n;s.source.fromUser?a=bl(e,t,s.path,s.snap,r,i,u):($i(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!ks(s.path),a=wl(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Ec.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=_s(n,r);xl(t,ds(c))&&(u=bl(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=_s(n,r);xl(t,ds(c))||(u=bl(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):($i(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=El(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Ec.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=fl(r,n))return t;var u,s=new gl(r,t,i),c=t.eventCache.getNode();if(ks(n)||".priority"===ds(n)){var l;if(t.serverCache.isFullyInitialized())l=sl(r,qc(t));else{var f=t.serverCache.getNode();$i(f instanceof rc,"serverChildren would be complete if leaf node"),l=cl(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=ds(n),d=dl(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,vs(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,rc.EMPTY_NODE,vs(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=sl(r,qc(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=fl(r,hs()),Uc(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=fl(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(ks(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return wl(e,t,n,s.getNode().getChild(n),i,a,u,o);if(ks(n)){var c=new zc(null);return s.getNode().forEachChild(Os,(function(e,t){c=c.set(new fs(e),t)})),El(e,t,n,c,i,a,u,o)}return t}var l=new zc(null);return r.foreach((function(e,t){var r=_s(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),El(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Ec.LISTEN_COMPLETE)throw Ji("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=jc(t,a.getNode(),a.isFullyInitialized()||ks(n),a.isFiltered());return kl(e,o,n,r,yl,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Vc(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(lc(Vc(t)))}}(t,a,f),{viewCache:a,changes:f}}function kl(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=fl(r,n))return t;if(ks(n))if($i(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=qc(t),l=cl(r,c instanceof rc?c:rc.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=sl(r,qc(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=ds(n);if(".priority"===h){$i(1===ps(n),"Can't have a priority with additional path components");var d=s.getNode(),p=ll(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=vs(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=ll(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=dl(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return Uc(t,o,s.isFullyInitialized()||ks(n),e.filter.filtersNodes())}function wl(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ks(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=ds(n);if(!c.isCompleteForPath(n)&&ps(n)>1)return t;var d=vs(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,yl,null)}var v=jc(t,s,c.isFullyInitialized()||ks(n),l.filtersNodes());return kl(e,v,n,i,new gl(i,v,a),u)}function bl(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new gl(i,t,a);if(ks(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Uc(t,s,!0,e.filter.filtersNodes());else{var f=ds(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Uc(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=vs(n),p=c.getNode().getImmediateChild(f);if(ks(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===ms(d)&&v.getChild(gs(d)).isEmpty()?v:v.updateChild(d,r):rc.EMPTY_NODE}if(p.equals(h))u=t;else u=Uc(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function xl(e,t){return e.eventCache.isCompleteForChild(t)}function Il(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function El(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=ks(n)?r:new zc(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Il(0,t.serverCache.getNode().getImmediateChild(n),r);c=wl(e,c,new fs(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Il(0,t.serverCache.getNode().getImmediateChild(n),r);c=wl(e,c,new fs(n),f,i,a,o,u)}})),c}var Sl,Tl=function(){function e(t,n){O(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new pc(i.getIndex()),o=(r=i).loadsAllData()?new pc(r.getIndex()):r.hasLimit()?new mc(r):new vc(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(rc.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(rc.EMPTY_NODE,s.getNode(),null),f=new Oc(c,u.isFullyInitialized(),a.filtersNodes()),h=new Oc(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Mc(h,f),this.eventGenerator_=new Lc(this.query_)}return F(e,[{key:"query",get:function(){return this.query_}}]),e}();function Cl(e,t){var n=qc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ks(t)&&!n.getImmediateChild(ds(t)).isEmpty())?n.getChild(t):null}function Nl(e){return 0===e.eventRegistrations_.length}function Al(e,t,n){var r=[];if(n){$i(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Pl(e,t,n,r){t.type===Ec.MERGE&&null!==t.source.queryId&&($i(qc(e.viewCache_),"We should always have a full cache before handling merges"),$i(Vc(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=_l(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,$i(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),$i(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),$i(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Rl(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Rl(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Fc(e,i,"child_removed",t,r,n),Fc(e,i,"child_added",t,r,n),Fc(e,i,"child_moved",a,r,n),Fc(e,i,"child_changed",t,r,n),Fc(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Dl,Ol=F((function e(){O(this,e),this.views=new Map}));function Ll(e){return 0===e.views.size}function Fl(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return $i(null!=a,"SyncTree gave us an op for an invalid query."),Pl(a,t,n,r)}var o,u=[],s=Hi(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Pl(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Ml(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=sl(n,i?r:null),s=!1;u?s=!0:r instanceof rc?(u=cl(n,r),s=!1):(u=rc.EMPTY_NODE,s=!1);var c=Mc(new Oc(u,s,!1),new Oc(r,i,!1));return new Tl(t,c)}return o}function Ul(e,t,n,r,i,a){var o=Ml(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Js,(function(e,t){r.push(fc(e,t))})),n.isFullyInitialized()&&r.push(lc(n.getNode())),Rl(e,r,n.getNode(),t)}(o,n)}function jl(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Wl(e);if("default"===i){var s,l=Hi(e.views.entries());try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];o=o.concat(Al(d,n,r)),Nl(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Al(p,n,r)),Nl(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!Wl(e)&&a.push(new($i(Sl,"Reference.ts has not been loaded"),Sl)(t._repo,t._path)),{removed:a,events:o}}function Vl(e){var t,n=[],r=Hi(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ql(e,t){var n,r=null,i=Hi(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Cl(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Bl(e,t){if(t._queryParams.loadsAllData())return Kl(e);var n=t._queryIdentifier;return e.views.get(n)}function zl(e,t){return null!=Bl(e,t)}function Wl(e){return null!=Kl(e)}function Kl(e){var t,n=Hi(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Hl=1,Gl=F((function e(t){O(this,e),this.listenProvider_=t,this.syncPointTree_=new zc(null),this.pendingWriteTree_={visibleWrites:Wc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Ql(e,t,n,r,i){return function(e,t,n,r,i){$i(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Kc(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?nf(e,new Rc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=nl(e.pendingWriteTree_,t),i=rl(e.pendingWriteTree_,t);if(i){var a=new zc(null);return null!=r.snap?a=a.set(hs(),!0):Ru(r.children,(function(e){a=a.set(new fs(e),!0)})),nf(e,new Ac(r.path,a,n))}return[]}function $l(e,t,n){return nf(e,new Rc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Jl(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||zl(o,t))){var s=jl(o,t,n,r);Ll(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return Wl(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=hf(h),p=0;p<d.length;++p){var v=d[p],m=v.query,y=of(e,v);e.listenProvider_.startListening(df(m),uf(e,m),y.hashFn,y.onComplete)}}if(!f&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(df(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(sf(t));e.listenProvider_.stopListening(df(t),n)}))}pf(e,c)}return u}function Xl(e,t,n,r){var i=cf(e,r);if(null!=i){var a=lf(i),o=a.path,u=a.queryId,s=ws(o,t);return ff(e,o,new Rc(Cc(u),s,n))}return[]}function Zl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=ws(e,i);a=a||ql(t,n),o=o||Wl(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||Wl(s),a=a||ql(s,hs())):(s=new Ol,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=rc.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=ql(t,hs());n&&(a=a.updateImmediateChild(e,n))}))}var l=zl(s,t);if(!l&&!t._queryParams.loadsAllData()){var f=sf(t);$i(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=vf();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=tl(e.pendingWriteTree_,i),p=Ul(s,t,n,d,a,u);if(!l&&!o&&!r){var v=Bl(s,t);p=p.concat(mf(e,t,v))}return p}function ef(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ql(n,ws(e,t));if(r)return r}));return ul(r,t,i,n,!0)}function tf(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=ws(e,n);r=r||ql(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ql(i,hs()):(i=new Ol,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Oc(r,!0,!1):null;return function(e){return Vc(e.viewCache_)}(Ml(i,t,tl(e.pendingWriteTree_,t._path),a?o.getNode():rc.EMPTY_NODE,a))}function nf(e,t){return rf(t,e.syncPointTree_,null,tl(e.pendingWriteTree_,hs()))}function rf(e,t,n,r){if(ks(e.path))return af(e,t,n,r);var i=t.get(hs());null==n&&null!=i&&(n=ql(i,hs()));var a=[],o=ds(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=pl(r,o);a=a.concat(rf(u,s,c,l))}return i&&(a=a.concat(Fl(i,e,r,n))),a}function af(e,t,n,r){var i=t.get(hs());null==n&&null!=i&&(n=ql(i,hs()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=pl(r,t),s=e.operationForChild(t);s&&(a=a.concat(af(s,i,o,u)))})),i&&(a=a.concat(Fl(i,e,r,n))),a}function of(e,t){var n=t.query,r=uf(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||rc.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=cf(e,n);if(r){var i=lf(r),a=i.path,o=i.queryId,u=ws(a,t);return ff(e,a,new Pc(Cc(o),u))}return[]}(e,n._path,r):function(e,t){return nf(e,new Pc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Jl(e,n,null,i)}}}function uf(e,t){var n=sf(t);return e.queryToTagMap.get(n)}function sf(e){return e._path.toString()+"$"+e._queryIdentifier}function cf(e,t){return e.tagToQueryMap.get(t)}function lf(e){var t=e.indexOf("$");return $i(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fs(e.substr(0,t))}}function ff(e,t,n){var r=e.syncPointTree_.get(t);return $i(r,"Missing sync point for query tag that we're tracking"),Fl(r,n,tl(e.pendingWriteTree_,t),null)}function hf(e){return e.fold((function(e,t,n){if(t&&Wl(t))return[Kl(t)];var r=[];return t&&(r=Vl(t)),Ru(n,(function(e,t){r=r.concat(t)})),r}))}function df(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new($i(Dl,"Reference.ts has not been loaded"),Dl)(e._repo,e._path):e}function pf(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=sf(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function vf(){return Hl++}function mf(e,t,n){var r=t._path,i=uf(e,t),a=of(e,n),o=e.listenProvider_.startListening(df(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)$i(!Wl(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!ks(e)&&t&&Wl(t))return[Kl(t).query];var r=[];return t&&(r=r.concat(Vl(t).map((function(e){return e.query})))),Ru(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(df(l),uf(e,l))}return o}var yf=function(){function e(t){O(this,e),this.node_=t}return F(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),gf=function(){function e(t,n){O(this,e),this.syncTree_=t,this.path_=n}return F(e,[{key:"getImmediateChild",value:function(t){var n=_s(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return ef(this.syncTree_,this.path_)}}]),e}(),_f=function(e,t,n){return e&&"object"===typeof e?($i(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?kf(e[".sv"],t,n):"object"===typeof e[".sv"]?wf(e[".sv"],t):void $i(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},kf=function(e,t,n){if("timestamp"===e)return n.timestamp;$i(!1,"Unexpected server value: "+e)},wf=function(e,t,n){e.hasOwnProperty("increment")||$i(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&$i(!1,"Unexpected increment value: "+r);var i=t.node();if($i(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},bf=function(e,t,n,r){return If(t,new gf(n,e),r)},xf=function(e,t,n){return If(e,new yf(t),n)};function If(e,t,n){var r,i=e.getPriority().val(),a=_f(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=_f(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new Gs(u,ac(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new Gs(a))),s.forEachChild(Js,(function(e,i){var a=If(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Ef=F((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};O(this,e),this.name=t,this.parent=n,this.node=r}));function Sf(e,t){for(var n=t instanceof fs?t:new fs(t),r=e,i=ds(n);null!==i;){var a=Sa(r.node.children,i)||{children:{},childCount:0};r=new Ef(i,r,a),i=ds(n=vs(n))}return r}function Tf(e){return e.node.value}function Cf(e,t){e.node.value=t,Df(e)}function Nf(e){return e.node.childCount>0}function Af(e,t){Ru(e.node.children,(function(n,r){t(new Ef(n,e,r))}))}function Pf(e,t,n,r){n&&!r&&t(e),Af(e,(function(e){Pf(e,t,!0,r)})),n&&r&&t(e)}function Rf(e){return new fs(null===e.parent?e.name:Rf(e.parent)+"/"+e.name)}function Df(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Tf(e)&&!Nf(e)}(n),i=Ea(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Df(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Df(e))}(e.parent,e.name,e)}var Of=/[\[\].#$\/\u0000-\u001F\u007F]/,Lf=/[\[\].#$\u0000-\u001F\u007F]/,Ff=10485760,Mf=function(e){return"string"===typeof e&&0!==e.length&&!Of.test(e)},Uf=function(e){return"string"===typeof e&&0!==e.length&&!Lf.test(e)},jf=function(e,t,n,r){r&&void 0===t||Vf(Ua(e,"value"),t,n)},Vf=function e(t,n,r){var i=r instanceof fs?new Is(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ss(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ss(i)+" with contents = "+n.toString());if(Iu(n))throw new Error(t+"contains "+n.toString()+" "+Ss(i));if("string"===typeof n&&n.length>Ff/3&&ja(n)>Ff)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Ss(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Ru(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Mf(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ss(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=ja(s),Es(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ja(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ss(i)+" in addition to actual children.")}},qf=function(e,t,n,r){if((!r||void 0!==n)&&!Uf(n))throw new Error(Ua(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bf=function(e,t){if(".info"===ds(t))throw new Error(e+" failed = Can't modify data under /.info/")},zf=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Mf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Uf(e)}(n))throw new Error(Ua(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Wf=F((function e(){O(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Kf(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||bs(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Hf(e,t,n){Kf(e,n),Gf(e,(function(e){return xs(e,t)||xs(t,e)}))}function Gf(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Qf(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Qf(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();mu&&_u("event: "+n.toString()),Uu(r)}}}var Yf="repo_interrupt",$f=function(){function e(t,n,r,i){O(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bc(),this.transactionQueueTree_=new Ef,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return F(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Jf(e,t,n){if(e.stats_=Xu(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new kc(e.repoInfo_,(function(t,n,r,i){eh(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return th(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xa(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ns(e.repoInfo_,t,(function(t,n,r,i){eh(e,t,n,r,i)}),(function(t){th(e,t)}),(function(t){!function(e,t){Ru(t,(function(t,n){nh(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Ju[n]||(Ju[n]=t()),Ju[n]}(e.repoInfo_,(function(){return new Tc(e.stats_,e.server_)})),e.infoData_=new wc,e.infoSyncTree_=new Gl({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=$l(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),nh(e,"connected",!1),e.serverSyncTree_=new Gl({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Hf(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Xf(e){var t=e.infoData_.getNode(new fs(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Zf(e){return(t=(t={timestamp:Xf(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function eh(e,t,n,r,i){e.dataUpdateCount++;var a=new fs(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ca(n,(function(e){return ac(e)}));o=function(e,t,n,r){var i=cf(e,r);if(i){var a=lf(i),o=a.path,u=a.queryId,s=ws(o,t),c=zc.fromObject(n);return ff(e,o,new Dc(Cc(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=ac(n);o=Xl(e.serverSyncTree_,a,s,i)}else if(r){var c=Ca(n,(function(e){return ac(e)}));o=function(e,t,n){var r=zc.fromObject(n);return nf(e,new Dc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=ac(n);o=$l(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=fh(e,a)),Hf(e.eventQueue_,f,o)}function th(e,t){nh(e,"connected",t),!1===t&&function(e){oh(e,"onDisconnectEvents");var t=Zf(e),n=bc();Ic(e.onDisconnect_,hs(),(function(r,i){var a=bf(r,i,e.serverSyncTree_,t);xc(n,r,a)}));var r=[];Ic(n,hs(),(function(t,n){r=r.concat($l(e.serverSyncTree_,t,n));var i=mh(e,t);fh(e,i)})),e.onDisconnect_=bc(),Hf(e.eventQueue_,hs(),r)}(e)}function nh(e,t,n){var r=new fs("/.info/"+t),i=ac(n);e.infoData_.updateSnapshot(r,i);var a=$l(e.infoSyncTree_,r,i);Hf(e.eventQueue_,r,a)}function rh(e){return e.nextWriteId_++}function ih(e,t,n,r,i){oh(e,"set",{path:t.toString(),value:n,priority:r});var a=Zf(e),o=ac(n,r),u=ef(e.serverSyncTree_,t),s=xf(o,u,a),c=rh(e),l=Ql(e.serverSyncTree_,t,s,c,!0);Kf(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||xu("set at "+t+" failed: "+n);var o=Yl(e.serverSyncTree_,c,!a);Hf(e.eventQueue_,t,o),uh(e,i,n,r)}));var f=mh(e,t);fh(e,f),Hf(e.eventQueue_,f,[])}function ah(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Yf)}function oh(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_u.apply(void 0,[t].concat(r))}function uh(e,t,n,r){t&&Uu((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function sh(e,t,n){return ef(e.serverSyncTree_,t,n)||rc.EMPTY_NODE}function ch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||vh(e,t),Tf(t)){var n=dh(e,t);$i(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&lh(e,Rf(t),n)}else Nf(t)&&Af(t,(function(t){ch(e,t)}))}function lh(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=sh(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];$i(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=ws(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){oh(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Yl(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);vh(e,Sf(e.transactionQueueTree_,t)),ch(e,e.transactionQueueTree_),Hf(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Uu(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{xu("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}fh(e,t)}}),o)}function fh(e,t){var n=hh(e,t),r=Rf(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=ws(n,s.path),l=!1,f=void 0;if($i(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(Yl(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(Yl(e.serverSyncTree_,s.currentWriteId,!0));else{var h=sh(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Vf("transaction failed: Data returned ",d,s.path);var p=ac(d);"object"===typeof d&&null!=d&&Ea(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,m=Zf(e),y=xf(p,h,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=rh(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Ql(e.serverSyncTree_,s.path,y,s.currentWriteId,s.applyLocally))).concat(Yl(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(Yl(e.serverSyncTree_,s.currentWriteId,!0))}Hf(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);vh(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Uu(r[c]);ch(e,e.transactionQueueTree_)}(e,dh(e,n),r),r}function hh(e,t){var n,r=e.transactionQueueTree_;for(n=ds(t);null!==n&&void 0===Tf(r);)r=Sf(r,n),n=ds(t=vs(t));return r}function dh(e,t){var n=[];return ph(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ph(e,t,n){var r=Tf(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Af(t,(function(t){ph(e,t,n)}))}function vh(e,t){var n=Tf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cf(t,n.length>0?n:void 0)}Af(t,(function(t){vh(e,t)}))}function mh(e,t){var n=Rf(hh(e,t)),r=Sf(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){yh(e,t)})),yh(e,r),Pf(r,(function(t){yh(e,t)})),n}function yh(e,t){var n=Tf(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?($i(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):($i(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Yl(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Cf(t,void 0):n.length=a+1,Hf(e.eventQueue_,Rf(t),i);for(var u=0;u<r.length;u++)Uu(r[u])}}var gh=function(e,t){var n=_h(e),r=n.namespace;"firebase.com"===n.domain&&bu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||bu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Gu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new fs(n.pathString)}},_h=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Hi(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):xu("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},kh=function(){function e(t,n,r,i){O(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return F(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+xa(this.snapshot.exportVal())}}]),e}(),wh=function(){function e(t,n,r){O(this,e),this.eventRegistration=t,this.error=n,this.path=r}return F(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),bh=function(){function e(t,n){O(this,e),this.snapshotCallback=t,this.cancelCallback=n}return F(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return $i(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),xh=function(){function e(t,n,r,i){O(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return F(e,[{key:"key",get:function(){return ks(this._path)?null:ms(this._path)}},{key:"ref",get:function(){return new Ih(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=_c(this._queryParams),t=Au(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return _c(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Va(t))instanceof e))return!1;var n=this._repo===t._repo,r=bs(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Ih=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,r,new yc,!1)}return F(n,[{key:"parent",get:function(){var e=gs(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(xh),Eh=function(){function e(t,n,r){O(this,e),this._node=t,this.ref=n,this._index=r}return F(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new fs(t),r=Th(this.ref,t);return new e(this._node.getChild(n),r,Js)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Th(n.ref,r),Js))}))}},{key:"hasChild",value:function(e){var t=new fs(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Sh(e,t){return(e=Va(e))._checkNotDeleted("ref"),void 0!==t?Th(e._root,t):e._root}function Th(e,t){var n,r,i,a;return null===ds((e=Va(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qf(n,r,i,a)):qf("child","path",t,!1),new Ih(e._repo,_s(e._path,t))}function Ch(e,t){e=Va(e),Bf("set",e._path),jf("set",t,e._path,!1);var n=new ma;return ih(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Nh(e){e=Va(e);var t=new bh((function(){})),n=new Ah(t);return function(e,t,n){var r=tf(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=ac(r).withIndex(t._queryParams.getIndex());if(Zl(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=$l(e.serverSyncTree_,t._path,a);else{var o=uf(e.serverSyncTree_,t);i=Xl(e.serverSyncTree_,t._path,a,o)}return Hf(e.eventQueue_,t._path,i),Jl(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return oh(e,"get for query "+xa(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Eh(t,new Ih(e._repo,e._path),e._queryParams.getIndex())}))}var Ah=function(){function e(t){O(this,e),this.callbackContext=t}return F(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new kh("value",this,new Eh(e.snapshotNode,new Ih(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new wh(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}();!function(e){$i(!Sl,"__referenceConstructor has already been defined"),Sl=e}(Ih),function(e){$i(!Dl,"__referenceConstructor has already been defined"),Dl=e}(Ih);var Ph={},Rh=!1;function Dh(e,t,n,r){e.repoInfo_=new Gu("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function Oh(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||bu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_u("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=gh(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=gh(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Bu(Bu.OWNER):new qu(e.name,e.options,t);zf("Invalid Firebase Database URL",u),ks(u.path)||bu("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Ph[t.name];i||(i={},Ph[t.name]=i);var a=i[e.toURLString()];a&&bu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new $f(e,Rh,n,r),i[e.toURLString()]=a,a}(s,e,l,new Vu(e.name,n));return new Lh(f,e)}var Lh=function(){function e(t,n){O(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return F(e,[{key:"_repo",get:function(){return this._instanceStarted||(Jf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Ih(this._repo,hs())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Ph[t];n&&n[e.key]===e||bu("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ah(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&bu("Cannot call "+e+" on a deleted database.")}}]),e}();function Fh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo(),t=arguments.length>1?arguments[1]:void 0,n=No(e,"database").getImmediate({identifier:t}),r=pa("database");return r&&Mh.apply(void 0,[n].concat(D(r))),n}function Mh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Va(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&bu("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&bu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Bu(Bu.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ya(r.mockUserToken,e.app.options.projectId);a=new Bu(o)}Dh(i,t,n,a)}Ns.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ns.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){ou=e}(Lo),Co(new qa("database",(function(e,t){var n=t.instanceIdentifier;return Oh(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),qo(iu,au,e),qo(iu,au,"esm2017")}();var Uh=function(e){var n=c((0,t.useState)(e),2),r=n[0],i=n[1];return{value:r,onChange:function(e,t){e.target.id===t&&i(Br(Br({},r),{},Vr({},e.target.id,e.target.value.replace(/[^0-9.]/g,""))))}}},jh=function(){var e=P(),n=Uh(""),r=Uh(""),i=w((function(e){return e.soccerScore.allMatch})),a=w((function(e){return e.soccerScore.firebasePrediction})),o=function(){var t=Ki(zi().mark((function t(i,a){var o,u,s;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={_id:a._id,away_score:r.value[a._id+a.away_team_en],away_team_en:a.away_team_en,home_score:n.value[a._id+a.home_team_en],home_team_en:a.home_team_en,userID:localStorage.userID},u=Fh(),s=Sh(Fh()),t.next=5,Nh(Th(s,i)).then((function(e){e.exists()?Ch(Sh(u,i),[].concat(D(e.val()),[o])):Ch(Sh(u,i),[o])}));case 5:return t.next=7,Nh(Th(s,localStorage.userID)).then((function(t){e(Pi(t.val()))}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,t.useEffect)((function(){Nh(Th(Sh(Fh()),localStorage.userID)).then((function(t){e(Pi(t.val()))}))}),[]),(0,qi.jsx)("div",{className:"prediction-page-wrapper",children:i.map((function(e){var t=null===a||void 0===a?void 0:a.find((function(t){return e._id===t._id}));return(0,qi.jsxs)("div",{className:"match-info-wrapper",children:[(0,qi.jsxs)("div",{className:"prediction-match-item-wrapper",children:[(0,qi.jsxs)("div",{className:"home-team-wrapper",children:[(0,qi.jsxs)("p",{children:[" ",e.home_team_en]}),(0,qi.jsx)("img",{src:e.home_flag,alt:"home flag"}),"notstarted"===e.time_elapsed?(0,qi.jsx)("input",{id:e._id+e.home_team_en,maxLength:"1",type:"text",onChange:function(t){n.onChange(t,e._id+e.home_team_en)},inputMode:"tel",value:t?t.home_score:n.value[e._id+e.home_team_en],disabled:t}):(0,qi.jsx)("h1",{children:e.home_score})]}),(0,qi.jsx)("p",{className:"colon",children:" :"}),(0,qi.jsxs)("div",{className:"away-team-wrapper",children:["notstarted"===e.time_elapsed?(0,qi.jsx)("input",{id:e._id+e.away_team_en,maxLength:"1",type:"text",onChange:function(t){r.onChange(t,e._id+e.away_team_en)},inputMode:"tel",value:t?t.away_score:r.value[e._id+e.away_team_en],disabled:t}):(0,qi.jsx)("h1",{children:e.away_score}),(0,qi.jsx)("img",{src:e.away_flag,alt:"home flag"}),(0,qi.jsxs)("p",{children:[" ",e.away_team_en]})]})]}),(0,qi.jsxs)("div",{className:"match-info-type",children:[(0,qi.jsxs)("h1",{children:[e.type," "]}),(0,qi.jsxs)("h1",{children:[" ",e.local_date]})]}),"notstarted"===e.time_elapsed?(0,qi.jsxs)("button",{className:"submit-button",onClick:function(){return o(localStorage.userID,e)},disabled:t,children:[" ",t?"\u041f\u0440\u043e\u0433\u043d\u043e\u0437 \u0441\u0434\u0435\u043b\u0430\u043d":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"," "]}):(0,qi.jsx)("h2",{className:"finish-match",children:" \u041c\u0430\u0442\u0447 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0438\u043b\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d "})]},e._id+e.userID)}))})},Vh=function(){var e=P(),n=w((function(e){return e.soccerScore.allMatch})),r=w((function(e){return e.soccerScore.allPredictions})),i=n.filter((function(e){return"TRUE"===e.finished})),a=[],o=[];r&&(Object.keys(r).forEach((function(e){return a.push(r[e])})),a=a.flat(1/0)),(0,t.useEffect)((function(){Nh(Th(Sh(Fh()),"/")).then((function(t){e(Ri(t.val()))}))}),[]);return function(){for(var e=D(a),t=function(t){var n=void 0,r=i[t];n="group"===r.type?100:200,e=a.filter((function(e){return e._id===r._id}));var u=e.map((function(e){return e.away_score==r.away_score&&e.home_score==r.home_score?Br(Br({},e),{},{score:3}):e.away_score-e.home_score==r.away_score-r.home_score?Br(Br({},e),{},{score:2}):e.away_score-e.home_score>0&&r.away_score-r.home_score>0||e.away_score-e.home_score<0&&r.away_score-r.home_score<0||e.away_score-e.home_score==0&&r.away_score-r.home_score==0?Br(Br({},e),{},{score:1}):Br(Br({},e),{},{score:0})})),s=u.reduce((function(e,t){return e+t.score}),0),c=u.map((function(e){return Br(Br({},e),{},{totalScore:isNaN(n/s*e.score)?0:n/s*e.score})})),l={scoringPointData:c,match:r};o.push(l)},n=0;n<i.length;n++)t(n)}(),(0,qi.jsx)("div",{className:"result-page-wrapper",children:o.map((function(e){return(0,qi.jsxs)("div",{className:"result-page-match",children:[(0,qi.jsxs)("div",{className:"result-page-match-info",children:[(0,qi.jsxs)("div",{className:"result-page-match-finished-info",children:[(0,qi.jsx)("img",{src:e.match.home_flag,alt:"home flag"}),(0,qi.jsxs)("h1",{children:[" ",e.match.home_score]}),(0,qi.jsx)("h1",{children:" : "}),(0,qi.jsxs)("h1",{children:[" ",e.match.away_score]}),(0,qi.jsx)("img",{src:e.match.away_flag,alt:"away flag"})]}),(0,qi.jsxs)("h1",{className:"result-page-match-type",children:[" ",e.match.type]})]}),(0,qi.jsx)("div",{className:"result-page-match-pred-wrapper",children:e.scoringPointData.map((function(e){return(0,qi.jsxs)("div",{className:"result-page-match-pred",children:[(0,qi.jsxs)("div",{className:"player",children:[(0,qi.jsx)("h6",{children:" \u0418\u0433\u0440\u043e\u043a"}),(0,qi.jsxs)("h2",{children:[" ",e.userID]})]}),(0,qi.jsxs)("div",{className:"match",children:[(0,qi.jsx)("div",{className:"match-label",children:(0,qi.jsx)("h6",{children:" \u041f\u0440\u043e\u0433\u043d\u043e\u0437 "})}),(0,qi.jsxs)("div",{className:"match-info",children:[(0,qi.jsxs)("h2",{children:[" ",e.home_score]}),(0,qi.jsx)("h2",{children:" :"}),(0,qi.jsxs)("h2",{children:[" ",e.away_score]})]})]}),(0,qi.jsxs)("div",{className:"score",children:[(0,qi.jsx)("h6",{children:" \u041e\u0447\u043a\u0438"}),(0,qi.jsxs)("h2",{children:[" ",e.score]})]}),(0,qi.jsxs)("div",{className:"totalScore",children:[(0,qi.jsx)("h6",{children:" \u041d\u0430\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0431\u0430\u043b\u043b\u044b"}),(0,qi.jsxs)("h2",{children:["  ",Math.round(e.totalScore)]})]})]},e._id+e.userID)}))})]},e._id)}))})},qh=function(){var e=P(),n=w((function(e){return e.soccerScore.allMatch})),r=w((function(e){return e.soccerScore.allPredictions})),i=n.filter((function(e){return"TRUE"===e.finished})),a=[],o=[];r&&(Object.keys(r).forEach((function(e){return a.push(r[e])})),a=a.flat(1/0)),(0,t.useEffect)((function(){Nh(Th(Sh(Fh()),"/")).then((function(t){e(Ri(t.val()))}))}),[]);return function(){for(var e=D(a),t=function(t){var n=i[t],r=void 0;r="group"===n.type?100:200,e=a.filter((function(e){return e._id===n._id}));var u=e.map((function(e){return e.away_score==n.away_score&&e.home_score==n.home_score?Br(Br({},e),{},{score:3}):e.away_score-e.home_score==n.away_score-n.home_score?Br(Br({},e),{},{score:2}):e.away_score-e.home_score>0&&n.away_score-n.home_score>0||e.away_score-e.home_score<0&&n.away_score-n.home_score<0||e.away_score-e.home_score==0&&n.away_score-n.home_score==0?Br(Br({},e),{},{score:1}):Br(Br({},e),{},{score:0})})),s=u.reduce((function(e,t){return e+t.score}),0);u.map((function(e){return o.push({userID:e.userID,totalScore:isNaN(r/s*e.score)?0:r/s*e.score})}))},n=0;n<i.length;n++)t(n)}(),(0,qi.jsx)("div",{className:"standing-page-wrapper",children:Array.from(o.reduce((function(e,t){var n=t.userID,r=t.totalScore;return e.set(n,(e.get(n)||0)+r)}),new Map),(function(e){var t=c(e,2);return{userID:t[0],totalScore:t[1]}})).map((function(e){return(0,qi.jsxs)("div",{className:"standing-page-info",children:[(0,qi.jsxs)("h1",{children:[e.userID,"    "]}),(0,qi.jsxs)("h1",{children:[Math.round(e.totalScore)," points "]})]},e.userID+e.totalScore)}))})};var Bh,zh=function(){var e=c((0,t.useState)(localStorage.userID),2),n=e[0],r=e[1],i=c((0,t.useState)(!1),2),a=i[0],o=i[1];return P(),(0,t.useEffect)((function(){}),[]),a||localStorage.userID?(0,qi.jsxs)("div",{className:"App",children:[(0,qi.jsx)(Bi,{}),(0,qi.jsxs)(Ze,{children:[(0,qi.jsx)(Je,{path:"/sweptakes",element:(0,qi.jsx)(jh,{})}),(0,qi.jsx)(Je,{path:"/sweptakes/Result",element:(0,qi.jsx)(Vh,{})}),(0,qi.jsx)(Je,{path:"/sweptakes/Standing",element:(0,qi.jsx)(qh,{})})]})]}):(0,qi.jsxs)("div",{className:"App",children:[(0,qi.jsx)("h1",{className:"app-h1",children:"\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043e\u0439 ID"}),(0,qi.jsx)("input",{className:"app-input",onChange:function(e){r(e.target.value)},value:n,type:"text"}),(0,qi.jsx)("button",{onClick:function(){localStorage.setItem("userID",n),o(!0)},className:"app-button",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})},Wh=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},Kh=function(e){var t,n=gi(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!vi(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Yr(a)}var p=u;"function"===typeof p&&(p=p(n));var v=Jr.apply(void 0,p),m=$r;c&&(m=pi(fi({trace:!1},"object"===typeof c&&c)));var y=[v];return Array.isArray(d)?y=ri([v],d):"function"===typeof d&&(y=d(y)),Qr(t,f,m.apply(void 0,y))}({reducer:{soccerScore:Di}}),Hh=function(){function e(t,n){var r=this;O(this,e),this._delegate=t,this.firebase=n,So(t,new qa("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return F(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),jo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){So(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){To(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Gh=(Vr(Bh={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Vr(Bh,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Bh),Qh=new _a("app-compat","Firebase",Gh);var Yh=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Fo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ea(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:qo,setLogLevel:zo,onLog:Bo,apps:null,SDK_VERSION:Lo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Co(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Qh.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ra(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ea(n,e=e||bo))throw Qh.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Hh);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ra(n,e)},createSubscribe:La,ErrorFactory:_a,deepExtend:ra}),n}(),$h=new Xa("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){$h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Jh=self.firebase.SDK_VERSION;Jh&&Jh.indexOf("LITE")>=0&&$h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Xh=Yh;!function(e){qo("@firebase/app-compat","0.1.38",e)}();function Zh(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function ed(){return ed="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Zh(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ed.apply(this,arguments)}Xh.registerVersion("firebase","9.13.0","app-compat");function td(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var nd;Object.create;var rd="facebook.com",id="github.com",ad="google.com",od="password",ud="twitter.com",sd="EMAIL_SIGNIN",cd="PASSWORD_RESET",ld="RECOVER_EMAIL",fd="REVERT_SECOND_FACTOR_ADDITION",hd="VERIFY_AND_CHANGE_EMAIL",dd="VERIFY_EMAIL";function pd(){return Vr({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var vd=function(){var e;return Vr(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Vr(e,"argument-error",""),Vr(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Vr(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Vr(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Vr(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Vr(e,"cordova-not-ready","Cordova framework is not ready."),Vr(e,"cors-unsupported","This browser is not supported."),Vr(e,"credential-already-in-use","This credential is already associated with a different user account."),Vr(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Vr(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Vr(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Vr(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Vr(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Vr(e,"email-already-in-use","The email address is already in use by another account."),Vr(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Vr(e,"expired-action-code","The action code has expired."),Vr(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Vr(e,"internal-error","An internal AuthError has occurred."),Vr(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Vr(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Vr(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Vr(e,"invalid-auth-event","An internal AuthError has occurred."),Vr(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Vr(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Vr(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Vr(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Vr(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Vr(e,"invalid-email","The email address is badly formatted."),Vr(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Vr(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Vr(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Vr(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Vr(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Vr(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Vr(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Vr(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Vr(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Vr(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Vr(e,"wrong-password","The password is invalid or the user does not have a password."),Vr(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Vr(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Vr(e,"invalid-provider-id","The specified provider ID is invalid."),Vr(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Vr(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Vr(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Vr(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Vr(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Vr(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Vr(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Vr(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Vr(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Vr(e,"missing-continue-uri","A continue URL must be provided in the request."),Vr(e,"missing-iframe-start","An internal AuthError has occurred."),Vr(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Vr(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Vr(e,"missing-multi-factor-info","No second factor identifier is provided."),Vr(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Vr(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Vr(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Vr(e,"app-deleted","This instance of FirebaseApp has been deleted."),Vr(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Vr(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Vr(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Vr(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Vr(e,"no-auth-event","An internal AuthError has occurred."),Vr(e,"no-such-provider","User was not linked to an account with the given provider."),Vr(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Vr(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Vr(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Vr(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Vr(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Vr(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Vr(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Vr(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Vr(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Vr(e,"rejected-credential","The request contains malformed or mismatching credentials."),Vr(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Vr(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Vr(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Vr(e,"timeout","The operation has timed out."),Vr(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Vr(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Vr(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Vr(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Vr(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Vr(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Vr(e,"unverified-email","The operation requires a verified email."),Vr(e,"user-cancelled","The user did not grant your application the permissions it requested."),Vr(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Vr(e,"user-disabled","The user account has been disabled by an administrator."),Vr(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Vr(e,"user-signed-out",""),Vr(e,"weak-password","The password must be 6 characters long or more."),Vr(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Vr(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},md=pd,yd=new _a("auth","Firebase",pd()),gd=new Xa("@firebase/auth");function _d(e){if(gd.logLevel<=Ka.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gd.error.apply(gd,["Auth (".concat(Lo,"): ").concat(e)].concat(n))}}function kd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Id.apply(void 0,[e].concat(n))}function wd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Id.apply(void 0,[e].concat(n))}function bd(e,t,n){var r=Object.assign(Object.assign({},md()),Vr({},t,n));return new _a("auth","Firebase",r).create(t,{appName:e.name})}function xd(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&kd(e,"argument-error"),bd(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Id(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=D(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(D(o)))}return yd.create.apply(yd,[e].concat(n))}function Ed(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Id.apply(void 0,[t].concat(r))}}function Sd(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _d(t),new Error(t)}function Td(e,t){e||Sd(t)}var Cd=new Map;function Nd(e){Td(e instanceof Function,"Expected a class definition");var t=Cd.get(e);return t?(Td(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cd.set(e,t),t)}function Ad(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pd(){return"http:"===Rd()||"https:"===Rd()}function Rd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Dd=function(){function e(t,n){O(this,e),this.shortDelay=t,this.longDelay=n,Td(n>t,"Short delay should be less than long delay!"),this.isMobile=aa()||sa()}return F(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Pd()||ua()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Od(e,t){Td(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ld=function(){function e(){O(this,e)}return F(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Sd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Sd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Sd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Fd=(Vr(nd={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Vr(nd,"MISSING_CUSTOM_TOKEN","internal-error"),Vr(nd,"INVALID_IDENTIFIER","invalid-email"),Vr(nd,"MISSING_CONTINUE_URI","internal-error"),Vr(nd,"INVALID_PASSWORD","wrong-password"),Vr(nd,"MISSING_PASSWORD","internal-error"),Vr(nd,"EMAIL_EXISTS","email-already-in-use"),Vr(nd,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Vr(nd,"INVALID_IDP_RESPONSE","invalid-credential"),Vr(nd,"INVALID_PENDING_TOKEN","invalid-credential"),Vr(nd,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Vr(nd,"MISSING_REQ_TYPE","internal-error"),Vr(nd,"EMAIL_NOT_FOUND","user-not-found"),Vr(nd,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Vr(nd,"EXPIRED_OOB_CODE","expired-action-code"),Vr(nd,"INVALID_OOB_CODE","invalid-action-code"),Vr(nd,"MISSING_OOB_CODE","internal-error"),Vr(nd,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Vr(nd,"INVALID_ID_TOKEN","invalid-user-token"),Vr(nd,"TOKEN_EXPIRED","user-token-expired"),Vr(nd,"USER_NOT_FOUND","user-token-expired"),Vr(nd,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Vr(nd,"INVALID_CODE","invalid-verification-code"),Vr(nd,"INVALID_SESSION_INFO","invalid-verification-id"),Vr(nd,"INVALID_TEMPORARY_PROOF","invalid-credential"),Vr(nd,"MISSING_SESSION_INFO","missing-verification-id"),Vr(nd,"SESSION_EXPIRED","code-expired"),Vr(nd,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Vr(nd,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Vr(nd,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Vr(nd,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Vr(nd,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Vr(nd,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Vr(nd,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Vr(nd,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Vr(nd,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Vr(nd,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Vr(nd,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),nd),Md=new Dd(3e4,6e4);function Ud(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function jd(e,t,n,r){return Vd.apply(this,arguments)}function Vd(){return Vd=Ki(zi().mark((function e(t,n,r,i){var a,o=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",qd(t,a,Ki(zi().mark((function e(){var a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Pa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ld.fetch()(Kd(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Vd.apply(this,arguments)}function qd(e,t,n){return Bd.apply(this,arguments)}function Bd(){return Bd=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Fd),n),e.prev=2,a=new Hd(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Gd(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Gd(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Gd(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Gd(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw bd(t,p,d);case 34:kd(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ga)){e.next=41;break}throw e.t0;case 41:kd(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Bd.apply(this,arguments)}function zd(e,t,n,r){return Wd.apply(this,arguments)}function Wd(){return Wd=Ki(zi().mark((function e(t,n,r,i){var a,o,u=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,jd(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&kd(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Wd.apply(this,arguments)}function Kd(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Od(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Hd=function(){function e(t){var n=this;O(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(wd(n.auth,"network-request-failed"))}),Md.get())}))}return F(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Gd(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=wd(e,t,r);return i.customData._tokenResponse=n,i}function Qd(e,t){return Yd.apply(this,arguments)}function Yd(){return(Yd=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $d(e,t){return Jd.apply(this,arguments)}function Jd(){return(Jd=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xd(e,t){return Zd.apply(this,arguments)}function Zd(){return(Zd=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ep(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function tp(){return tp=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Va(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ed((a=rp(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ep(np(a.auth_time)),issuedAtTime:ep(np(a.iat)),expirationTime:ep(np(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e){return 1e3*Number(e)}function rp(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return _d("JWT malformed, contained fewer than 3 sections"),null;try{var o=na(i);return o?JSON.parse(o):(_d("Failed to decode base64 JWT payload"),null)}catch(u){return _d("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function ip(e,t){return ap.apply(this,arguments)}function ap(){return ap=Ki(zi().mark((function e(t,n){var r=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ga&&op(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ap.apply(this,arguments)}function op(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var up=function(){function e(t){O(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return F(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),sp=function(){function e(t,n){O(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return F(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ep(this.lastLoginAt),this.creationTime=ep(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function cp(e){return lp.apply(this,arguments)}function lp(){return lp=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ip(t,Xd(r,{idToken:i}));case 6:Ed(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?dp(o.providerUserInfo):[],s=hp(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new sp(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function fp(){return(fp=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Va(t),e.next=3,cp(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hp(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(D(n),D(t))}function dp(e){return e.map((function(e){var t=e.providerId,n=td(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function pp(e,t){return vp.apply(this,arguments)}function vp(){return(vp=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qd(t,{},Ki(zi().mark((function e(){var r,i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Kd(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ld.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mp=function(){function e(){O(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return F(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ed(e.idToken,"internal-error"),Ed("undefined"!==typeof e.idToken,"internal-error"),Ed("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=rp(e);return Ed(t,"internal-error"),Ed("undefined"!==typeof t.exp,"internal-error"),Ed("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ki(zi().mark((function e(t){var n,r=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ed(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pp(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Sd("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ed("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ed("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ed("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function yp(e,t){Ed("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var gp=function(){function e(t){O(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=td(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new up(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?D(a.providerData):[],this.metadata=new sp(a.createdAt||void 0,a.lastLoginAt||void 0)}return F(e,[{key:"getIdToken",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ip(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ed(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return tp.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fp.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ed(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ed(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,cp(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ip(this,Qd(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,_=n.uid,k=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;Ed(_&&x,t,"internal-error");var I=mp.fromJSON(this.name,x);Ed("string"===typeof _,t,"internal-error"),yp(f,t.name),yp(h,t.name),Ed("boolean"===typeof k,t,"internal-error"),Ed("boolean"===typeof w,t,"internal-error"),yp(d,t.name),yp(p,t.name),yp(v,t.name),yp(m,t.name),yp(y,t.name),yp(g,t.name);var E=new e({uid:_,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Ki(zi().mark((function t(n,r){var i,a,o,u=arguments;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new mp).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,cp(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),_p=function(){function e(){O(this,e),this.type="NONE",this.storage={}}return F(e,[{key:"_isAvailable",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();_p.type="NONE";var kp=_p;function wp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var bp=function(){function e(t,n,r){O(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=wp(this.userKey,a.apiKey,o),this.fullPersistenceKey=wp("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return F(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?gp._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ki(zi().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Nd(kp),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Nd(kp),u=wp(i,n.config.apiKey,n.name),s=null,c=Hi(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=gp._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function xp(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ip(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Np(t))return"Blackberry";if(Ap(t))return"Webos";if(Ep(t))return"Safari";if((t.includes("chrome/")||Sp(t))&&!t.includes("edge/"))return"Chrome";if(Cp(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/firefox\//i.test(e)}function Ep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Sp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/crios\//i.test(e)}function Tp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/iemobile/i.test(e)}function Cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/android/i.test(e)}function Np(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/blackberry/i.test(e)}function Ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/webos/i.test(e)}function Pp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rp(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return Pp(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Dp(){return ca()&&10===document.documentMode}function Op(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return Pp(e)||Cp(e)||Ap(e)||Np(e)||/windows phone/i.test(e)||Tp(e)}function Lp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xp(ia());break;case"Worker":t="".concat(xp(ia()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Lo,"/").concat(r)}var Fp=function(){function e(t){O(this,e),this.auth=t,this.queue=[]}return F(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s,c;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Hi(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Hi(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(rr){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Mp=function(){function e(t,n,r){O(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jp(this),this.idTokenSubscription=new jp(this),this.beforeStateQueue=new Fp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yd,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return F(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Nd(t)),this._initializationPromise=this.queue(Ki(zi().mark((function r(){var i,a;return zi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,bp.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Ed(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cp(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Va(t):null)&&Ed(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ki(zi().mark((function e(t){var n,r=this,i=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Ed(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ki(zi().mark((function n(){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Nd(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _a("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ed(n=t&&Nd(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,bp.create(this,[Nd(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ki(zi().mark((function e(t){var n=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ed(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ed(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lp(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ki(zi().mark((function e(){var t,n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vr({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Up(e){return Va(e)}var jp=function(){function e(t){var n=this;O(this,e),this.auth=t,this.observer=null,this.addObserver=La((function(e){return n.observer=e}))}return F(e,[{key:"next",get:function(){return Ed(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Vp(e,t,n){var r=Up(e);Ed(r._canInitEmulator,r,"emulator-config-failed"),Ed(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=qp(t),o=function(e){var t=qp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Bp(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Bp(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function qp(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Bp(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zp=function(){function e(t,n){O(this,e),this.providerId=t,this.signInMethod=n}return F(e,[{key:"toJSON",value:function(){return Sd("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Sd("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Sd("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Sd("not implemented")}}]),e}();function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return(Kp=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:resetPassword",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(e,t){return Gp.apply(this,arguments)}function Gp(){return(Gp=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return(Yp=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:update",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithPassword",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xp(e,t){return Zp.apply(this,arguments)}function Zp(){return(Zp=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:sendOobCode",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ev(e,t){return tv.apply(this,arguments)}function tv(){return(tv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xp(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nv(e,t){return rv.apply(this,arguments)}function rv(){return(rv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xp(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iv(e,t){return av.apply(this,arguments)}function av(){return(av=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xp(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ov(e,t){return uv.apply(this,arguments)}function uv(){return(uv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xp(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return(cv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithEmailLink",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lv(e,t){return fv.apply(this,arguments)}function fv(){return(fv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithEmailLink",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hv=function(e){U(n,e);var t=W(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return F(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$p(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",sv(t,{email:this._email,oobCode:this._password}));case 5:kd(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Hp(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",lv(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:kd(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zp);function dv(e,t){return pv.apply(this,arguments)}function pv(){return(pv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithIdp",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vv=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return F(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dv(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dv(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dv(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kd("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=td(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zp);function mv(e,t){return yv.apply(this,arguments)}function yv(){return(yv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:sendVerificationCode",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gv(){return(gv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _v(){return(_v=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Ud(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Gd(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kv=Vr({},"USER_NOT_FOUND","user-not-found");function wv(){return(wv=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithPhoneNumber",Ud(t,r),kv));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bv=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone","phone")).params=e,r}return F(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return gv.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return _v.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wv.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zp);var xv=function(){function e(t){var n,r,i,a,o,u;O(this,e);var s=Ra(Da(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Ed(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return F(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ra(Da(e)).link,n=t?Ra(Da(t)).deep_link_id:null,r=Ra(Da(e)).deep_link_id;return(r?Ra(Da(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(IO){return null}}}]),e}();var Iv=function(){function e(){O(this,e),this.providerId=e.PROVIDER_ID}return F(e,null,[{key:"credential",value:function(e,t){return hv._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xv.parseLink(t);return Ed(n,"argument-error"),hv._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Iv.PROVIDER_ID="password",Iv.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Iv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ev=function(){function e(t){O(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return F(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Sv=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).scopes=[],e}return F(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return D(this.scopes)}}]),n}(Ev),Tv=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ed(e.idToken||e.accessToken,"argument-error"),vv._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ed("providerId"in t&&"signInMethod"in t,"argument-error"),vv._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Sv),Cv=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"facebook.com")}return F(n,null,[{key:"credential",value:function(e){return vv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(IO){return null}}}]),n}(Sv);Cv.FACEBOOK_SIGN_IN_METHOD="facebook.com",Cv.PROVIDER_ID="facebook.com";var Nv=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return F(n,null,[{key:"credential",value:function(e,t){return vv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(IO){return null}}}]),n}(Sv);Nv.GOOGLE_SIGN_IN_METHOD="google.com",Nv.PROVIDER_ID="google.com";var Av=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"github.com")}return F(n,null,[{key:"credential",value:function(e){return vv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(IO){return null}}}]),n}(Sv);Av.GITHUB_SIGN_IN_METHOD="github.com",Av.PROVIDER_ID="github.com";var Pv=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return F(n,[{key:"_getIdTokenResponse",value:function(e){return dv(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dv(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dv(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zp),Rv=function(e){U(n,e);var t=W(n);function n(e){return O(this,n),Ed(e.startsWith("saml."),"argument-error"),t.call(this,e)}return F(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Pv.fromJSON(e);return Ed(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Pv._create(r,n)}catch(i){return null}}}]),n}(Ev),Dv=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,"twitter.com")}return F(n,null,[{key:"credential",value:function(e,t){return vv._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(IO){return null}}}]),n}(Sv);function Ov(e,t){return Lv.apply(this,arguments)}function Lv(){return(Lv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signUp",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Dv.TWITTER_SIGN_IN_METHOD="twitter.com",Dv.PROVIDER_ID="twitter.com";var Fv=function(){function e(t){O(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return F(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ki(zi().mark((function t(n,r,i){var a,o,u,s,c=arguments;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,gp._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Mv(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ki(zi().mark((function t(n,r,i){var a;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Mv(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Mv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Uv(){return Uv=Ki(zi().mark((function e(t){var n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Up(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Fv({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ov(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Fv._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}var jv=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o,u;return O(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(B(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return F(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ga);function Vv(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw jv._fromErrorAndOperation(e,n,t,r);throw n}))}function qv(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Bv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.next=3,Hv(!0,r,n);case 3:return e.t0=$d,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=qv(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Wv(e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=Ki(zi().mark((function e(t,n){var r,i,a=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ip,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Fv._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Hv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return(Gv=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cp(n);case 2:i=qv(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ed(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qv(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,ip(t,Vv(a,o,n,t),r);case 6:return Ed((u=e.sent).idToken,a,"internal-error"),Ed(s=rp(u.idToken),a,"internal-error"),c=s.sub,Ed(t.uid===c,a,"user-mismatch"),e.abrupt("return",Fv._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&kd(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Yv.apply(this,arguments)}function $v(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=Ki(zi().mark((function e(t,n){var r,i,a,o,u=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Vv(t,i,n);case 4:return a=e.sent,e.next=7,Fv._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Xv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$v(Up(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t){return tm.apply(this,arguments)}function tm(){return(tm=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.next=3,Hv(!1,r,n.providerId);case 3:return e.abrupt("return",Wv(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nm(e,t){return rm.apply(this,arguments)}function rm(){return(rm=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qv(Va(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function im(e,t){return am.apply(this,arguments)}function am(){return(am=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zd(t,"POST","/v1/accounts:signInWithCustomToken",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function om(){return(om=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Up(t),e.next=3,im(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Fv._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var um=function(){function e(t,n){O(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return F(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?sm._fromServerResponse(e,t):kd(e,"internal-error")}}]),e}(),sm=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return F(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(um);function cm(e,t,n){var r;Ed((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ed("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ed(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ed(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function lm(){return(lm=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),a={requestType:"PASSWORD_RESET",email:n},r&&cm(i,a,r),e.next=5,nv(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fm(){return(fm=Ki(zi().mark((function e(t,n,r){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wp(Va(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hm(){return(hm=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qp(Va(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dm(e,t){return pm.apply(this,arguments)}function pm(){return(pm=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.next=3,Wp(r,{oobCode:n});case 3:i=e.sent,Ed(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ed(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ed(i.mfaInfo,r,"internal-error");case 13:Ed(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=um._fromServerResponse(Up(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vm(){return(vm=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dm(Va(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mm(e,t,n){return ym.apply(this,arguments)}function ym(){return(ym=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Up(t),e.next=3,Ov(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Fv._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gm(){return(gm=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),a={requestType:"EMAIL_SIGNIN",email:n},Ed(r.handleCodeInApp,i,"argument-error"),r&&cm(i,a,r),e.next=6,iv(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(){return(_m=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),Ed((a=Iv.credentialWithLink(n,r||Ad()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Xv(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function km(e,t){return wm.apply(this,arguments)}function wm(){return(wm=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:createAuthUri",Ud(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bm(){return(bm=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pd()?Ad():"http://localhost",i={identifier:n,continueUri:r},e.next=4,km(Va(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xm(){return(xm=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&cm(r.auth,a,n),e.next=8,ev(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Im(){return(Im=Ki(zi().mark((function e(t,n,r){var i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&cm(i.auth,o,r),e.next=8,ov(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Em(e,t){return Sm.apply(this,arguments)}function Sm(){return(Sm=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jd(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tm(){return(Tm=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s,c;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Va(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ip(a,Em(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cm(e,t,n){return Nm.apply(this,arguments)}function Nm(){return(Nm=Ki(zi().mark((function e(t,n,r){var i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ip(t,Hp(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Am=F((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Pm=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this,e,r,i)).username=a,o}return F(n)}(Am),Rm=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"facebook.com",r)}return F(n)}(Am),Dm=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return F(n)}(Pm),Om=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"google.com",r)}return F(n)}(Am),Lm=function(e){U(n,e);var t=W(n);function n(e,r,i){return O(this,n),t.call(this,e,"twitter.com",r,i)}return F(n)}(Pm);function Fm(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=rp(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Am(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Rm(a,i);case"github.com":return new Dm(a,i);case"google.com":return new Om(a,i);case"twitter.com":return new Lm(a,i,e.screenName||null);case"custom":case"anonymous":return new Am(a,null);default:return new Am(a,r,i)}}(n)}var Mm=function(){function e(t,n,r){O(this,e),this.type=t,this.credential=n,this.auth=r}return F(e,[{key:"toJSON",value:function(){return{multiFactorSession:Vr({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Um=function(){function e(t,n,r){O(this,e),this.session=t,this.hints=n,this.signInResolver=r}return F(e,[{key:"resolveSignIn",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Up(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return um._fromServerResponse(r,e)}));Ed(i.mfaPendingCredential,r,"internal-error");var o=Mm._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ki(zi().mark((function e(t){var a,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Fv._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ed(n.user,r,"internal-error"),e.abrupt("return",Fv._forOperation(n.user,n.operationType,u));case 17:kd(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function jm(e,t){return jd(e,"POST","/v2/accounts/mfaEnrollment:start",Ud(e,t))}var Vm=function(){function e(t){var n=this;O(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return um._fromServerResponse(t.auth,e)})))}))}return F(e,[{key:"getSession",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Mm,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ip(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,ip(this.user,jd(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Ud(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),qm=new WeakMap;var Bm="__sak",zm=function(){function e(t,n){O(this,e),this.storageRetriever=t,this.type=n}return F(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Bm,"1"),this.storage.removeItem(Bm),Promise.resolve(!0)):Promise.resolve(!1)}catch(IO){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Wm=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ia();return Ep(e)||Pp(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Op(),e._shouldAllowMigration=!0,e}return F(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Dp()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ki(zi().mark((function e(t,r){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(j(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ki(zi().mark((function e(t){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(j(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(j(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(zm);Wm.type="LOCAL";var Km=Wm,Hm=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return F(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(zm);Hm.type="SESSION";var Gm=Hm;function Qm(e){return Promise.all(e.map(function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ym=function(){function e(t){O(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return F(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s,c;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Qm(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function $m(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ym.receivers=[];var Jm=function(){function e(t){O(this,e),this.target=t,this.handlers=new Set}return F(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ki(zi().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=$m("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Xm(){return window}function Zm(){return"undefined"!==typeof Xm().WorkerGlobalScope&&"function"===typeof Xm().importScripts}function ey(){return ty.apply(this,arguments)}function ty(){return(ty=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ny(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ry="firebaseLocalStorageDb",iy="firebaseLocalStorage",ay="fbase_key",oy=function(){function e(t){O(this,e),this.request=t}return F(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function uy(e,t){return e.transaction([iy],t?"readwrite":"readonly").objectStore(iy)}function sy(){var e=indexedDB.deleteDatabase(ry);return new oy(e).toPromise()}function cy(){var e=indexedDB.open(ry,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(iy,{keyPath:ay})}catch(r){n(r)}})),e.addEventListener("success",Ki(zi().mark((function n(){var r;return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(iy)){n.next=12;break}return r.close(),n.next=5,sy();case 5:return n.t0=t,n.next=8,cy();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ly(e,t,n){return fy.apply(this,arguments)}function fy(){return fy=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uy(t,!0).put((Vr(i={},ay,n),Vr(i,"value",r),i)),e.abrupt("return",new oy(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),fy.apply(this,arguments)}function hy(e,t){return dy.apply(this,arguments)}function dy(){return dy=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uy(t,!1).get(n),e.next=3,new oy(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function py(e,t){var n=uy(e,!0).delete(t);return new oy(n).toPromise()}var vy=function(){function e(){O(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return F(e,[{key:"_openDb",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,cy();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zm()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ki(zi().mark((function e(){var t=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ym._getInstance(Zm()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ki(zi().mark((function e(n,r){var i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ki(zi().mark((function e(){var t,n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ey();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Jm(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ny()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,cy();case 5:return t=e.sent,e.next=8,ly(t,Bm,"1");case 8:return e.next=10,py(t,Bm);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ki(zi().mark((function e(t,n){var r=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ly(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return hy(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ki(zi().mark((function e(t){var n=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return py(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=uy(e,!1).getAll();return new oy(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Hi(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();vy.type="LOCAL";var my=vy;function yy(e,t){return jd(e,"POST","/v2/accounts/mfaSignIn:start",Ud(e,t))}function gy(e){return _y.apply(this,arguments)}function _y(){return(_y=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jd(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ky(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=wd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function wy(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var by=1e12,xy=function(){function e(t){O(this,e),this.auth=t,this.counter=by,this._widgets=new Map}return F(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Iy(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||by;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||by;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||by,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Iy=function(){function e(t,n,r){var i=this;O(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ed(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return F(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Ey=wy("rcb"),Sy=new Dd(3e4,6e4),Ty="https://www.google.com/recaptcha/api.js?",Cy=function(){function e(){var t;O(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Xm().grecaptcha)||void 0===t?void 0:t.render)}return F(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ed(Ny(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Xm().grecaptcha):new Promise((function(r,i){var a=Xm().setTimeout((function(){i(wd(e,"network-request-failed"))}),Sy.get());Xm()[Ey]=function(){Xm().clearTimeout(a),delete Xm()[Ey];var o=Xm().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(wd(e,"internal-error"))},ky("".concat(Ty,"?").concat(Pa({onload:Ey,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(wd(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Xm().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ny(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ay=function(){function e(){O(this,e)}return F(e,[{key:"load",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xy(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Py="recaptcha",Ry={theme:"light",type:"image"},Dy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ry),r=arguments.length>2?arguments[2]:void 0;O(this,e),this.parameters=n,this.type=Py,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Up(r),this.isInvisible="invisible"===this.parameters.size,Ed("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ed(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ay:new Cy,this.validateStartingState()}return F(e,[{key:"verify",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ed(!this.parameters.sitekey,this.auth,"argument-error"),Ed(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ed("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Xm()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ed(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ki(zi().mark((function e(){var t,n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ed(Pd()&&!Zm(),this.auth,"internal-error"),e.next=3,Oy();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,gy(this.auth);case 8:Ed(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ed(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Oy(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ly=function(){function e(t,n){O(this,e),this.verificationId=t,this.onConfirmation=n}return F(e,[{key:"confirm",value:function(e){var t=bv._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Fy(){return(Fy=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Up(t),e.next=3,Vy(i,n,Va(r));case 3:return a=e.sent,e.abrupt("return",new Ly(a,(function(e){return Xv(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function My(e,t,n){return Uy.apply(this,arguments)}function Uy(){return(Uy=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),e.next=3,Hv(!1,i,"phone");case 3:return e.next=5,Vy(i.auth,n,Va(r));case 5:return a=e.sent,e.abrupt("return",new Ly(a,(function(e){return em(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jy(){return(jy=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Va(t),e.next=3,Vy(i.auth,n,Va(r));case 3:return a=e.sent,e.abrupt("return",new Ly(a,(function(e){return nm(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vy(e,t,n){return qy.apply(this,arguments)}function qy(){return qy=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ed("string"===typeof a,t,"argument-error"),Ed(r.type===Py,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Ed("enroll"===u.type,t,"internal-error"),e.next=13,jm(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Ed("signin"===u.type,t,"internal-error"),Ed(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,yy(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,mv(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),qy.apply(this,arguments)}function By(){return(By=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wv(Va(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zy=function(){function e(t){O(this,e),this.providerId=e.PROVIDER_ID,this.auth=Up(t)}return F(e,[{key:"verifyPhoneNumber",value:function(e,t){return Vy(this.auth,e,Va(t))}}],[{key:"credential",value:function(e,t){return bv._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?bv._fromTokenResponse(n,r):null}}]),e}();function Wy(e,t){return t?Nd(t):(Ed(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zy.PROVIDER_ID="phone",zy.PHONE_SIGN_IN_METHOD="phone";var Ky=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"custom","custom")).params=e,r}return F(n,[{key:"_getIdTokenResponse",value:function(e){return dv(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dv(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dv(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zp);function Hy(e){return $v(e.auth,new Ky(e),e.bypassAuthState)}function Gy(e){var t=e.auth,n=e.user;return Ed(n,t,"internal-error"),Qv(n,new Ky(e),e.bypassAuthState)}function Qy(e){return Yy.apply(this,arguments)}function Yy(){return(Yy=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ed(r=t.user,n,"internal-error"),e.abrupt("return",Wv(r,new Ky(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $y=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];O(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return F(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ki(zi().mark((function t(n,r){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ki(zi().mark((function e(t){var n,r,i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hy;case"linkViaPopup":case"linkViaRedirect":return Qy;case"reauthViaPopup":case"reauthViaRedirect":return Gy;default:kd(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Jy=new Dd(2e3,1e4);function Xy(e,t,n){return Zy.apply(this,arguments)}function Zy(){return(Zy=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Up(t),xd(t,n,Ev),a=Wy(i,r),o=new rg(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(){return(eg=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xd((i=Va(t)).auth,n,Ev),a=Wy(i.auth,r),o=new rg(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tg(e,t,n){return ng.apply(this,arguments)}function ng(){return(ng=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xd((i=Va(t)).auth,n,Ev),a=Wy(i.auth,r),o=new rg(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rg=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o){var u;return O(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=B(u),u}return F(n,[{key:"executeNotNull",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ed(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ki(zi().mark((function e(){var t,n=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Td(1===this.filter.length,"Popup operations only handle one event"),t=$m(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(wd(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(wd(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(wd(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Jy.get())}()}}]),n}($y);rg.currentPopupAction=null;var ig=new Map,ag=function(e){U(n,e);var t=W(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return O(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return F(n,[{key:"execute",value:function(){var e=Ki(zi().mark((function e(){var t,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ig.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,og(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ed(j(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ig.set(this.auth._key(),t);case 21:return this.bypassAuthState||ig.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ki(zi().mark((function e(t){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ed(j(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ed(j(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}($y);function og(e,t){return ug.apply(this,arguments)}function ug(){return(ug=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hg(n),i=fg(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sg(e,t){return cg.apply(this,arguments)}function cg(){return(cg=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fg(t)._set(hg(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lg(e,t){ig.set(e._key(),t)}function fg(e){return Nd(e._redirectPersistence)}function hg(e){return wp("pendingRedirect",e.config.apiKey,e.name)}function dg(e,t,n){return function(e,t,n){return pg.apply(this,arguments)}(e,t,n)}function pg(){return(pg=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Up(t),xd(t,n,Ev),a=Wy(i,r),e.next=5,sg(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vg(e,t,n){return function(e,t,n){return mg.apply(this,arguments)}(e,t,n)}function mg(){return(mg=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xd((i=Va(t)).auth,n,Ev),a=Wy(i.auth,r),e.next=5,sg(a,i.auth);case 5:return e.next=7,xg(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yg(e,t,n){return function(e,t,n){return gg.apply(this,arguments)}(e,t,n)}function gg(){return(gg=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xd((i=Va(t)).auth,n,Ev),a=Wy(i.auth,r),e.next=5,Hv(!1,i,n.providerId);case 5:return e.next=7,sg(a,i.auth);case 7:return e.next=9,xg(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _g(e,t){return kg.apply(this,arguments)}function kg(){return(kg=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Up(t)._initializationPromise;case 2:return e.abrupt("return",wg(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wg(e,t){return bg.apply(this,arguments)}function bg(){return bg=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Up(t),a=Wy(i,n),o=new ag(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),bg.apply(this,arguments)}function xg(e){return Ig.apply(this,arguments)}function Ig(){return(Ig=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$m("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eg=function(){function e(t){O(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return F(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tg(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Tg(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wd(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sg(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Sg(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Sg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Tg(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Cg(e){return Ng.apply(this,arguments)}function Ng(){return Ng=Ki(zi().mark((function e(t){var n,r=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",jd(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ng.apply(this,arguments)}var Ag=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pg=/^https?/;function Rg(){return(Rg=Ki(zi().mark((function e(t){var n,r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cg(t);case 4:n=e.sent,r=n.authorizedDomains,i=Hi(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Dg(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:kd(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Dg(e){var t=Ad(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Pg.test(r))return!1;if(Ag.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Og=new Dd(3e4,6e4);function Lg(){var e=Xm().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=D(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Fg=null;function Mg(e){return Fg=Fg||function(e){return new Promise((function(t,n){var r,i,a;function o(){Lg(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Lg(),n(wd(e,"network-request-failed"))},timeout:Og.get()})}if(null===(i=null===(r=Xm().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Xm().gapi)||void 0===a?void 0:a.load)){var u=wy("iframefcb");return Xm()[u]=function(){gapi.load?o():n(wd(e,"network-request-failed"))},ky("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Fg=null,e}))}(e),Fg}var Ug=new Dd(5e3,15e3),jg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qg(e){var t=e.config;Ed(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Od(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Lo},i=Vg.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Pa(r).slice(1))}function Bg(e){return zg.apply(this,arguments)}function zg(){return zg=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mg(t);case 2:return n=e.sent,Ed(r=Xm().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:qg(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jg,dontclear:!0},(function(e){return new Promise(function(){var n=Ki(zi().mark((function n(r,i){var a,o,u;return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Xm().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=wd(t,"network-request-failed"),o=Xm().setTimeout((function(){i(a)}),Ug.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),zg.apply(this,arguments)}var Wg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Kg="_blank",Hg="http://localhost",Gg=function(){function e(t){O(this,e),this.window=t,this.associatedEvent=null}return F(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Qg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Wg),{width:r.toString(),height:i.toString(),top:a,left:o}),l=ia().toLowerCase();n&&(u=Sp(l)?Kg:n),Ip(l)&&(t=t||Hg,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Rp(l)&&"_self"!==u)return Yg(t||"",u),new Gg(null);var h=window.open(t||"",u,f);Ed(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Gg(h)}function Yg(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $g="__/auth/handler",Jg="emulator/auth/handler";function Xg(e,t,n,r,i,a){Ed(e.config.authDomain,e,"auth-domain-config-required"),Ed(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Lo,eventId:i};if(t instanceof Ev){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ta(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Sv){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat($g);return Od(t,Jg)}(e),"?").concat(Pa(p).slice(1))}var Zg="webStorageSupport",e_=function(){function e(){O(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gm,this._completeRedirectFn=wg,this._overrideRedirectResult=lg}return F(e,[{key:"_openPopup",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){var a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Td(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Xg(t,n,r,Ad(),i),e.abrupt("return",Qg(t,o,$m()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Xg(t,n,r,Ad(),i),Xm().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Td(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bg(t);case 2:return n=e.sent,r=new Eg(t),n.register("authEvent",(function(e){return Ed(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Zg,{type:Zg},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),kd(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Rg.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Op()||Ep()||Pp()}}]),e}(),t_=e_,n_=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,"phone")).credential=e,r}return F(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return jd(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ud(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return jd(e,"POST","/v2/accounts/mfaSignIn:finalize",Ud(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){O(this,e),this.factorId=t}return F(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Sd("unexpected MultiFactorSessionType")}}}]),e}()),r_=function(){function e(){O(this,e)}return F(e,null,[{key:"assertion",value:function(e){return n_._fromCredential(e)}}]),e}();r_.FACTOR_ID="phone";var i_="@firebase/auth",a_="0.20.11",o_=function(){function e(t){O(this,e),this.auth=t,this.internalListeners=new Map}return F(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ed(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var u_;!function(e){var t;null===(t=da())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function s_(){return window}u_="Browser",Co(new qa("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Ed(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Ed(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:u_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lp(u_)},i=new Mp(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Co(new qa("auth-internal",(function(e){return function(e){return new o_(e)}(Up(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),qo(i_,a_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(u_)),qo(i_,a_,"esm2017");function c_(e,t,n){return l_.apply(this,arguments)}function l_(){return l_=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s_(),o=a.BuildInfo,Td(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,m_(n.sessionId);case 4:return u=e.sent,s={},Pp()?s.ibi=o.packageName:Cp()?s.apn=o.packageName:kd(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Xg(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(){return(f_=Ki(zi().mark((function e(t){var n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s_(),r=n.BuildInfo,i={},Pp()?i.iosBundleId=r.packageName:Cp()?i.androidPackageName=r.packageName:kd(t,"operation-not-supported-in-this-environment"),e.next=5,Cg(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h_(e){var t=s_().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function d_(e,t,n){return p_.apply(this,arguments)}function p_(){return p_=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s_(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(wd(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Cp()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),p_.apply(this,arguments)}function v_(e){var t,n,r,i,a,o,u,s,c,l,f=s_();Ed("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ed("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ed("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ed("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ed("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function m_(e){return y_.apply(this,arguments)}function y_(){return(y_=Ki(zi().mark((function e(t){var n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g_(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g_(e){if(Td(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var __=function(e){U(n,e);var t=W(n);function n(){var e;return O(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return F(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ed(j(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Eg);function k_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:E_(),postBody:null,tenantId:e.tenantId,error:wd(e,"no-auth-event")}}function w_(e,t){return S_()._set(T_(e),t)}function b_(e){return x_.apply(this,arguments)}function x_(){return(x_=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S_()._get(T_(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,S_()._remove(T_(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I_(e,t){var n,r,i=function(e){var t=C_(e),n=t.link?decodeURIComponent(t.link):void 0,r=C_(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return C_(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=C_(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?wd(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function E_(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function S_(){return Nd(Km)}function T_(e){return wp("authEvent",e.config.apiKey,e.name)}function C_(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||R(t)||u(t)||s();r[0];return Ra(r.slice(1).join("?"))}var N_=function(){function e(){O(this,e),this._redirectPersistence=Gm,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wg,this._overrideRedirectResult=lg}return F(e,[{key:"_initialize",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new __(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){kd(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){var a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v_(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ig.clear(),e.next=10,this._originValidation(t);case 10:return o=k_(t,r,i),e.next=13,w_(t,o);case 13:return e.next=15,c_(t,o,n);case 15:return u=e.sent,e.next=18,h_(u);case 18:return s=e.sent,e.abrupt("return",d_(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return f_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=s_(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ki(zi().mark((function n(){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b_(e);case 2:t.onEvent(P_());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ki(zi().mark((function n(r){var i,a;return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,b_(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=I_(i,r.url)),t.onEvent(a||P_());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");s_().handleOpenURL=function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),A_=N_;function P_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:wd("no-auth-event")}}function R_(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function D_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return!("file:"!==R_()&&"ionic:"!==R_()&&"capacitor:"!==R_()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function O_(){return ca()&&11===(null===document||void 0===document?void 0:document.documentMode)}function L_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return/Edge\/\d+/.test(e)}function F_(){try{var e=self.localStorage,t=$m();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia();return O_()||L_(e)}()||fa()}catch(n){return M_()&&fa()}return!1}function M_(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function U_(){return("http:"===R_()||"https:"===R_()||ua()||D_())&&!(sa()||oa())&&F_()&&!M_()}function j_(){return D_()&&"undefined"!==typeof document}function V_(){return q_.apply(this,arguments)}function q_(){return(q_=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j_()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B_={LOCAL:"local",NONE:"none",SESSION:"session"},z_=Ed,W_="persistence";function K_(e,t){z_(Object.values(B_).includes(t),e,"invalid-persistence-type"),sa()?z_(t!==B_.SESSION,e,"unsupported-persistence-type"):oa()?z_(t===B_.NONE,e,"unsupported-persistence-type"):M_()?z_(t===B_.NONE||t===B_.LOCAL&&fa(),e,"unsupported-persistence-type"):z_(t===B_.NONE||F_(),e,"unsupported-persistence-type")}function H_(e){return G_.apply(this,arguments)}function G_(){return(G_=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Q_(),r=wp(W_,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q_(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Y_=Ed,$_=function(){function e(){O(this,e),this.browserResolver=Nd(t_),this.cordovaResolver=Nd(A_),this.underlyingResolver=null,this._redirectPersistence=Gm,this._completeRedirectFn=wg,this._overrideRedirectResult=lg}return F(e,[{key:"_initialize",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return j_()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Y_(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V_();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function J_(e){return e.unwrap()}function X_(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new rk(e,function(e,t){var n,r=Va(e),i=t;return Ed(t.customData.operationType,r,"argument-error"),Ed(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Um._fromError(r,i)}(e,t));else if(i){var a=Z_(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Z_(e){var t=(e instanceof ga?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ga)&&"temporaryProof"in t&&"phoneNumber"in t)return zy.credentialFromResult(e);var n,r=t.providerId;if(!r||r===od)return null;switch(r){case ad:n=Nv;break;case rd:n=Cv;break;case id:n=Av;break;case ud:n=Dv;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Pv._create(r,u):vv._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Tv(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ga?n.credentialFromError(e):n.credentialFromResult(e)}function ek(e,t){return t.catch((function(t){throw t instanceof ga&&X_(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Z_(t)),additionalUserInfo:Fm(e),user:ik.getOrCreate(r)}}))}function tk(e,t){return nk.apply(this,arguments)}function nk(){return(nk=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ek(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rk=function(){function e(t,n){O(this,e),this.resolver=n,this.auth=t.wrapped()}return F(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ek(J_(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ik=function(){function e(t){O(this,e),this._delegate=t,this.multiFactor=function(e){var t=Va(e);return qm.has(t)||qm.set(t,Vm._fromUser(t)),qm.get(t)}(t)}return F(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ek(this.auth,em(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(this.auth,My(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ek(this.auth,tg(this._delegate,t,$_)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H_(Up(this.auth));case 2:return e.abrupt("return",yg(this._delegate,t,$_));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ek(this.auth,nm(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return tk(this.auth,function(e,t,n){return jy.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ek(this.auth,function(e,t,n){return eg.apply(this,arguments)}(this._delegate,e,$_))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H_(Up(this.auth));case 2:return e.abrupt("return",vg(this._delegate,t,$_));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return xm.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bv(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Cm(Va(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Cm(Va(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return By.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Tm.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Im.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ik.USER_MAP=new WeakMap;var ak=Ed,ok=function(){function e(t,n){if(O(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ak(r,"invalid-api-key",{appName:t.name}),ak(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?$_:void 0;this._delegate=n.initialize({options:{persistence:sk(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vd),this.linkUnderlyingAuth()}return F(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ik.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Vp(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return hm.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return dm(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return fm.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ek(this._delegate,mm(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return bm.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xv.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ak(U_(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_g(this._delegate,$_);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ek(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Up(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=uk(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=uk(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return gm.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return lm.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K_(this._delegate,t),e.t0=t,e.next=e.t0===B_.SESSION?4:e.t0===B_.LOCAL?6:e.t0===B_.NONE?11:13;break;case 4:return n=Gm,e.abrupt("break",14);case 6:return e.next=8,Nd(my)._isAvailable();case 8:return r=e.sent,n=r?my:Km,e.abrupt("break",14);case 11:return n=kp,e.abrupt("break",14);case 13:return e.abrupt("return",kd("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ek(this._delegate,function(e){return Uv.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ek(this._delegate,Xv(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ek(this._delegate,function(e,t){return om.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ek(this._delegate,function(e,t,n){return Xv(Va(e),Iv.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ek(this._delegate,function(e,t,n){return _m.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return tk(this._delegate,function(e,t,n){return Fy.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ak(U_(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ek(this._delegate,Xy(this._delegate,t,$_)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ak(U_(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,H_(this._delegate);case 3:return e.abrupt("return",dg(this._delegate,t,$_));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return vm.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function uk(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ik.getOrCreate(e))},error:t,complete:n}}function sk(e,t){var n=function(e,t){var n=Q_();if(!n)return[];var r=wp(W_,e,t);switch(n.getItem(r)){case B_.NONE:return[kp];case B_.LOCAL:return[my,Gm];case B_.SESSION:return[Gm];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(my)||n.push(my),"undefined"!==typeof window)for(var r=0,i=[Km,Gm];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(kp)||n.push(kp),n}ok.Persistence=B_;var ck=function(){function e(){O(this,e),this.providerId="phone",this._delegate=new zy(J_(Xh.auth()))}return F(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return zy.credential(e,t)}}]),e}();ck.PHONE_SIGN_IN_METHOD=zy.PHONE_SIGN_IN_METHOD,ck.PROVIDER_ID=zy.PROVIDER_ID;var lk,fk=Ed,hk=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xh.app();O(this,e),fk(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Dy(t,n,i.auth()),this.type=this._delegate.type}return F(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(lk=Xh).INTERNAL.registerComponent(new qa("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ok(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:sd,PASSWORD_RESET:cd,RECOVER_EMAIL:ld,REVERT_SECOND_FACTOR_ADDITION:fd,VERIFY_AND_CHANGE_EMAIL:hd,VERIFY_EMAIL:dd}},EmailAuthProvider:Iv,FacebookAuthProvider:Cv,GithubAuthProvider:Av,GoogleAuthProvider:Nv,OAuthProvider:Tv,SAMLAuthProvider:Rv,PhoneAuthProvider:ck,PhoneMultiFactorGenerator:r_,RecaptchaVerifier:hk,TwitterAuthProvider:Dv,Auth:ok,AuthCredential:zp,Error:ga}).setInstantiationMode("LAZY").setMultipleInstances(!1)),lk.registerVersion("@firebase/auth-compat","0.2.24");var dk,pk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},vk={},mk=mk||{},yk=pk||self;function gk(){}function _k(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function kk(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var wk="closure_uid_"+(1e9*Math.random()>>>0),bk=0;function xk(e,t,n){return e.call.apply(e.bind,arguments)}function Ik(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ek(e,t,n){return(Ek=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xk:Ik).apply(null,arguments)}function Sk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Tk(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ck(){this.s=this.s,this.o=this.o}Ck.prototype.s=!1,Ck.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,wk)&&e[wk]||(e[wk]=++bk)}(this)},Ck.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Nk=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ak(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Pk(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(_k(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Rk(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Rk.prototype.h=function(){this.defaultPrevented=!0};var Dk=function(){if(!yk.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{yk.addEventListener("test",gk,t),yk.removeEventListener("test",gk,t)}catch(Gn){}return e}();function Ok(e){return/^[\s\xa0]*$/.test(e)}var Lk=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Fk(e,t){return e<t?-1:e>t?1:0}function Mk(){var e=yk.navigator;return e&&(e=e.userAgent)?e:""}function Uk(e){return-1!=Mk().indexOf(e)}function jk(e){return jk[" "](e),e}jk[" "]=gk;var Vk,qk=Uk("Opera"),Bk=Uk("Trident")||Uk("MSIE"),zk=Uk("Edge"),Wk=zk||Bk,Kk=Uk("Gecko")&&!(-1!=Mk().toLowerCase().indexOf("webkit")&&!Uk("Edge"))&&!(Uk("Trident")||Uk("MSIE"))&&!Uk("Edge"),Hk=-1!=Mk().toLowerCase().indexOf("webkit")&&!Uk("Edge");function Gk(){var e=yk.document;return e?e.documentMode:void 0}e:{var Qk="",Yk=function(){var e=Mk();return Kk?/rv:([^\);]+)(\)|;)/.exec(e):zk?/Edge\/([\d\.]+)/.exec(e):Bk?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hk?/WebKit\/(\S+)/.exec(e):qk?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Yk&&(Qk=Yk?Yk[1]:""),Bk){var $k=Gk();if(null!=$k&&$k>parseFloat(Qk)){Vk=String($k);break e}}Vk=Qk}var Jk,Xk={};function Zk(){return function(e){var t=Xk;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Lk(String(Vk)).split("."),n=Lk("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Fk(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Fk(0==a[2].length,0==o[2].length)||Fk(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(yk.document&&Bk){var ew=Gk();Jk=ew||(parseInt(Vk,10)||void 0)}else Jk=void 0;var tw=Jk;function nw(e,t){if(Rk.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kk){e:{try{jk(t.nodeName);var i=!0;break e}catch(Hn){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:rw[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&nw.X.h.call(this)}}Tk(nw,Rk);var rw={2:"touch",3:"pen",4:"mouse"};nw.prototype.h=function(){nw.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var iw="closure_listenable_"+(1e6*Math.random()|0),aw=0;function ow(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++aw,this.ba=this.ea=!1}function uw(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function sw(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function cw(e){var t={};for(var n in e)t[n]=e[n];return t}var lw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fw(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<lw.length;a++)n=lw[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function hw(e){this.src=e,this.g={},this.h=0}function dw(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Nk(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(uw(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pw(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}hw.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=pw(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new ow(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var vw="closure_lm_"+(1e6*Math.random()|0),mw={};function yw(e,t,n,r,i){if(r&&r.once)return _w(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)yw(e,t[a],n,r,i);return null}return n=Sw(n),e&&e[iw]?e.N(t,n,kk(r)?!!r.capture:!!r,i):gw(e,t,n,!1,r,i)}function gw(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=kk(i)?!!i.capture:!!i,u=Iw(e);if(u||(e[vw]=u=new hw(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xw;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Dk||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bw(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _w(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)_w(e,t[a],n,r,i);return null}return n=Sw(n),e&&e[iw]?e.O(t,n,kk(r)?!!r.capture:!!r,i):gw(e,t,n,!0,r,i)}function kw(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)kw(e,t[a],n,r,i);else r=kk(r)?!!r.capture:!!r,n=Sw(n),e&&e[iw]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pw(a=e.g[t],n,r,i))&&(uw(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Iw(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pw(t,n,r,i)),(n=-1<e?t[e]:null)&&ww(n))}function ww(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[iw])dw(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bw(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Iw(t))?(dw(n,e),0==n.h&&(n.src=null,t[vw]=null)):uw(e)}}}function bw(e){return e in mw?mw[e]:mw[e]="on"+e}function xw(e,t){if(e.ba)e=!0;else{t=new nw(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ww(e),e=n.call(r,t)}return e}function Iw(e){return(e=e[vw])instanceof hw?e:null}var Ew="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sw(e){return"function"===typeof e?e:(e[Ew]||(e[Ew]=function(t){return e.handleEvent(t)}),e[Ew])}function Tw(){Ck.call(this),this.i=new hw(this),this.P=this,this.I=null}function Cw(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Rk(t,e);else if(t instanceof Rk)t.target=t.target||e;else{var i=t;fw(t=new Rk(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Nw(o,r,!0,t)&&i}if(i=Nw(o=t.g=e,r,!0,t)&&i,i=Nw(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Nw(o=t.g=n[a],r,!1,t)&&i}function Nw(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&dw(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Tk(Tw,Ck),Tw.prototype[iw]=!0,Tw.prototype.removeEventListener=function(e,t,n,r){kw(this,e,t,n,r)},Tw.prototype.M=function(){if(Tw.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)uw(n[r]);delete t.g[e],t.h--}}this.I=null},Tw.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Tw.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Aw=yk.JSON.stringify;function Pw(){var e=jw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rw,Dw=function(){function e(){O(this,e),this.h=this.g=null}return F(e,[{key:"add",value:function(e,t){var n=Ow.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ow=new(function(){function e(t,n){O(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return F(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Lw}),(function(e){return e.reset()})),Lw=function(){function e(){O(this,e),this.next=this.g=this.h=null}return F(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Fw(e){yk.setTimeout((function(){throw e}),0)}function Mw(e,t){Rw||function(){var e=yk.Promise.resolve(void 0);Rw=function(){e.then(Vw)}}(),Uw||(Rw(),Uw=!0),jw.add(e,t)}var Uw=!1,jw=new Dw;function Vw(){for(var e;e=Pw();){try{e.h.call(e.g)}catch(Gn){Fw(Gn)}var t=Ow;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Uw=!1}function qw(e,t){Tw.call(this),this.h=e||1,this.g=t||yk,this.j=Ek(this.lb,this),this.l=Date.now()}function Bw(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function zw(e,t,n){if("function"===typeof e)n&&(e=Ek(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ek(e.handleEvent,e)}return 2147483647<Number(t)?-1:yk.setTimeout(e,t||0)}function Ww(e){e.g=zw((function(){e.g=null,e.i&&(e.i=!1,Ww(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Tk(qw,Tw),(dk=qw.prototype).ca=!1,dk.R=null,dk.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Cw(this,"tick"),this.ca&&(Bw(this),this.start()))}},dk.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dk.M=function(){qw.X.M.call(this),Bw(this),delete this.g};var Kw=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return F(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ww(this)}},{key:"M",value:function(){ed(j(n.prototype),"M",this).call(this),this.g&&(yk.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ck);function Hw(e){Ck.call(this),this.h=e,this.g={}}Tk(Hw,Ck);var Gw=[];function Qw(e,t,n,r){Array.isArray(n)||(n&&(Gw[0]=n.toString()),n=Gw);for(var i=0;i<n.length;i++){var a=yw(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Yw(e){sw(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ww(e)}),e),e.g={}}function $w(){this.g=!0}function Jw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Aw(n)}catch(jn){return t}}(e,n)+(r?" "+r:"")}))}Hw.prototype.M=function(){Hw.X.M.call(this),Yw(this)},Hw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$w.prototype.Aa=function(){this.g=!1},$w.prototype.info=function(){};var Xw={},Zw=null;function eb(){return Zw=Zw||new Tw}function tb(e){Rk.call(this,Xw.Pa,e)}function nb(e){var t=eb();Cw(t,new tb(t))}function rb(e,t){Rk.call(this,Xw.STAT_EVENT,e),this.stat=t}function ib(e){var t=eb();Cw(t,new rb(t,e))}function ab(e,t){Rk.call(this,Xw.Qa,e),this.size=t}function ob(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return yk.setTimeout((function(){e()}),t)}Xw.Pa="serverreachability",Tk(tb,Rk),Xw.STAT_EVENT="statevent",Tk(rb,Rk),Xw.Qa="timingevent",Tk(ab,Rk);var ub={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cb(){}function lb(e){return e.h||(e.h=e.i())}function fb(){}cb.prototype.h=null;var hb,db={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pb(){Rk.call(this,"d")}function vb(){Rk.call(this,"c")}function mb(){}function yb(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Hw(this),this.O=_b,e=Wk?125:void 0,this.T=new qw(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gb}function gb(){this.i=null,this.g="",this.h=!1}Tk(pb,Rk),Tk(vb,Rk),Tk(mb,cb),mb.prototype.g=function(){return new XMLHttpRequest},mb.prototype.i=function(){return{}},hb=new mb;var _b=45e3,kb={},wb={};function bb(e,t,n){e.K=1,e.v=qb(Fb(t)),e.s=n,e.P=!0,xb(e,null)}function xb(e,t){e.F=Date.now(),Tb(e),e.A=Fb(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),ex(n.i,"t",r),e.C=0,n=e.l.H,e.h=new gb,e.g=eI(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Kw(Ek(e.La,e,e.g),e.N)),Qw(e.S,e.g,"readystatechange",e.ib),t=e.H?cw(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),nb(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ib(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Eb(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Sb(e,n))==wb){4==t&&(e.o=4,ib(14),i=!1),Jw(e.j,e.m,null,"[Incomplete Response]");break}if(r==kb){e.o=4,ib(15),Jw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Jw(e.j,e.m,r,null),Rb(e,r)}Ib(e)&&r!=wb&&r!=kb&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ib(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hx(t),t.K=!0,ib(11))):(Jw(e.j,e.m,n,"[Invalid Chunked Response]"),Pb(e),Ab(e))}function Sb(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wb:(n=Number(t.substring(n,r)),isNaN(n)?kb:(r+=1)+n>t.length?wb:(t=t.substr(r,n),e.C=r+n,t))}function Tb(e){e.V=Date.now()+e.O,Cb(e,e.O)}function Cb(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ob(Ek(e.gb,e),t)}function Nb(e){e.B&&(yk.clearTimeout(e.B),e.B=null)}function Ab(e){0==e.l.G||e.I||Yx(e.l,e)}function Pb(e){Nb(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Bw(e.T),Yw(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Rb(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ux(n.h,e)))if(!e.J&&ux(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qx(n),Ux(n)}Kx(n),ib(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=ob(Ek(n.cb,n),6e3));if(1>=ox(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Jx(n,11)}else if((e.J||n.g==e)&&Qx(n),!Ok(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(sx(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Vb(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Zx(r,r.H?r.ka:null,r.V),d.J){cx(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Nb(p),Tb(p)),r.g=d}else Wx(r);0<n.i.length&&Vx(n)}else"stop"!=a[0]&&"close"!=a[0]||Jx(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Jx(n,7):Mx(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}nb()}catch(a){}}function Db(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(_k(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(_k(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(_k(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(dk=yb.prototype).setTimeout=function(e){this.O=e},dk.ib=function(e){e=e.target;var t=this.L;t&&3==Px(e)?t.l():this.La(e)},dk.La=function(e){try{if(e==this.g)e:{var t=Px(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Wk||this.g&&(this.h.h||this.g.fa()||Rx(this.g)))){this.I||4!=t||7==n||nb(),Nb(this);var r=this.g.aa();this.Y=r;t:if(Ib(this)){var i=Rx(this.g);e="";var a=i.length,o=4==Px(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pb(this),Ab(this);var u="";break t}this.h.i=new yk.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ok(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ib(12),Pb(this),Ab(this);break e}Jw(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rb(this,r)}this.P?(Eb(this,t,u),Wk&&this.i&&3==t&&(Qw(this.S,this.T,"tick",this.hb),this.T.start())):(Jw(this.j,this.m,u,null),Rb(this,u)),4==t&&Pb(this),this.i&&!this.I&&(4==t?Yx(this.l,this):(this.i=!1,Tb(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ib(12)):(this.o=0,ib(13)),Pb(this),Ab(this)}}}catch(t){}},dk.hb=function(){if(this.g){var e=Px(this.g),t=this.g.fa();this.C<t.length&&(Nb(this),Eb(this,e,t),this.i&&4!=e&&Tb(this))}},dk.cancel=function(){this.I=!0,Pb(this)},dk.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(nb(),ib(17)),Pb(this),this.o=2,Ab(this)):Cb(this,this.V-e)};var Ob=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lb(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Lb){this.h=void 0!==t?t:e.h,Mb(this,e.j),this.s=e.s,this.g=e.g,Ub(this,e.m),this.l=e.l,t=e.i;var n=new $b;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),jb(this,n),this.o=e.o}else e&&(n=String(e).match(Ob))?(this.h=!!t,Mb(this,n[1]||"",!0),this.s=Bb(n[2]||""),this.g=Bb(n[3]||"",!0),Ub(this,n[4]),this.l=Bb(n[5]||"",!0),jb(this,n[6]||"",!0),this.o=Bb(n[7]||"")):(this.h=!!t,this.i=new $b(null,this.h))}function Fb(e){return new Lb(e)}function Mb(e,t,n){e.j=n?Bb(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ub(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jb(e,t,n){t instanceof $b?(e.i=t,function(e,t){t&&!e.j&&(Jb(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xb(this,t),ex(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=zb(t,Qb)),e.i=new $b(t,e.h))}function Vb(e,t,n){e.i.set(t,n)}function qb(e){return Vb(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bb(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zb(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wb),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wb(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lb.prototype.toString=function(){var e=[],t=this.j;t&&e.push(zb(t,Kb,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(zb(t,Kb,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(zb(n,"/"==n.charAt(0)?Gb:Hb,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",zb(n,Yb)),e.join("")};var Kb=/[#\/\?@]/g,Hb=/[#\?:]/g,Gb=/[#\?]/g,Qb=/[#\?@]/g,Yb=/#/g;function $b(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Jb(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xb(e,t){Jb(e),t=tx(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zb(e,t){return Jb(e),t=tx(e,t),e.g.has(t)}function ex(e,t,n){Xb(e,t),0<n.length&&(e.i=null,e.g.set(tx(e,t),Ak(n)),e.h+=n.length)}function tx(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(dk=$b.prototype).add=function(e,t){Jb(this),this.i=null,e=tx(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},dk.forEach=function(e,t){Jb(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},dk.oa=function(){Jb(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},dk.W=function(e){Jb(this);var t=[];if("string"===typeof e)Zb(this,e)&&(t=t.concat(this.g.get(tx(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},dk.set=function(e,t){return Jb(this),this.i=null,Zb(this,e=tx(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},dk.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},dk.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var nx=F((function e(t,n){O(this,e),this.h=t,this.g=n}));function rx(e){this.l=e||ix,yk.PerformanceNavigationTiming?e=0<(e=yk.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(yk.g&&yk.g.Ga&&yk.g.Ga()&&yk.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ix=10;function ax(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ox(e){return e.h?1:e.g?e.g.size:0}function ux(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function sx(e,t){e.g?e.g.add(t):e.h=t}function cx(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lx(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Hi(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ak(e.i)}function fx(){}function hx(){this.g=new fx}function dx(e,t,n){var r=n||"";try{Db(e,(function(e,n){var i=e;kk(e)&&(i=Aw(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function px(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Hn){}}function vx(e){this.l=e.ac||null,this.j=e.jb||!1}function mx(e,t){Tw.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=yx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rx.prototype.cancel=function(){if(this.i=lx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Hi(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},fx.prototype.stringify=function(e){return yk.JSON.stringify(e,void 0)},fx.prototype.parse=function(e){return yk.JSON.parse(e,void 0)},Tk(vx,cb),vx.prototype.g=function(){return new mx(this.l,this.j)},vx.prototype.i=function(e){return function(){return e}}({}),Tk(mx,Tw);var yx=0;function gx(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function _x(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kx(e)}function kx(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(dk=mx.prototype).open=function(e,t){if(this.readyState!=yx)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kx(this)},dk.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||yk).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},dk.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_x(this)),this.readyState=yx},dk.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kx(this)),this.g&&(this.readyState=3,kx(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof yk.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gx(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},dk.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_x(this):kx(this),3==this.readyState&&gx(this)}},dk.Va=function(e){this.g&&(this.response=this.responseText=e,_x(this))},dk.Ua=function(e){this.g&&(this.response=e,_x(this))},dk.ga=function(){this.g&&_x(this)},dk.setRequestHeader=function(e,t){this.v.append(e,t)},dk.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},dk.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(mx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var wx=yk.JSON.parse;function bx(e){Tw.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xx,this.K=this.L=!1}Tk(bx,Tw);var xx="",Ix=/^https?$/i,Ex=["POST","PUT"];function Sx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tx(e),Nx(e)}function Tx(e){e.D||(e.D=!0,Cw(e,"complete"),Cw(e,"error"))}function Cx(e){if(e.h&&"undefined"!=typeof mk&&(!e.C[1]||4!=Px(e)||2!=e.aa()))if(e.v&&4==Px(e))zw(e.Ha,0,e);else if(Cw(e,"readystatechange"),4==Px(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ob)[1]||null;if(!a&&yk.self&&yk.self.location){var o=yk.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ix.test(a?a.toLowerCase():"")}t=i}if(t)Cw(e,"complete"),Cw(e,"success");else{e.m=6;try{var u=2<Px(e)?e.g.statusText:""}catch(Wn){u=""}e.j=u+" ["+e.aa()+"]",Tx(e)}}finally{Nx(e)}}}function Nx(e,t){if(e.g){Ax(e);var n=e.g,r=e.C[0]?gk:null;e.g=null,e.C=null,t||Cw(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ax(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(yk.clearTimeout(e.A),e.A=null)}function Px(e){return e.g?e.g.readyState:0}function Rx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case xx:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(tr){return null}}function Dx(e){var t="";return sw(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ox(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dx(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Vb(e,t,n))}function Lx(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Fx(e){this.Ca=0,this.i=[],this.j=new $w,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Lx("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Lx("baseRetryDelayMs",5e3,e),this.bb=Lx("retryDelaySeedMs",1e4,e),this.$a=Lx("forwardChannelMaxRetries",2,e),this.ta=Lx("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new rx(e&&e.concurrentRequestLimit),this.Fa=new hx,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mx(e){if(jx(e),3==e.G){var t=e.U++,n=Fb(e.F);Vb(n,"SID",e.I),Vb(n,"RID",t),Vb(n,"TYPE","terminate"),Bx(e,n),(t=new yb(e,e.j,t,void 0)).K=2,t.v=qb(Fb(n)),n=!1,yk.navigator&&yk.navigator.sendBeacon&&(n=yk.navigator.sendBeacon(t.v.toString(),"")),!n&&yk.Image&&((new Image).src=t.v,n=!0),n||(t.g=eI(t.l,null),t.g.da(t.v)),t.F=Date.now(),Tb(t)}Xx(e)}function Ux(e){e.g&&(Hx(e),e.g.cancel(),e.g=null)}function jx(e){Ux(e),e.u&&(yk.clearTimeout(e.u),e.u=null),Qx(e),e.h.cancel(),e.m&&("number"===typeof e.m&&yk.clearTimeout(e.m),e.m=null)}function Vx(e){ax(e.h)||e.m||(e.m=!0,Mw(e.Ja,e),e.C=0)}function qx(e,t){var n;n=t?t.m:e.U++;var r=Fb(e.F);Vb(r,"SID",e.I),Vb(r,"RID",n),Vb(r,"AID",e.T),Bx(e,r),e.o&&e.s&&Ox(r,e.o,e.s),n=new yb(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=zx(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),sx(e.h,n),bb(n,r,t)}function Bx(e,t){e.ia&&sw(e.ia,(function(e,n){Vb(t,n,e)})),e.l&&Db({},(function(e,n){Vb(t,n,e)}))}function zx(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Ek(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{dx(l,o,"req"+c+"_")}catch(_r){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Wx(e){e.g||e.u||(e.Z=1,Mw(e.Ia,e),e.A=0)}function Kx(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=ob(Ek(e.Ia,e),$x(e,e.A)),e.A++,!0)}function Hx(e){null!=e.B&&(yk.clearTimeout(e.B),e.B=null)}function Gx(e){e.g=new yb(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Fb(e.sa);Vb(t,"RID","rpc"),Vb(t,"SID",e.I),Vb(t,"CI",e.L?"0":"1"),Vb(t,"AID",e.T),Vb(t,"TYPE","xmlhttp"),Bx(e,t),e.o&&e.s&&Ox(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=qb(Fb(t)),n.s=null,n.P=!0,xb(n,e)}function Qx(e){null!=e.v&&(yk.clearTimeout(e.v),e.v=null)}function Yx(e,t){var n=null;if(e.g==t){Qx(e),Hx(e),e.g=null;var r=2}else{if(!ux(e.h,t))return;n=t.D,cx(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Cw(r=eb(),new ab(r,n)),Vx(e)}else Wx(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(ox(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=ob(Ek(e.Ja,e,t),$x(e,e.C)),e.C++,!0))}(e,t)||2==r&&Kx(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Jx(e,5);break;case 4:Jx(e,10);break;case 3:Jx(e,6);break;default:Jx(e,2)}}function $x(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Jx(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Ek(e.kb,e);n||(n=new Lb("//www.google.com/images/cleardot.gif"),yk.location&&"http"==yk.location.protocol||Mb(n,"https"),qb(n)),function(e,t){var n=new $w;if(yk.Image){var r=new Image;r.onload=Sk(px,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Sk(px,n,r,"TestLoadImage: error",!1,t),r.onabort=Sk(px,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Sk(px,n,r,"TestLoadImage: timeout",!1,t),yk.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ib(2);e.G=0,e.l&&e.l.va(t),Xx(e),jx(e)}function Xx(e){if(e.G=0,e.la=[],e.l){var t=lx(e.h);0==t.length&&0==e.i.length||(Pk(e.la,t),Pk(e.la,e.i),e.h.i.length=0,Ak(e.i),e.i.length=0),e.l.ua()}}function Zx(e,t,n){var r=n instanceof Lb?Fb(n):new Lb(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ub(r,r.m);else{var i=yk.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Lb(null,void 0);r&&Mb(a,r),t&&(a.g=t),i&&Ub(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Vb(r,n,t),Vb(r,"VER",e.ma),Bx(e,r),r}function eI(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new bx(new vx({jb:!0})):new bx(e.ra)).Ka(e.H),t}function tI(){}function nI(){if(Bk&&!(10<=Number(tw)))throw Error("Environmental error: no available transport.")}function rI(e,t){Tw.call(this),this.g=new Fx(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Ok(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ok(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new oI(this)}function iI(e){pb.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function aI(){vb.call(this),this.status=1}function oI(e){this.g=e}(dk=bx.prototype).Ka=function(e){this.L=e},dk.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hb.g(),this.C=this.u?lb(this.u):lb(hb),this.g.onreadystatechange=Ek(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Sx(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Hi(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=yk.FormData&&e instanceof yk.FormData,!(0<=Nk(Ex,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=Hi(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ax(this),0<this.B&&((this.K=function(e){return Bk&&Zk()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ek(this.qa,this)):this.A=zw(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Sx(this,u)}},dk.qa=function(){"undefined"!=typeof mk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cw(this,"timeout"),this.abort(8))},dk.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Cw(this,"complete"),Cw(this,"abort"),Nx(this))},dk.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nx(this,!0)),bx.X.M.call(this)},dk.Ha=function(){this.s||(this.F||this.v||this.l?Cx(this):this.fb())},dk.fb=function(){Cx(this)},dk.aa=function(){try{return 2<Px(this)?this.g.status:-1}catch(Kn){return-1}},dk.fa=function(){try{return this.g?this.g.responseText:""}catch(Kn){return""}},dk.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wx(t)}},dk.Ea=function(){return this.m},dk.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(dk=Fx.prototype).ma=8,dk.G=1,dk.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new yb(this,this.j,e,void 0),n=this.s;if(this.S&&(n?fw(n=cw(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zx(this,t,r),Vb(i=Fb(this.F),"RID",e),Vb(i,"CVER",22),this.D&&Vb(i,"X-HTTP-Session-Id",this.D),Bx(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Dx(n)))+"&"+r:this.o&&Ox(i,this.o,n)),sx(this.h,t),this.Ya&&Vb(i,"TYPE","init"),this.O?(Vb(i,"$req",r),Vb(i,"SID","null"),t.Z=!0,bb(t,i,null)):bb(t,i,r),this.G=2}}else 3==this.G&&(e?qx(this,e):0==this.i.length||ax(this.h)||qx(this))},dk.Ia=function(){if(this.u=null,Gx(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=ob(Ek(this.eb,this),e)}},dk.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ib(10),Ux(this),Gx(this))},dk.cb=function(){null!=this.v&&(this.v=null,Ux(this),Kx(this),ib(19))},dk.kb=function(e){e?(this.j.info("Successfully pinged google.com"),ib(2)):(this.j.info("Failed to ping google.com"),ib(1))},(dk=tI.prototype).xa=function(){},dk.wa=function(){},dk.va=function(){},dk.ua=function(){},dk.Ra=function(){},nI.prototype.g=function(e,t){return new rI(e,t)},Tk(rI,Tw),rI.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;ib(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Zx(e,null,e.V),Vx(e)},rI.prototype.close=function(){Mx(this.g)},rI.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Aw(e),e=n);t.i.push(new nx(t.ab++,e)),3==t.G&&Vx(t)},rI.prototype.M=function(){this.g.l=null,delete this.j,Mx(this.g),delete this.g,rI.X.M.call(this)},Tk(iI,pb),Tk(aI,vb),Tk(oI,tI),oI.prototype.xa=function(){Cw(this.g,"a")},oI.prototype.wa=function(e){Cw(this.g,new iI(e))},oI.prototype.va=function(e){Cw(this.g,new aI)},oI.prototype.ua=function(){Cw(this.g,"b")},nI.prototype.createWebChannel=nI.prototype.g,rI.prototype.send=rI.prototype.u,rI.prototype.open=rI.prototype.m,rI.prototype.close=rI.prototype.close,ub.NO_ERROR=0,ub.TIMEOUT=8,ub.HTTP_ERROR=6,sb.COMPLETE="complete",fb.EventType=db,db.OPEN="a",db.CLOSE="b",db.ERROR="c",db.MESSAGE="d",Tw.prototype.listen=Tw.prototype.N,bx.prototype.listenOnce=bx.prototype.O,bx.prototype.getLastError=bx.prototype.Oa,bx.prototype.getLastErrorCode=bx.prototype.Ea,bx.prototype.getStatus=bx.prototype.aa,bx.prototype.getResponseJson=bx.prototype.Sa,bx.prototype.getResponseText=bx.prototype.fa,bx.prototype.send=bx.prototype.da,bx.prototype.setWithCredentials=bx.prototype.Ka;var uI=vk.createWebChannelTransport=function(){return new nI},sI=vk.getStatEventTarget=function(){return eb()},cI=vk.ErrorCode=ub,lI=vk.EventType=sb,fI=vk.Event=Xw,hI=vk.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},dI=vk.FetchXmlHttpFactory=vx,pI=vk.WebChannel=fb,vI=vk.XhrIo=bx,mI="@firebase/firestore",yI=function(){function e(t){O(this,e),this.uid=t}return F(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();yI.UNAUTHENTICATED=new yI(null),yI.GOOGLE_CREDENTIALS=new yI("google-credentials-uid"),yI.FIRST_PARTY=new yI("first-party-uid"),yI.MOCK_USER=new yI("mock-user");var gI="9.13.0",_I=new Xa("@firebase/firestore");function kI(){return _I.logLevel}function wI(e){if(_I.logLevel<=Ka.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(II);_I.debug.apply(_I,["Firestore (".concat(gI,"): ").concat(e)].concat(D(i)))}}function bI(e){if(_I.logLevel<=Ka.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(II);_I.error.apply(_I,["Firestore (".concat(gI,"): ").concat(e)].concat(D(i)))}}function xI(e){if(_I.logLevel<=Ka.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(II);_I.warn.apply(_I,["Firestore (".concat(gI,"): ").concat(e)].concat(D(i)))}}function II(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function EI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gI,") INTERNAL ASSERTION FAILED: ")+e;throw bI(t),new Error(t)}function SI(e,t){e||EI()}function TI(e,t){return e}var CI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},NI=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return F(n)}(ga),AI=F((function e(){var t=this;O(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),PI=F((function e(t,n){O(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),RI=function(){function e(){O(this,e)}return F(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yI.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),DI=function(){function e(t){O(this,e),this.token=t,this.changeListener=null}return F(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),OI=function(){function e(t){O(this,e),this.t=t,this.currentUser=yI.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return F(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new AI;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new AI,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){wI("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(wI("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new AI)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(wI("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(SI("string"==typeof n.accessToken),new PI(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return SI(null===e||"string"==typeof e),new yI(e)}}]),e}(),LI=function(){function e(t,n,r,i){O(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=yI.FIRST_PARTY,this.p=new Map}return F(e,[{key:"I",value:function(){return this.g?this.g():(SI(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),FI=function(){function e(t,n,r,i){O(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return F(e,[{key:"getToken",value:function(){return Promise.resolve(new LI(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(yI.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),MI=F((function e(t){O(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),UI=function(){function e(t){O(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return F(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&wI("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,wI("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){wI("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):wI("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(SI("string"==typeof t.token),e.A=t.token,new MI(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function jI(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var VI=function(){function e(){O(this,e)}return F(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=jI(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function qI(e,t){return e<t?-1:e>t?1:0}function BI(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function zI(e){return e+"\0"}var WI=function(){function e(t,n){if(O(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new NI(CI.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new NI(CI.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new NI(CI.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new NI(CI.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return F(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?qI(this.nanoseconds,e.nanoseconds):qI(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),KI=function(){function e(t){O(this,e),this.timestamp=t}return F(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new WI(0,0))}},{key:"max",value:function(){return new e(new WI(253402300799,999999999))}}]),e}(),HI=function(){function e(t,n,r){O(this,e),void 0===n?n=0:n>t.length&&EI(),void 0===r?r=t.length-n:r>t.length-n&&EI(),this.segments=t,this.offset=n,this.len=r}return F(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),GI=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new NI(CI.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,D(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(HI),QI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,YI=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return QI.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new NI(CI.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new NI(CI.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new NI(CI.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new NI(CI.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(HI),$I=function(){function e(t){O(this,e),this.path=t}return F(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===GI.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(GI.fromString(t))}},{key:"fromName",value:function(t){return new e(GI.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(GI.emptyPath())}},{key:"comparator",value:function(e,t){return GI.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new GI(t.slice()))}}]),e}(),JI=F((function e(t,n,r,i){O(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function XI(e){return e.fields.find((function(e){return 2===e.kind}))}function ZI(e){return e.fields.filter((function(e){return 2!==e.kind}))}JI.UNKNOWN_ID=-1;var eE=F((function e(t,n){O(this,e),this.fieldPath=t,this.kind=n}));var tE=function(){function e(t,n){O(this,e),this.sequenceNumber=t,this.offset=n}return F(e,null,[{key:"empty",value:function(){return new e(0,iE.min())}}]),e}();function nE(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=KI.fromTimestamp(1e9===r?new WI(n+1,0):new WI(n,r));return new iE(i,$I.empty(),t)}function rE(e){return new iE(e.readTime,e.key,-1)}var iE=function(){function e(t,n,r){O(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return F(e,null,[{key:"min",value:function(){return new e(KI.min(),$I.empty(),-1)}},{key:"max",value:function(){return new e(KI.max(),$I.empty(),-1)}}]),e}();function aE(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=$I.comparator(e.documentKey,t.documentKey))?n:qI(e.largestBatchId,t.largestBatchId)}var oE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uE=function(){function e(){O(this,e),this.onCommittedListeners=[]}return F(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function sE(e){return cE.apply(this,arguments)}function cE(){return cE=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===CI.FAILED_PRECONDITION&&t.message===oE){e.next=2;break}throw t;case 2:wI("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}var lE=function(){function e(t){var n=this;O(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return F(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&EI(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Hi(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),fE=function(){function e(t,n){var r=this;O(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new AI,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new pE(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=_E(e.target.error);r.P.reject(new pE(t,n))}}return F(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(wI("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mE(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new pE(n,t)}}}]),e}(),hE=function(){function e(t,n,r){O(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ia())&&bI("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return F(e,[{key:"F",value:function(){var e=Ki(zi().mark((function e(t){var n=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return wI("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new pE(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new NI(CI.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new NI(CI.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new pE(t,n))},i.onupgradeneeded=function(e){wI("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){wI("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ki(zi().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(zi().mark((function e(){var n,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=fE.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),lE.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,wI("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return wI("SimpleDb","Removing database:",e),yE(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!fa())return!1;if(e.N())return!0;var t=ia(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/sweptakes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),dE=function(){function e(t){O(this,e),this.U=t,this.q=!1,this.K=null}return F(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return yE(this.U.delete())}}]),e}(),pE=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,CI.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return F(n)}(NI);function vE(e){return"IndexedDbTransactionError"===e.name}var mE=function(){function e(t){O(this,e),this.store=t}return F(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(wI("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(wI("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),yE(n)}},{key:"add",value:function(e){return wI("SimpleDb","ADD",this.store.name,e,e),yE(this.store.add(e))}},{key:"get",value:function(e){var t=this;return yE(this.store.get(e)).next((function(n){return void 0===n&&(n=null),wI("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return wI("SimpleDb","DELETE",this.store.name,e),yE(this.store.delete(e))}},{key:"count",value:function(){return wI("SimpleDb","COUNT",this.store.name),yE(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new lE((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new lE((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){wI("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new lE((function(n,r){t.onerror=function(e){var t=_E(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new lE((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new dE(i),o=t(i.primaryKey,i.value,a);if(o instanceof lE){var u=o.catch((function(e){return a.done(),lE.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return lE.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function yE(e){return new lE((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_E(e.target.error);n(t)}}))}var gE=!1;function _E(e){var t=hE.D(ia());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new NI("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gE||(gE=!0,setTimeout((function(){throw r}),0)),r}}return e}var kE=function(){function e(t,n){O(this,e),this.asyncQueue=t,this.et=n,this.task=null}return F(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;wI("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=wI,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!vE(e.t4)){e.next=17;break}wI("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,sE(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),wE=function(){function e(t,n){O(this,e),this.localStore=t,this.persistence=n}return F(e,[{key:"st",value:function(){var e=Ki(zi().mark((function e(){var t,n=this,r=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return lE.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return wI("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return wI("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=rE(t);aE(r,n)>0&&(n=r)})),new iE(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),bE=function(){function e(t,n){var r=this;O(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return F(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function xE(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function IE(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EE(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}bE.at=-1;var SE=function(){function e(t,n){O(this,e),this.comparator=t,this.root=n||CE.EMPTY}return F(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,CE.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,CE.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new TE(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new TE(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new TE(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new TE(this.root,e,this.comparator,!0)}}]),e}(),TE=function(){function e(t,n,r,i){O(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return F(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),CE=function(){function e(t,n,r,i,a){O(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return F(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw EI();if(this.right.isRed())throw EI();var e=this.left.check();if(e!==this.right.check())throw EI();return e+(this.isRed()?0:1)}}]),e}();CE.EMPTY=null,CE.RED=!0,CE.BLACK=!1,CE.EMPTY=new(function(){function e(){O(this,e),this.size=0}return F(e,[{key:"key",get:function(){throw EI()}},{key:"value",get:function(){throw EI()}},{key:"color",get:function(){throw EI()}},{key:"left",get:function(){throw EI()}},{key:"right",get:function(){throw EI()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new CE(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var NE=function(){function e(t){O(this,e),this.comparator=t,this.data=new SE(this.comparator)}return F(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new AE(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new AE(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),AE=function(){function e(t){O(this,e),this.iter=t}return F(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function PE(e){return e.hasNext()?e.getNext():void 0}var RE=function(){function e(t){O(this,e),this.fields=t,t.sort(YI.comparator)}return F(e,[{key:"unionWith",value:function(t){var n,r=new NE(YI.comparator),i=Hi(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Hi(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Hi(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return BI(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var DE=function(e){function t(e){O(this,t),this.binaryString=e}return F(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return qI(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();DE.EMPTY_BYTE_STRING=new DE("");var OE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function LE(e){if(SI(!!e),"string"==typeof e){var t=0,n=OE.exec(e);if(SI(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:FE(e.seconds),nanos:FE(e.nanos)}}function FE(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ME(e){return"string"==typeof e?DE.fromBase64String(e):DE.fromUint8Array(e)}function UE(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jE(e){var t=e.mapValue.fields.__previous_value__;return UE(t)?jE(t):t}function VE(e){var t=LE(e.mapValue.fields.__local_write_time__.timestampValue);return new WI(t.seconds,t.nanos)}var qE=F((function e(t,n,r,i,a,o,u,s){O(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),BE=function(){function e(t,n){O(this,e),this.projectId=t,this.database=n||"(default)"}return F(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function zE(e){return null==e}function WE(e){return 0===e&&1/e==-1/0}function KE(e){return"number"==typeof e&&Number.isInteger(e)&&!WE(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var HE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},GE={nullValue:"NULL_VALUE"};function QE(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?UE(e)?4:sS(e)?9007199254740991:10:EI()}function YE(e,t){if(e===t)return!0;var n=QE(e);if(n!==QE(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return VE(e).isEqual(VE(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=LE(e.timestampValue),r=LE(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ME(e.bytesValue).isEqual(ME(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return FE(e.geoPointValue.latitude)===FE(t.geoPointValue.latitude)&&FE(e.geoPointValue.longitude)===FE(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return FE(e.integerValue)===FE(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=FE(e.doubleValue),r=FE(t.doubleValue);return n===r?WE(n)===WE(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return BI(e.arrayValue.values||[],t.arrayValue.values||[],YE);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xE(n)!==xE(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!YE(n[i],r[i])))return!1;return!0}(e,t);default:return EI()}}function $E(e,t){return void 0!==(e.values||[]).find((function(e){return YE(e,t)}))}function JE(e,t){if(e===t)return 0;var n=QE(e),r=QE(t);if(n!==r)return qI(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qI(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=FE(e.integerValue||e.doubleValue),r=FE(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return XE(e.timestampValue,t.timestampValue);case 4:return XE(VE(e),VE(t));case 5:return qI(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ME(e),r=ME(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=qI(n[i],r[i]);if(0!==a)return a}return qI(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=qI(FE(e.latitude),FE(t.latitude));return 0!==n?n:qI(FE(e.longitude),FE(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=JE(n[i],r[i]);if(a)return a}return qI(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===HE.mapValue&&t===HE.mapValue)return 0;if(e===HE.mapValue)return 1;if(t===HE.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=qI(r[o],a[o]);if(0!==u)return u;var s=JE(n[r[o]],i[a[o]]);if(0!==s)return s}return qI(r.length,a.length)}(e.mapValue,t.mapValue);default:throw EI()}}function XE(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qI(e,t);var n=LE(e),r=LE(t),i=qI(n.seconds,r.seconds);return 0!==i?i:qI(n.nanos,r.nanos)}function ZE(e){return eS(e)}function eS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=LE(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ME(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,$I.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Hi(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=eS(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Hi(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(eS(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):EI();var t,n}function tS(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nS(e){return!!e&&"integerValue"in e}function rS(e){return!!e&&"arrayValue"in e}function iS(e){return!!e&&"nullValue"in e}function aS(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oS(e){return!!e&&"mapValue"in e}function uS(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return IE(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=uS(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uS(e.arrayValue.values[r]);return n}return Object.assign({},e)}function sS(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cS(e){return"nullValue"in e?GE:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tS(BE.empty(),$I.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:EI()}function lS(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tS(BE.empty(),$I.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?HE:EI()}function fS(e,t){var n=JE(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function hS(e,t){var n=JE(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var dS=function(){function e(t){O(this,e),this.value=t}return F(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!oS(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uS(t)}},{key:"setAll",value:function(e){var t=this,n=YI.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uS(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());oS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return YE(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];oS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){IE(t,(function(t,n){return e[t]=n}));var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uS(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function pS(e){var t=[];return IE(e.fields,(function(e,n){var r=new YI([e]);if(oS(n)){var i=pS(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Hi(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new RE(t)}var vS=function(){function e(t,n,r,i,a,o){O(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return F(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=dS.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=dS.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=KI.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,KI.min(),KI.min(),dS.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,KI.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,KI.min(),dS.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,KI.min(),dS.empty(),2)}}]),e}(),mS=F((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;O(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function yS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new mS(e,t,n,r,i,a,o)}function gS(e){var t=TI(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ZE(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),zE(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ZE(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ZE(e)})).join(",")),t.ht=n}return t.ht}function _S(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!LS(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!YE(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!MS(e.startAt,t.startAt)&&MS(e.endAt,t.endAt)}function kS(e){return $I.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function wS(e,t){return e.filters.filter((function(e){return e instanceof IS&&e.field.isEqual(t)}))}function bS(e,t,n){var r,i=GE,a=!0,o=Hi(wS(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=GE,c=!0;switch(u.op){case"<":case"<=":s=cS(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=GE}fS({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];fS({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function xS(e,t,n){var r,i=HE,a=!0,o=Hi(wS(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=HE,c=!0;switch(u.op){case">=":case">":s=lS(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=HE}hS({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];hS({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var IS=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return F(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(JE(t,this.value)):null!==t&&QE(this.value)===QE(t)&&this.ft(JE(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return EI()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new ES(e,t,r):"array-contains"===t?new NS(e,r):"in"===t?new AS(e,r):"not-in"===t?new PS(e,r):"array-contains-any"===t?new RS(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new SS(e,n):new TS(e,n)}}]),n}(function(){return F((function e(){O(this,e)}))}()),ES=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e,r,i)).key=$I.fromName(i.referenceValue),a}return F(n,[{key:"matches",value:function(e){var t=$I.comparator(e.key,this.key);return this.ft(t)}}]),n}(IS),SS=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,"in",r)).keys=CS("in",r),i}return F(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(IS),TS=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,"not-in",r)).keys=CS("not-in",r),i}return F(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(IS);function CS(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return $I.fromName(e.referenceValue)}))}var NS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"array-contains",r)}return F(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return rS(t)&&$E(t.arrayValue,this.value)}}]),n}(IS),AS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"in",r)}return F(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$E(this.value.arrayValue,t)}}]),n}(IS),PS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"not-in",r)}return F(n,[{key:"matches",value:function(e){if($E(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$E(this.value.arrayValue,t)}}]),n}(IS),RS=function(e){U(n,e);var t=W(n);function n(e,r){return O(this,n),t.call(this,e,"array-contains-any",r)}return F(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!rS(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $E(t.value.arrayValue,e)}))}}]),n}(IS),DS=F((function e(t,n){O(this,e),this.position=t,this.inclusive=n})),OS=F((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";O(this,e),this.field=t,this.dir=n}));function LS(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function FS(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?$I.comparator($I.fromName(o.referenceValue),n.key):JE(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function MS(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!YE(e.position[n],t.position[n]))return!1;return!0}var US=F((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;O(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function jS(e,t,n,r,i,a,o,u){return new US(e,t,n,r,i,a,o,u)}function VS(e){return new US(e)}function qS(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function BS(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function zS(e){var t,n=Hi(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function WS(e){return null!==e.collectionGroup}function KS(e){var t=TI(e);if(null===t._t){t._t=[];var n=zS(t),r=BS(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new OS(n)),t._t.push(new OS(YI.keyField(),"asc"));else{var i,a=!1,o=Hi(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new OS(YI.keyField(),s))}}}return t._t}function HS(e){var t=TI(e);if(!t.wt)if("F"===t.limitType)t.wt=yS(t.path,t.collectionGroup,KS(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Hi(KS(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new OS(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new DS(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new DS(t.startAt.position,t.startAt.inclusive):null;t.wt=yS(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function GS(e,t,n){return new US(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function QS(e,t){return _S(HS(e),HS(t))&&e.limitType===t.limitType}function YS(e){return"".concat(gS(HS(e)),"|lt:").concat(e.limitType)}function $S(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ZE(t.value));var t})).join(", "),"]")),zE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ZE(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ZE(e)})).join(",")),"Target(".concat(t,")")}(HS(e)),"; limitType=").concat(e.limitType,")")}function JS(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):$I.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Hi(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Hi(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=FS(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,KS(e),t))&&!(e.endAt&&!function(e,t,n){var r=FS(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,KS(e),t))}(e,t)}function XS(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ZS(e){return function(t,n){var r,i=!1,a=Hi(KS(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=eT(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function eT(e,t,n){var r=e.field.isKeyField()?$I.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?JE(r,i):EI()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return EI()}}function tT(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:WE(t)?"-0":t}}function nT(e){return{integerValue:""+e}}function rT(e,t){return KE(t)?nT(t):tT(e,t)}var iT=F((function e(){O(this,e),this._=void 0}));function aT(e,t,n){return e instanceof sT?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof cT?lT(e,t):e instanceof fT?hT(e,t):function(e,t){var n=uT(e,t),r=pT(n)+pT(e.yt);return nS(n)&&nS(e.yt)?nT(r):tT(e.It,r)}(e,t)}function oT(e,t,n){return e instanceof cT?lT(e,t):e instanceof fT?hT(e,t):n}function uT(e,t){return e instanceof dT?nS(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var sT=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n)}(iT),cT=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).elements=e,r}return F(n)}(iT);function lT(e,t){var n,r=vT(t),i=Hi(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return YE(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fT=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).elements=e,r}return F(n)}(iT);function hT(e,t){var n,r=vT(t),i=Hi(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!YE(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var dT=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).It=e,i.yt=r,i}return F(n)}(iT);function pT(e){return FE(e.integerValue||e.doubleValue)}function vT(e){return rS(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var mT=F((function e(t,n){O(this,e),this.field=t,this.transform=n}));var yT=F((function e(t,n){O(this,e),this.version=t,this.transformResults=n})),gT=function(){function e(t,n){O(this,e),this.updateTime=t,this.exists=n}return F(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function _T(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var kT=F((function e(){O(this,e)}));function wT(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new DT(e.key,gT.none()):new ST(e.key,e.data,gT.none());var n,r=e.data,i=dS.empty(),a=new NE(YI.comparator),o=Hi(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new TT(e.key,i,new RE(a.toArray()),gT.none())}function bT(e,t,n){e instanceof ST?function(e,t,n){var r=e.value.clone(),i=NT(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof TT?function(e,t,n){if(_T(e.precondition,t)){var r=NT(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(CT(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xT(e,t,n,r){return e instanceof ST?function(e,t,n,r){if(!_T(e.precondition,t))return n;var i=e.value.clone(),a=AT(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof TT?function(e,t,n,r){if(!_T(e.precondition,t))return n;var i=AT(e.fieldTransforms,r,t),a=t.data;return a.setAll(CT(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return _T(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function IT(e,t){var n,r=null,i=Hi(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=uT(a.transform,o||null);null!=u&&(null===r&&(r=dS.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ET(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&BI(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cT&&t instanceof cT||e instanceof fT&&t instanceof fT?BI(e.elements,t.elements,YE):e instanceof dT&&t instanceof dT?YE(e.yt,t.yt):e instanceof sT&&t instanceof sT}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ST=function(e){U(n,e);var t=W(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return O(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return F(n,[{key:"getFieldMask",value:function(){return null}}]),n}(kT),TT=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return O(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return F(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(kT);function CT(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function NT(e,t,n){var r=new Map;SI(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,oT(o,u,n[i]))}return r}function AT(e,t,n){var r,i=new Map,a=Hi(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,aT(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var PT,RT,DT=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return F(n,[{key:"getFieldMask",value:function(){return null}}]),n}(kT),OT=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return F(n,[{key:"getFieldMask",value:function(){return null}}]),n}(kT),LT=F((function e(t){O(this,e),this.count=t}));function FT(e){switch(e){default:return EI();case CI.CANCELLED:case CI.UNKNOWN:case CI.DEADLINE_EXCEEDED:case CI.RESOURCE_EXHAUSTED:case CI.INTERNAL:case CI.UNAVAILABLE:case CI.UNAUTHENTICATED:return!1;case CI.INVALID_ARGUMENT:case CI.NOT_FOUND:case CI.ALREADY_EXISTS:case CI.PERMISSION_DENIED:case CI.FAILED_PRECONDITION:case CI.ABORTED:case CI.OUT_OF_RANGE:case CI.UNIMPLEMENTED:case CI.DATA_LOSS:return!0}}function MT(e){if(void 0===e)return bI("GRPC error has no .code"),CI.UNKNOWN;switch(e){case PT.OK:return CI.OK;case PT.CANCELLED:return CI.CANCELLED;case PT.UNKNOWN:return CI.UNKNOWN;case PT.DEADLINE_EXCEEDED:return CI.DEADLINE_EXCEEDED;case PT.RESOURCE_EXHAUSTED:return CI.RESOURCE_EXHAUSTED;case PT.INTERNAL:return CI.INTERNAL;case PT.UNAVAILABLE:return CI.UNAVAILABLE;case PT.UNAUTHENTICATED:return CI.UNAUTHENTICATED;case PT.INVALID_ARGUMENT:return CI.INVALID_ARGUMENT;case PT.NOT_FOUND:return CI.NOT_FOUND;case PT.ALREADY_EXISTS:return CI.ALREADY_EXISTS;case PT.PERMISSION_DENIED:return CI.PERMISSION_DENIED;case PT.FAILED_PRECONDITION:return CI.FAILED_PRECONDITION;case PT.ABORTED:return CI.ABORTED;case PT.OUT_OF_RANGE:return CI.OUT_OF_RANGE;case PT.UNIMPLEMENTED:return CI.UNIMPLEMENTED;case PT.DATA_LOSS:return CI.DATA_LOSS;default:return EI()}}(RT=PT||(PT={}))[RT.OK=0]="OK",RT[RT.CANCELLED=1]="CANCELLED",RT[RT.UNKNOWN=2]="UNKNOWN",RT[RT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",RT[RT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",RT[RT.NOT_FOUND=5]="NOT_FOUND",RT[RT.ALREADY_EXISTS=6]="ALREADY_EXISTS",RT[RT.PERMISSION_DENIED=7]="PERMISSION_DENIED",RT[RT.UNAUTHENTICATED=16]="UNAUTHENTICATED",RT[RT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",RT[RT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",RT[RT.ABORTED=10]="ABORTED",RT[RT.OUT_OF_RANGE=11]="OUT_OF_RANGE",RT[RT.UNIMPLEMENTED=12]="UNIMPLEMENTED",RT[RT.INTERNAL=13]="INTERNAL",RT[RT.UNAVAILABLE=14]="UNAVAILABLE",RT[RT.DATA_LOSS=15]="DATA_LOSS";var UT=function(){function e(t,n){O(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return F(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){IE(this.inner,(function(t,n){var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return EE(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),jT=new SE($I.comparator);function VT(){return jT}var qT=new SE($I.comparator);function BT(){for(var e=qT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zT(e){var t=qT;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function WT(){return HT()}function KT(){return HT()}function HT(){return new UT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var GT=new SE($I.comparator),QT=new NE($I.comparator);function YT(){for(var e=QT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var $T=new NE(qI);function JT(){return $T}var XT=function(){function e(t,n,r,i,a){O(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return F(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ZT.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(KI.min(),i,JT(),VT(),YT())}}]),e}(),ZT=function(){function e(t,n,r,i,a){O(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return F(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,YT(),YT(),YT())}}]),e}(),eC=F((function e(t,n,r,i){O(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),tC=F((function e(t,n){O(this,e),this.targetId=t,this.At=n})),nC=F((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DE.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;O(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),rC=function(){function e(){O(this,e),this.Rt=0,this.bt=oC(),this.Pt=DE.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return F(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=YT(),t=YT(),n=YT();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:EI()}})),new ZT(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=oC()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),iC=function(){function e(t){O(this,e),this.Bt=t,this.Lt=new Map,this.Ut=VT(),this.qt=aC(),this.Kt=new NE(qI)}return F(e,[{key:"Gt",value:function(e){var t,n=Hi(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Hi(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:EI()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(kS(i))if(0===n){var a=new $I(i.path);this.jt(t,a,vS.newNoDocument(a,KI.min()))}else SI(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&kS(a.target)){var o=new $I(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,vS.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=YT();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new XT(e,n,this.Kt,this.Ut,r);return this.Ut=VT(),this.qt=aC(),this.Kt=new NE(qI),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new rC,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new NE(qI),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||wI("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new rC),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function aC(){return new SE($I.comparator)}function oC(){return new SE($I.comparator)}var uC={asc:"ASCENDING",desc:"DESCENDING"},sC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cC=F((function e(t,n){O(this,e),this.databaseId=t,this.gt=n}));function lC(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fC(e,t){return e.gt?t.toBase64():t.toUint8Array()}function hC(e,t){return lC(e,t.toTimestamp())}function dC(e){return SI(!!e),KI.fromTimestamp(function(e){var t=LE(e);return new WI(t.seconds,t.nanos)}(e))}function pC(e,t){return function(e){return new GI(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function vC(e){var t=GI.fromString(e);return SI(UC(t)),t}function mC(e,t){return pC(e.databaseId,t.path)}function yC(e,t){var n=vC(t);if(n.get(1)!==e.databaseId.projectId)throw new NI(CI.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new NI(CI.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $I(wC(n))}function gC(e,t){return pC(e.databaseId,t)}function _C(e){var t=vC(e);return 4===t.length?GI.emptyPath():wC(t)}function kC(e){return new GI(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wC(e){return SI(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bC(e,t,n){return{name:mC(e,t),fields:n.value.mapValue.fields}}function xC(e,t,n){var r=yC(e,t.name),i=dC(t.updateTime),a=new dS({mapValue:{fields:t.fields}}),o=vS.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function IC(e,t){return"found"in t?function(e,t){SI(!!t.found),t.found.name,t.found.updateTime;var n=yC(e,t.found.name),r=dC(t.found.updateTime),i=new dS({mapValue:{fields:t.found.fields}});return vS.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){SI(!!t.missing),SI(!!t.readTime);var n=yC(e,t.missing),r=dC(t.readTime);return vS.newNoDocument(n,r)}(e,t):EI()}function EC(e,t){var n;if(t instanceof ST)n={update:bC(e,t.key,t.value)};else if(t instanceof DT)n={delete:mC(e,t.key)};else if(t instanceof TT)n={update:bC(e,t.key,t.data),updateMask:MC(t.fieldMask)};else{if(!(t instanceof OT))return EI();n={verify:mC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof sT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof dT)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw EI()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hC(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:EI()}(e,t.precondition)),n}function SC(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?gT.updateTime(dC(e.updateTime)):void 0!==e.exists?gT.exists(e.exists):gT.none()}(t.currentDocument):gT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)SI("REQUEST_TIME"===t.setToServerValue),n=new sT;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new cT(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new fT(i)}else"increment"in t?n=new dT(e,t.increment):EI();var a=YI.fromServerFormat(t.fieldPath);return new mT(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=yC(e,t.update.name),a=new dS({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new RE(t.map((function(e){return YI.fromServerFormat(e)})))}(t.updateMask);return new TT(i,a,o,n,r)}return new ST(i,a,n,r)}if(t.delete){var u=yC(e,t.delete);return new DT(u,n)}if(t.verify){var s=yC(e,t.verify);return new OT(s,n)}return EI()}function TC(e,t){return{documents:[gC(e,t.path)]}}function CC(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gC(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gC(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(aS(e.value))return{unaryFilter:{field:DC(e.field),op:"IS_NAN"}};if(iS(e.value))return{unaryFilter:{field:DC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(aS(e.value))return{unaryFilter:{field:DC(e.field),op:"IS_NOT_NAN"}};if(iS(e.value))return{unaryFilter:{field:DC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:DC(e.field),op:RC(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:DC(e.field),direction:PC(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||zE(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function NC(e){var t=_C(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){SI(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=AC(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new OS(OC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return zE(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new DS(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new DS(n,t)}(n.endAt)),jS(t,i,u,o,s,"F",c,l)}function AC(e){return e?void 0!==e.unaryFilter?[FC(e)]:void 0!==e.fieldFilter?[LC(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return AC(e)})).reduce((function(e,t){return e.concat(t)})):EI():[]}function PC(e){return uC[e]}function RC(e){return sC[e]}function DC(e){return{fieldPath:e.canonicalString()}}function OC(e){return YI.fromServerFormat(e.fieldPath)}function LC(e){return IS.create(OC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return EI()}}(e.fieldFilter.op),e.fieldFilter.value)}function FC(e){switch(e.unaryFilter.op){case"IS_NAN":var t=OC(e.unaryFilter.field);return IS.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=OC(e.unaryFilter.field);return IS.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=OC(e.unaryFilter.field);return IS.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=OC(e.unaryFilter.field);return IS.create(i,"!=",{nullValue:"NULL_VALUE"});default:return EI()}}function MC(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function UC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function jC(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=qC(t)),t=VC(e.get(n),t);return qC(t)}function VC(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function qC(e){return e+"\x01\x01"}function BC(e){var t=e.length;if(SI(t>=2),2===t)return SI("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),GI.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&EI(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:EI()}a=o+2}return new GI(r)}var zC=["userId","batchId"];function WC(e,t){return[e,jC(t)]}function KC(e,t,n){return[e,jC(t),n]}var HC={},GC=["prefixPath","collectionGroup","readTime","documentId"],QC=["prefixPath","collectionGroup","documentId"],YC=["collectionGroup","readTime","prefixPath","documentId"],$C=["canonicalId","targetId"],JC=["targetId","path"],XC=["path","targetId"],ZC=["collectionId","parent"],eN=["indexId","uid"],tN=["uid","sequenceNumber"],nN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rN=["indexId","uid","orderedDocumentKey"],iN=["userId","collectionPath","documentId"],aN=["userId","collectionPath","largestBatchId"],oN=["userId","collectionGroup","largestBatchId"],uN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),sN=[].concat(D(uN),["documentOverlays"]),cN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lN=cN,fN=[].concat(lN,["indexConfiguration","indexState","indexEntries"]),hN=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return F(n)}(uE);function dN(e,t){var n=TI(e);return hE.M(n.ie,t)}var pN=function(){function e(t,n,r,i){O(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return F(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&bT(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Hi(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=xT(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Hi(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=xT(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=KT();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=wT(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(KI.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),YT())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&BI(this.mutations,e.mutations,(function(e,t){return ET(e,t)}))&&BI(this.baseMutations,e.baseMutations,(function(e,t){return ET(e,t)}))}}]),e}(),vN=function(){function e(t,n,r,i){O(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return F(e,null,[{key:"from",value:function(t,n,r){SI(t.mutations.length===r.length);for(var i=GT,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),mN=function(){function e(t,n){O(this,e),this.largestBatchId=t,this.mutation=n}return F(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),yN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:KI.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:KI.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:DE.EMPTY_BYTE_STRING;O(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return F(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),gN=F((function e(t){O(this,e),this.re=t}));function _N(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kN(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:mC(e,t.key),fields:t.data.value.mapValue.fields,updateTime:lC(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:wN(t.version)};else{if(!t.isUnknownDocument())return EI();r.unknownDocument={path:n.path.toArray(),version:wN(t.version)}}return r}function kN(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function wN(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bN(e){var t=new WI(e.seconds,e.nanoseconds);return KI.fromTimestamp(t)}function xN(e,t){for(var n=(t.baseMutations||[]).map((function(t){return SC(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return SC(e.re,t)})),u=WI.fromMillis(t.localWriteTimeMs);return new pN(t.batchId,u,n,o)}function IN(e){var t,n,r=bN(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bN(e.lastLimboFreeSnapshotVersion):KI.min();return void 0!==e.query.documents?(SI(1===(n=e.query).documents.length),t=HS(VS(_C(n.documents[0])))):t=function(e){return HS(NC(e))}(e.query),new yN(t,e.targetId,0,e.lastListenSequenceNumber,r,i,DE.fromBase64String(e.resumeToken))}function EN(e,t){var n,r=wN(t.snapshotVersion),i=wN(t.lastLimboFreeSnapshotVersion);n=kS(t.target)?TC(e.re,t.target):CC(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:gS(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function SN(e){var t=NC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?GS(t,t.limit,"L"):t}function TN(e,t){return new mN(t.largestBatchId,SC(e.re,t.overlayMutation))}function CN(e,t){var n=t.path.lastSegment();return[e,jC(t.path.popLast()),n]}function NN(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:wN(r.readTime),documentKey:jC(r.documentKey.path),largestBatchId:r.largestBatchId}}var AN=function(){function e(){O(this,e)}return F(e,[{key:"getBundleMetadata",value:function(e,t){return PN(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:bN(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return PN(e).put({bundleId:(n=t).id,createTime:wN(dC(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return RN(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:SN(t.bundledQuery),readTime:bN(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return RN(e).put(function(e){return{name:e.name,readTime:wN(dC(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function PN(e){return dN(e,"bundles")}function RN(e){return dN(e,"namedQueries")}var DN=function(){function e(t,n){O(this,e),this.It=t,this.userId=n}return F(e,[{key:"getOverlay",value:function(e,t){var n=this;return ON(e).get(CN(this.userId,t)).next((function(e){return e?TN(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=WT();return lE.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new mN(t,a);i.push(r.ue(e,o))})),lE.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(jC(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ON(e).Y("collectionPathOverlayIndex",i))})),lE.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=WT(),a=jC(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ON(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Hi(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=TN(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=WT(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ON(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=TN(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return ON(e).put(function(e,t,n){var r=c(CN(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:EC(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ON(e){return dN(e,"documentOverlays")}var LN=function(){function e(){O(this,e)}return F(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(FE(e.integerValue));else if("doubleValue"in e){var n=FE(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),WE(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ME(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?sS(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):EI()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),$I.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function FN(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function MN(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=FN(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}LN.Te=new LN;var UN=function(){function e(){O(this,e),this.buffer=new Uint8Array(1024),this.position=0}return F(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Hi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Hi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=MN(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=MN(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),jN=function(){function e(t){O(this,e),this.Be=t}return F(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),VN=function(){function e(t){O(this,e),this.Be=t}return F(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),qN=function(){function e(){O(this,e),this.Be=new UN,this.Le=new jN(this.Be),this.Ue=new VN(this.Be)}return F(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),BN=function(){function e(t,n,r,i){O(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return F(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function zN(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=WN(e.arrayValue,t.arrayValue))?n:0!==(n=WN(e.directionalValue,t.directionalValue))?n:$I.comparator(e.documentKey,t.documentKey)}function WN(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var KN=function(){function e(t){O(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Hi(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return F(e,[{key:"We",value:function(e){var t=XI(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=ZI(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Hi(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),HN=function(){function e(){O(this,e),this.Ye=new GN}return F(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),lE.resolve()}},{key:"getCollectionParents",value:function(e,t){return lE.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return lE.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return lE.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return lE.resolve(null)}},{key:"getIndexType",value:function(e,t){return lE.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return lE.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return lE.resolve(null)}},{key:"getMinOffset",value:function(e,t){return lE.resolve(iE.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return lE.resolve(iE.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return lE.resolve()}},{key:"updateIndexEntries",value:function(e,t){return lE.resolve()}}]),e}(),GN=function(){function e(){O(this,e),this.index={}}return F(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new NE(GI.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new NE(GI.comparator)).toArray()}}]),e}(),QN=new Uint8Array(0),YN=function(){function e(t,n){O(this,e),this.user=t,this.databaseId=n,this.Xe=new GN,this.Ze=new UT((function(e){return gS(e)}),(function(e,t){return _S(e,t)})),this.uid=t.uid||""}return F(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:jC(i)};return $N(e).put(a)}return lE.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[zI(t),""],!1,!0);return $N(e).W(r).next((function(e){var r,i=Hi(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(BC(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=XN(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=ZN(e);return a.next((function(e){o.put(NN(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=XN(e),r=ZN(e),i=JN(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=JN(e),i=!0,a=new Map;return lE.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=YT(),o=[];return lE.forEach(a,(function(i,a){var u;wI("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(gS(t)));var s=function(e,t){var n=XI(t);if(void 0===n)return null;var r,i=Hi(wS(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Hi(ZI(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Hi(wS(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Hi(ZI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?bS(e,o.fieldPath,e.startAt):xS(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new DS(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Hi(ZI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?xS(e,o.fieldPath,e.endAt):bS(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new DS(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return lE.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=$I.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return lE.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):QN,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,D(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new BN(e,$I.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new BN(e,$I.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new KN(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Hi(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return lE.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new NE(YI.comparator),r=!1,i=Hi(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Hi(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new qN,i=Hi(ZI(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);LN.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new qN;return LN.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new qN;return LN.Te.ce(tS(this.databaseId,t),n.qe(function(e){var t=ZI(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new qN);var i,a=0,o=Hi(ZI(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Hi(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&rS(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);LN.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=D(e),a=[],o=Hi(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Hi(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new qN;f.seed(l.$e()),LN.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof IS&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=XN(e),i=ZN(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return lE.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new tE(t.sequenceNumber,new iE(bN(t.readTime),new $I(BC(t.documentKey)),t.largestBatchId)):tE.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new eE(YI.fromServerFormat(n),r)}));return new JI(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:qI(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=XN(e),a=ZN(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return lE.forEach(t,(function(t){return a.put(NN(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return lE.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?lE.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),lE.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?lE.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return JN(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return JN(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=JN(e),i=new NE(zN);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new BN(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new NE(zN),r=this.an(t,e);if(null==r)return n;var i=XI(t);if(null!=i){var a=e.data.field(i.fieldPath);if(rS(a)){var o,u=Hi(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new BN(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new BN(t.indexId,e.key,QN,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;wI("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=PE(a),s=PE(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=PE(o)):l?(i(u),u=PE(a)):(u=PE(a),s=PE(o))}}(r,i,zN,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),lE.waitFor(o)}},{key:"_n",value:function(e){var t=1;return ZN(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return zN(e,t)})).filter((function(e,t,n){return!t||0!==zN(e,n[t-1])}));var r=[];r.push(e);var i,a=Hi(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=zN(o,e),s=zN(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,QN,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,QN,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(eA)}},{key:"getMinOffset",value:function(e,t){var n=this;return lE.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||EI()}))})).next(eA)}}]),e}();function $N(e){return dN(e,"collectionParents")}function JN(e){return dN(e,"indexEntries")}function XN(e){return dN(e,"indexConfiguration")}function ZN(e){return dN(e,"indexState")}function eA(e){SI(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;aE(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new iE(t.readTime,t.documentKey,n)}var tA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nA=function(){function e(t,n,r){O(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return F(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function rA(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){SI(1===u)})));var c,l=[],f=Hi(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=KC(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return lE.waitFor(a).next((function(){return l}))}function iA(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw EI();t=e.noDocument}return JSON.stringify(t).length}nA.DEFAULT_COLLECTION_PERCENTILE=10,nA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nA.DEFAULT=new nA(41943040,nA.DEFAULT_COLLECTION_PERCENTILE,nA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nA.DISABLED=new nA(-1,0,0);var aA=function(){function e(t,n,r,i){O(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return F(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uA(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=sA(e),o=uA(e);return o.add({}).next((function(u){SI("number"==typeof u);var s,c=new pN(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return EC(e.re,t)})),i=n.mutations.map((function(t){return EC(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new NE((function(e,t){return qI(e.canonicalString(),t.canonicalString())})),d=Hi(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=KC(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,HC))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),lE.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return uA(e).get(t).next((function(e){return e?(SI(e.userId===n.userId),xN(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?lE.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return uA(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(SI(t.batchId>=r),a=xN(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return uA(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uA(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return xN(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=WC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return sA(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=BC(l);if(s===n.userId&&t.path.isEqual(h))return uA(e).get(f).next((function(e){if(!e)throw EI();SI(e.userId===n.userId),a.push(xN(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new NE(qI),i=[];return t.forEach((function(t){var a=WC(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=sA(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=BC(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),lE.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=WC(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new NE(qI);return sA(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=BC(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(uA(e).get(t).next((function(e){if(null===e)throw EI();SI(e.userId===n.userId),r.push(xN(n.It,e))})))})),lE.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return rA(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),lE.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return lE.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return sA(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=BC(e[1]);i.push(a)}else r.done()})).next((function(){SI(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return oA(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return cA(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return SI(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function oA(e,t,n){var r=WC(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return sA(e).Z({range:a,X:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function uA(e){return dN(e,"mutations")}function sA(e){return dN(e,"documentMutations")}function cA(e){return dN(e,"mutationQueues")}var lA=function(){function e(t){O(this,e),this.bn=t}return F(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),fA=function(){function e(t,n){O(this,e),this.referenceDelegate=t,this.It=n}return F(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new lA(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return KI.fromTimestamp(new WI(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return hA(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return SI(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return hA(e).Z((function(o,u){var s=IN(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return lE.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return hA(e).Z((function(e,n){var r=IN(n);t(r)}))}},{key:"Vn",value:function(e){return dA(e).get("targetGlobalKey").next((function(e){return SI(null!==e),e}))}},{key:"Sn",value:function(e,t){return dA(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return hA(e).put(EN(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=gS(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hA(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=IN(n);_S(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=pA(e);return t.forEach((function(t){var o=jC(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),lE.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=pA(e);return lE.forEach(t,(function(t){var a=jC(t.path);return lE.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=pA(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=pA(e),i=YT();return r.Z({range:n,X:!0},(function(e,t,n){var r=BC(e[1]),a=new $I(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=jC(t.path),r=IDBKeyRange.bound([n],[zI(n)],!1,!0),i=0;return pA(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return hA(e).get(t).next((function(e){return e?IN(e):null}))}}]),e}();function hA(e){return dN(e,"targets")}function dA(e){return dN(e,"targetGlobal")}function pA(e){return dN(e,"targetDocuments")}function vA(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=qI(r,o);return 0===s?qI(i,u):s}var mA=function(){function e(t){O(this,e),this.xn=t,this.buffer=new NE(vA),this.Nn=0}return F(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();vA(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),yA=function(){function e(t,n,r){O(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return F(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;wI("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!vE(e.t0)){e.next=12;break}wI("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,sE(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),gA=function(){function e(t,n){O(this,e),this.$n=t,this.params=n}return F(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return lE.resolve(bE.at);var r=new mA(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(wI("LruGarbageCollector","Garbage collection skipped; disabled"),lE.resolve(tA)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(wI("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),tA):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(wI("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),kI()<=Ka.DEBUG&&wI("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),lE.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),_A=function(){function e(t,n){O(this,e),this.db=t,this.garbageCollector=function(e,t){return new gA(e,t)}(this,n)}return F(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return kA(e,n)}},{key:"removeReference",value:function(e,t,n){return kA(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return kA(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return cA(e).tt((function(r){return oA(e,r,t).next((function(e){return e&&(n=!0),lE.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,KI.min()),pA(e).delete([0,jC(o.path)])}))}));i.push(s)}})).next((function(){return lE.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return kA(e,t)}},{key:"Kn",value:function(e,t){var n,r=pA(e),i=bE.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==bE.at&&t(new $I(BC(n)),i),i=s,n=u):i=bE.at})).next((function(){i!==bE.at&&t(new $I(BC(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function kA(e,t){return pA(e).put(function(e,t){return{targetId:0,path:jC(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var wA=function(){function e(){O(this,e),this.changes=new UT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return F(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,vS.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?lE.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),bA=function(){function e(t){O(this,e),this.It=t}return F(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return SA(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return SA(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],kN(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=vS.newInvalidDocument(t);return SA(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(TA(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:vS.newInvalidDocument(t)};return SA(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(TA(t))},(function(e,i){r={document:n.jn(t,i),size:iA(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=VT();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=VT(),i=new SE($I.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,iA(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return lE.resolve();var r=new NE(NA);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(TA(r.first()),TA(r.last())),a=r.getIterator(),o=a.getNext();return SA(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=$I.fromSegments([].concat(D(t.prefixPath),[t.collectionGroup,t.documentId]));o&&NA(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(TA(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),kN(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return SA(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=VT(),i=Hi(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn($I.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=VT(),o=CA(t,n),u=CA(t,iE.max());return SA(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn($I.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new IA(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return EA(e).get("remoteDocumentGlobalKey").next((function(e){return SI(!!e),e}))}},{key:"Qn",value:function(e,t){return EA(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=xC(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=$I.fromSegments(t.noDocument.path),i=bN(t.noDocument.readTime);n=vS.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return EI();var a=$I.fromSegments(t.unknownDocument.path),o=bN(t.unknownDocument.version);n=vS.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new WI(e[0],e[1]);return KI.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(KI.min()))return n}return vS.newInvalidDocument(e)}}]),e}();function xA(e){return new bA(e)}var IA=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new UT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return F(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new NE((function(e,t){return qI(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=_N(t.Yn.It,o);i=i.add(a.path.popLast());var c=iA(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=_N(t.Yn.It,o.convertToNoDocument(KI.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),lE.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(wA);function EA(e){return dN(e,"remoteDocumentGlobal")}function SA(e){return dN(e,"remoteDocumentsV14")}function TA(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CA(e,t){var n=t.documentKey.path.toArray();return[e,kN(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function NA(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=qI(n[a],r[a]))return i;return(i=qI(n.length,r.length))||((i=qI(n[n.length-2],r[r.length-2]))||qI(n[n.length-1],r[r.length-1]))}var AA=F((function e(t,n){O(this,e),this.overlayedDocument=t,this.mutatedFields=n})),PA=function(){function e(t,n,r,i){O(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return F(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&xT(r.mutation,e,RE.empty(),WI.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,YT()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YT(),i=WT();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=BT();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=WT();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,YT())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=VT(),a=HT(),o=HT();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof TT)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),xT(o.mutation,t,o.mutation.getFieldMask(),WI.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new AA(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=HT(),i=new SE((function(e,t){return e-t})),a=YT();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Hi(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||RE.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||YT()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=KT();c.forEach((function(e){if(!a.has(e)){var n=wT(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return lE.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return $I.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):lE.resolve(WT()),u=-1,s=a;return o.next((function(t){return lE.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?lE.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,YT())})).next((function(e){return{batchId:u,changes:zT(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new $I(t)).next((function(e){var t=BT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=BT();return this.indexManager.getCollectionParents(e,i).next((function(o){return lE.forEach(o,(function(o){var u=function(e,t){return new US(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,vS.newInvalidDocument(n)))}));var n=BT();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&xT(a.mutation,i,RE.empty(),WI.now()),JS(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):lE.resolve(vS.newInvalidDocument(t))}}]),e}(),RA=function(){function e(t){O(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return F(e,[{key:"getBundleMetadata",value:function(e,t){return lE.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:dC(n.createTime)}),lE.resolve()}},{key:"getNamedQuery",value:function(e,t){return lE.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:SN(e.bundledQuery),readTime:dC(e.readTime)}}(t)),lE.resolve()}}]),e}(),DA=function(){function e(){O(this,e),this.overlays=new SE($I.comparator),this.es=new Map}return F(e,[{key:"getOverlay",value:function(e,t){return lE.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=WT();return lE.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),lE.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),lE.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=WT(),i=t.length+1,a=new $I(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return lE.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new SE((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=WT(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=WT(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return lE.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new mN(t,n));var a=this.es.get(t);void 0===a&&(a=YT(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),OA=function(){function e(){O(this,e),this.ns=new NE(LA.ss),this.rs=new NE(LA.os)}return F(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new LA(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new LA(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new $I(new GI([])),r=new LA(n,e),i=new LA(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new $I(new GI([])),n=new LA(t,e),r=new LA(t,e+1),i=YT();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new LA(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),LA=function(){function e(t,n){O(this,e),this.key=t,this._s=n}return F(e,null,[{key:"ss",value:function(e,t){return $I.comparator(e.key,t.key)||qI(e._s,t._s)}},{key:"os",value:function(e,t){return qI(e._s,t._s)||$I.comparator(e.key,t.key)}}]),e}(),FA=function(){function e(t,n){O(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new NE(LA.ss)}return F(e,[{key:"checkEmpty",value:function(e){return lE.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new pN(i,t,n,r);this.mutationQueue.push(a);var o,u=Hi(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new LA(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return lE.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return lE.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return lE.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return lE.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return lE.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new LA(t,0),i=new LA(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),lE.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new NE(qI);return t.forEach((function(e){var t=new LA(e,0),i=new LA(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),lE.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;$I.isDocumentKey(i)||(i=i.child(""));var a=new LA(new $I(i),0),o=new NE(qI);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),lE.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;SI(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return lE.forEach(t.mutations,(function(i){var a=new LA(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new LA(t,0),r=this.gs.firstAfterOrEqual(n);return lE.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,lE.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),MA=function(){function e(t){O(this,e),this.Es=t,this.docs=new SE($I.comparator),this.size=0}return F(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return lE.resolve(n?n.document.mutableCopy():vS.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=VT();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():vS.newInvalidDocument(e))})),lE.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=VT(),i=new $I(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||aE(rE(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return lE.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){EI()}},{key:"As",value:function(e,t){return lE.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new UA(this)}},{key:"getSize",value:function(e){return lE.resolve(this.size)}}]),e}(),UA=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).Yn=e,r}return F(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),lE.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(wA),jA=function(){function e(t){O(this,e),this.persistence=t,this.Rs=new UT((function(e){return gS(e)}),_S),this.lastRemoteSnapshotVersion=KI.min(),this.highestTargetId=0,this.bs=0,this.Ps=new OA,this.targetCount=0,this.vs=lA.Pn()}return F(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),lE.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return lE.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return lE.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),lE.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),lE.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new lA(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,lE.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),lE.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,lE.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),lE.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return lE.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return lE.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),lE.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),lE.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),lE.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return lE.resolve(n)}},{key:"containsKey",value:function(e,t){return lE.resolve(this.Ps.containsKey(t))}}]),e}(),VA=function(){function e(t,n){var r=this;O(this,e),this.Vs={},this.overlays={},this.Ss=new bE(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new jA(this),this.indexManager=new HN,this.remoteDocumentCache=new MA((function(e){return r.referenceDelegate.xs(e)})),this.It=new gN(n),this.Ns=new RA(this.It)}return F(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new DA,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new FA(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;wI("MemoryPersistence","Starting transaction:",e);var i=new qA(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return lE.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),qA=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return F(n)}(uE),BA=function(){function e(t){O(this,e),this.persistence=t,this.Fs=new OA,this.$s=null}return F(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw EI()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),lE.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),lE.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),lE.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lE.forEach(this.Ls,(function(r){var i=$I.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,KI.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return lE.or([function(){return lE.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),zA=function(){function e(t){O(this,e),this.It=t}return F(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new fE("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zC,{unique:!0}),e.createObjectStore("documentMutations")}(e),WA(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=lE.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),WA(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:KI.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zC,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return lE.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:iN});t.createIndex("collectionPathOverlayIndex",aN,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",oN,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:GC});t.createIndex("documentKeyIndex",QC),t.createIndex("collectionGroupIndex",YC)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:eN}).createIndex("sequenceNumberIndex",tN,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:nN}).createIndex("documentKeyIndex",rN,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=iA(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return lE.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return lE.forEach(r,(function(r){SI(r.userId===n.userId);var i=xN(t.It,r);return rA(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new GI(n),o=function(e){return[0,jC(e)]}(a);r.push(t.get(o).next((function(n){return n?lE.resolve():function(n){return t.put({targetId:0,path:jC(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return lE.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:ZC});var n=t.store("collectionParents"),r=new GN,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:jC(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new GI(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],BC(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=IN(r),a=EN(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new $I(GI.fromString(i.document.name).popFirst(5)):i.noDocument?$I.fromSegments(i.noDocument.path):i.unknownDocument?$I.fromSegments(i.unknownDocument.path):EI()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return lE.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=xA(this.It),a=new VA(BA.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:YT();xN(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),lE.forEach(r,(function(e,r){var o=new yI(r),u=DN.oe(n.It,o),s=a.getIndexManager(o),c=aA.oe(o,n.It,s,a.referenceDelegate);return new PA(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new hN(t,bE.at),e).next()}))}))}}]),e}();function WA(e){e.createObjectStore("targetDocuments",{keyPath:JC}).createIndex("documentTargetsIndex",XC,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$C,{unique:!0}),e.createObjectStore("targetGlobal")}var KA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HA=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(O(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new NI(CI.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _A(this,i),this.ii=n+"main",this.It=new gN(s),this.ri=new hE(this.ii,this.Xs,new zA(this.It)),this.Cs=new fA(this.referenceDelegate,this.It),this.remoteDocumentCache=xA(this.It),this.Ns=new AN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&bI("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return F(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new NI(CI.FAILED_PRECONDITION,KA);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new bE(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Ki(zi().mark((function n(r){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Ki(zi().mark((function t(n){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return QA(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(vE(t))return wI("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return wI("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return GA(e).get("owner").next((function(e){return lE.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return QA(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i,a=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=dN(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return lE.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Hi(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?lE.resolve(!0):GA(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new NI(CI.FAILED_PRECONDITION,KA);return!1}}return!(!t.networkEnabled||!t.inForeground)||QA(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&wI("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ki(zi().mark((function e(){var t=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new hN(e,bE.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return QA(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return aA.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new YN(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return DN.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;wI("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?fN:14===i?lN:13===i?cN:12===i?sN:11===i?uN:void EI();return this.ri.runTransaction(e,o,u,(function(i){return a=new hN(i,r.Ss?r.Ss.next():bE.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw bI("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new NI(CI.FAILED_PRECONDITION,oE);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return GA(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new NI(CI.FAILED_PRECONDITION,KA)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return GA(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=GA(e);return n.get("owner").next((function(e){return t.mi(e)?(wI("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):lE.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(bI("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!oa()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return wI("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return bI("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(qn){bI("Failed to set zombie client id.",qn)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(qn){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return hE.C()}}]),e}();function GA(e){return dN(e,"owner")}function QA(e){return dN(e,"clientMetadata")}function YA(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var $A=function(){function e(t,n,r,i){O(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return F(e,null,[{key:"Ci",value:function(t,n){var r,i=YT(),a=YT(),o=Hi(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),JA=function(){function e(){O(this,e),this.xi=!1}return F(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(qS(t))return lE.resolve(null);var r=HS(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=GS(t,null,"F"),r=HS(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=YT.apply(void 0,D(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,GS(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return qS(t)||r.isEqual(KI.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(kI()<=Ka.DEBUG&&wI("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$S(t)),i.Bi(e,o,t,nE(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new NE(ZS(e));return t.forEach((function(t,r){JS(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return kI()<=Ka.DEBUG&&wI("QueryEngine","Using full collection scan to execute query:",$S(t)),this.Ni.getDocumentsMatchingQuery(e,t,iE.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),XA=function(){function e(t,n,r,i){O(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new SE(qI),this.qi=new UT((function(e){return gS(e)}),_S),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return F(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function ZA(e,t,n,r){return new XA(e,t,n,r)}function eP(e,t){return tP.apply(this,arguments)}function tP(){return tP=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=YT(),s=Hi(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Hi(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(_){f.e(_)}finally{f.f()}}}catch(_){s.e(_)}finally{s.f()}var d,p=Hi(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Hi(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(_){y.e(_)}finally{y.f()}}}catch(_){p.e(_)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),tP.apply(this,arguments)}function nP(e,t){var n=TI(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=lE.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);SI(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=YT(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function rP(e){var t=TI(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function iP(e,t){var n=TI(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(DE.EMPTY_BYTE_STRING,KI.min()).withLastLimboFreeSnapshotVersion(KI.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=VT(),s=YT();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(aP(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(KI.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return lE.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function aP(e,t,n){var r=YT(),i=YT();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=VT();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(KI.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):wI("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function oP(e,t){var n=TI(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function uP(e,t){var n=TI(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,lE.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new yN(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function sP(e,t,n){return cP.apply(this,arguments)}function cP(){return cP=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=TI(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),vE(e.t1)){e.next=12;break}throw e.t1;case 12:wI("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),cP.apply(this,arguments)}function lP(e,t,n){var r=TI(e),i=KI.min(),a=YT();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=TI(e),i=r.qi.get(n);return void 0!==i?lE.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,HS(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:KI.min(),n?a:YT())})).next((function(e){return dP(r,XS(t),e),{documents:e,Hi:a}}))}))}function fP(e,t){var n=TI(e),r=TI(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function hP(e,t){var n=TI(e),r=n.Ki.get(t)||KI.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,nE(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return dP(n,t,e),e}))}function dP(e,t,n){var r=e.Ki.get(t)||KI.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function pP(e,t,n,r){return vP.apply(this,arguments)}function vP(){return vP=Ki(zi().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=TI(t),o=YT(),u=VT(),s=Hi(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,uP(a,function(e){return HS(VS(GI.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return aP(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),vP.apply(this,arguments)}function mP(e,t){return yP.apply(this,arguments)}function yP(){return yP=Ki(zi().mark((function e(t,n){var r,i,a,o=arguments;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:YT(),e.next=3,uP(t,HS(SN(n.bundledQuery)));case 3:return i=e.sent,a=TI(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=dC(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(DE.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),yP.apply(this,arguments)}function gP(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function _P(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function kP(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var wP=function(){function e(t,n,r,i){O(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return F(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new NI(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(bI("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),bP=function(){function e(t,n,r){O(this,e),this.targetId=t,this.state=n,this.error=r}return F(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new NI(i.error.code,i.error.message))),a?new e(t,i.state,r):(bI("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),xP=function(){function e(t,n){O(this,e),this.clientId=t,this.activeTargetIds=n}return F(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=JT(),o=0;i&&o<r.activeTargetIds.length;++o)i=KE(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(bI("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),IP=function(){function e(t,n){O(this,e),this.clientId=t,this.onlineState=n}return F(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(bI("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),EP=function(){function e(){O(this,e),this.activeTargetIds=JT()}return F(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),SP=function(){function e(t,n,r,i,a){O(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new SE(qI),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=gP(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new EP),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return F(e,[{key:"start",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Hi(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(gP(this.persistenceKey,i)))&&(o=xP.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=Hi(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(kP(this.persistenceKey,e));if(n){var r=bP.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(kP(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return wI("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){wI("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){wI("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(wI("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void bI("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Ki(zi().mark((function e(){var r,i,a,o,u,s,c;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=bE.at;if(null!=e)try{var n=JSON.parse(e);SI("number"==typeof n),t=n}catch(e){bI("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==bE.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new wP(this.currentUser,e,t,n),i=_P(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=_P(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=kP(this.persistenceKey,e),i=new bP(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return xP.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return wP.Zi(new yI(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return bP.Zi(r,t)}},{key:"yr",value:function(e){return IP.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:wI("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=JT();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),TP=function(){function e(){O(this,e),this.Lr=new EP,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return F(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new EP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),CP=function(){function e(){O(this,e)}return F(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),NP=function(){function e(){var t=this;O(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return F(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){wI("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Hi(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){wI("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Hi(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),AP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},PP=function(){function e(t){O(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return F(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),RP=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return F(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new vI;o.setWithCredentials(!0),o.listenOnce(lI.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case cI.NO_ERROR:var t=o.getResponseJson();wI("Connection","XHR received:",JSON.stringify(t)),i(t);break;case cI.TIMEOUT:wI("Connection",'RPC "'+e+'" timed out'),a(new NI(CI.DEADLINE_EXCEEDED,"Request time out"));break;case cI.HTTP_ERROR:var n=o.getStatus();if(wI("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(CI).indexOf(t)>=0?t:CI.UNKNOWN}(r.status);a(new NI(u,r.message))}else a(new NI(CI.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new NI(CI.UNAVAILABLE,"Connection failed."));break;default:EI()}}finally{wI("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=uI(),a=sI(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new dI({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");wI("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new PP({Hr:function(e){l?wI("Connection","Not sending because WebChannel is closed:",e):(c||(wI("Connection","Opening WebChannel transport."),s.open(),c=!0),wI("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,pI.EventType.OPEN,(function(){l||wI("Connection","WebChannel transport opened.")})),h(s,pI.EventType.CLOSE,(function(){l||(l=!0,wI("Connection","WebChannel transport closed"),f.io())})),h(s,pI.EventType.ERROR,(function(e){l||(l=!0,xI("Connection","WebChannel transport errored:",e),f.io(new NI(CI.UNAVAILABLE,"The operation could not be completed")))})),h(s,pI.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];SI(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){wI("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=PT[e];if(void 0!==t)return MT(t)}(a),u=i.message;void 0===o&&(o=CI.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new NI(o,u)),s.close()}else wI("Connection","WebChannel received:",n),f.ro(n)}})),h(a,fI.STAT_EVENT,(function(e){e.stat===hI.PROXY?wI("Connection","Detected buffering proxy"):e.stat===hI.NOPROXY&&wI("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){O(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return F(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);wI("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return wI("RestConnection","Received: ",e),e}),(function(t){throw xI("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gI,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=AP[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function DP(){return"undefined"!=typeof window?window:null}function OP(){return"undefined"!=typeof document?document:null}function LP(e){return new cC(e,!0)}var FP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;O(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return F(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&wI("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),MP=function(){function e(t,n,r,i,a,o,u,s){O(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new FP(t,n)}return F(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===CI.RESOURCE_EXHAUSTED?(bI(n.toString()),bI("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===CI.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new NI(CI.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return wI("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(wI("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),UP=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return F(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:EI()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(SI(void 0===t||"string"==typeof t),DE.fromBase64String(t||"")):(SI(void 0===t||t instanceof Uint8Array),DE.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?CI.UNKNOWN:MT(e.code);return new NI(t,e.message||"")}(o);n=new nC(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=yC(e,s.document.name),l=dC(s.document.updateTime),f=new dS({mapValue:{fields:s.document.fields}}),h=vS.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new eC(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=yC(e,v.document),y=v.readTime?dC(v.readTime):KI.min(),g=vS.newNoDocument(m,y),_=v.removedTargetIds||[];n=new eC([],_,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=yC(e,k.document),b=k.removedTargetIds||[];n=new eC([],b,w,null)}else{if(!("filter"in t))return EI();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new LT(I),S=x.targetId;n=new tC(S,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return KI.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?KI.min():t.readTime?dC(t.readTime):KI.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=kC(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=kS(r)?{documents:TC(e,r)}:{query:CC(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=fC(e,t.resumeToken):t.snapshotVersion.compareTo(KI.min())>0&&(n.readTime=lC(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return EI()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=kC(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(MP),jP=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return F(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,ed(j(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(SI(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(SI(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?dC(e.updateTime):dC(t);return n.isEqual(KI.min())&&(n=dC(t)),new yT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=dC(e.commitTime);return this.listener.Zo(n,t)}return SI(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=kC(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return EC(t.It,e)}))};this.Bo(n)}}]),n}(MP),VP=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return F(n,[{key:"su",value:function(){if(this.nu)throw new NI(CI.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===CI.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new NI(CI.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===CI.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new NI(CI.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return F((function e(){O(this,e)}))}());var qP=function(){function e(t,n){O(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return F(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(bI(t),this.ou=!1):wI("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),BP=F((function e(t,n,r,i,a){var o=this;O(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ZP(o),!e.t0){e.next=5;break}return wI("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=TI(t))._u.add(4),e.next=4,KP(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,zP(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new qP(r,i)}));function zP(e){return WP.apply(this,arguments)}function WP(){return WP=Ki(zi().mark((function e(t){var n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZP(t)){e.next=18;break}n=Hi(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),WP.apply(this,arguments)}function KP(e){return HP.apply(this,arguments)}function HP(){return HP=Ki(zi().mark((function e(t){var n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Hi(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),HP.apply(this,arguments)}function GP(e,t){var n=TI(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),XP(n)?JP(n):CR(n).ko()&&YP(n,t))}function QP(e,t){var n=TI(e),r=CR(n);n.du.delete(t),r.ko()&&$P(n,t),0===n.du.size&&(r.ko()?r.Fo():ZP(n)&&n.gu.set("Unknown"))}function YP(e,t){e.yu.Mt(t.targetId),CR(e).zo(t)}function $P(e,t){e.yu.Mt(t),CR(e).Ho(t)}function JP(e){e.yu=new iC({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),CR(e).start(),e.gu.uu()}function XP(e){return ZP(e)&&!CR(e).No()&&e.du.size>0}function ZP(e){return 0===TI(e)._u.size}function eR(e){e.yu=void 0}function tR(e){return nR.apply(this,arguments)}function nR(){return nR=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){YP(t,e)}));case 1:case"end":return e.stop()}}),e)}))),nR.apply(this,arguments)}function rR(e,t){return iR.apply(this,arguments)}function iR(){return iR=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eR(t),XP(t)?(t.gu.hu(n),JP(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),iR.apply(this,arguments)}function aR(e,t,n){return oR.apply(this,arguments)}function oR(){return oR=Ki(zi().mark((function e(t,n,r){var i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof nC&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Hi(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),wI("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,uR(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof eC?t.yu.Gt(n):n instanceof tC?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(KI.min())){e.next=29;break}return e.prev=14,e.next=17,rP(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(DE.EMPTY_BYTE_STRING,n.snapshotVersion)),$P(e,t);var r=new yN(n.target,t,1,n.sequenceNumber);YP(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),wI("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,uR(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),oR.apply(this,arguments)}function uR(e,t,n){return sR.apply(this,arguments)}function sR(){return sR=Ki(zi().mark((function e(t,n,r){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vE(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,KP(t);case 5:t.gu.set("Offline"),r||(r=function(){return rP(t.localStore)}),t.asyncQueue.enqueueRetryable(Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wI("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,zP(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),sR.apply(this,arguments)}function cR(e,t){return t().catch((function(n){return uR(e,n,t)}))}function lR(e){return fR.apply(this,arguments)}function fR(){return fR=Ki(zi().mark((function e(t){var n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=TI(t),r=NR(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!hR(n)){e.next=19;break}return e.prev=3,e.next=6,oP(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,dR(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,uR(n,e.t0);case 17:e.next=2;break;case 19:pR(n)&&vR(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),fR.apply(this,arguments)}function hR(e){return ZP(e)&&e.fu.length<10}function dR(e,t){e.fu.push(t);var n=NR(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function pR(e){return ZP(e)&&!NR(e).No()&&e.fu.length>0}function vR(e){NR(e).start()}function mR(e){return yR.apply(this,arguments)}function yR(){return yR=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:NR(t).eu();case 1:case"end":return e.stop()}}),e)}))),yR.apply(this,arguments)}function gR(e){return _R.apply(this,arguments)}function _R(){return _R=Ki(zi().mark((function e(t){var n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=NR(t),r=Hi(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),_R.apply(this,arguments)}function kR(e,t,n){return wR.apply(this,arguments)}function wR(){return wR=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=vN.from(i,n,r),e.next=3,cR(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,lR(t);case 5:case"end":return e.stop()}}),e)}))),wR.apply(this,arguments)}function bR(e,t){return xR.apply(this,arguments)}function xR(){return xR=Ki(zi().mark((function e(t,n){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&NR(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!FT(i=n.code)||i===CI.ABORTED){e.next=7;break}return r=t.fu.shift(),NR(t).Mo(),e.next=5,cR(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,lR(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:pR(t)&&vR(t);case 5:case"end":return e.stop()}}),e)}))),xR.apply(this,arguments)}function IR(e,t){return ER.apply(this,arguments)}function ER(){return ER=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=TI(t)).asyncQueue.verifyOperationInProgress(),wI("RemoteStore","RemoteStore received new credentials"),i=ZP(r),r._u.add(3),e.next=6,KP(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,zP(r);case 12:case"end":return e.stop()}}),e)}))),ER.apply(this,arguments)}function SR(e,t){return TR.apply(this,arguments)}function TR(){return TR=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=TI(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,zP(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,KP(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),TR.apply(this,arguments)}function CR(e){return e.pu||(e.pu=function(e,t,n){var r=TI(e);return r.su(),new UP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:tR.bind(null,e),Zr:rR.bind(null,e),Wo:aR.bind(null,e)}),e.wu.push(function(){var t=Ki(zi().mark((function t(n){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),XP(e)?JP(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:eR(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function NR(e){return e.Iu||(e.Iu=function(e,t,n){var r=TI(e);return r.su(),new jP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:mR.bind(null,e),Zr:bR.bind(null,e),tu:gR.bind(null,e),Zo:kR.bind(null,e)}),e.wu.push(function(){var t=Ki(zi().mark((function t(n){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,lR(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(wI("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var AR=function(){function e(t,n,r,i,a){O(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new AI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return F(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new NI(CI.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function PR(e,t){if(bI("AsyncQueue","".concat(t,": ").concat(e)),vE(e))return new NI(CI.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var RR=function(){function e(t){O(this,e),this.comparator=t?function(e,n){return t(e,n)||$I.comparator(e.key,n.key)}:function(e,t){return $I.comparator(e.key,t.key)},this.keyedMap=BT(),this.sortedSet=new SE(this.comparator)}return F(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),DR=function(){function e(){O(this,e),this.Tu=new SE($I.comparator)}return F(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):EI():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),OR=function(){function e(t,n,r,i,a,o,u,s,c){O(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return F(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&QS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,RR.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),LR=F((function e(){O(this,e),this.Au=void 0,this.listeners=[]})),FR=F((function e(){O(this,e),this.queries=new UT((function(e){return YS(e)}),QS),this.onlineState="Unknown",this.Ru=new Set}));function MR(e,t){return UR.apply(this,arguments)}function UR(){return UR=Ki(zi().mark((function e(t,n){var r,i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=TI(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new LR),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=PR(e.t0,"Initialization of query '".concat($S(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&zR(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),UR.apply(this,arguments)}function jR(e,t){return VR.apply(this,arguments)}function VR(){return VR=Ki(zi().mark((function e(t,n){var r,i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=TI(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),VR.apply(this,arguments)}function qR(e,t){var n,r=TI(e),i=!1,a=Hi(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Hi(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&zR(r)}function BR(e,t,n){var r=TI(e),i=r.queries.get(t);if(i){var a,o=Hi(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function zR(e){e.Ru.forEach((function(e){e.next()}))}var WR=function(){function e(t,n,r){O(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return F(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Hi(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new OR(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=OR.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),KR=function(){function e(t,n){O(this,e),this.ku=t,this.byteLength=n}return F(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),HR=function(){function e(t){O(this,e),this.It=t}return F(e,[{key:"Ji",value:function(e){return yC(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?xC(this.It,e.document,!1):vS.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return dC(e)}}]),e}(),GR=function(){function e(t,n,r){O(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QR(t)}return F(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=GI.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new HR(this.It),i=Hi(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=Hi(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||YT()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pP(this.localStore,new HR(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=Hi(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,mP(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function QR(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var YR=F((function e(t){O(this,e),this.key=t})),$R=F((function e(t){O(this,e),this.key=t})),JR=function(){function e(t,n){O(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=YT(),this.mutatedKeys=YT(),this.Gu=ZS(t),this.Qu=new RR(this.Gu)}return F(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new DR,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=JS(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return EI()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new OR(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new DR,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=YT(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new $R(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new YR(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=YT();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return OR.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),XR=F((function e(t,n,r){O(this,e),this.query=t,this.targetId=n,this.view=r})),ZR=F((function e(t){O(this,e),this.key=t,this.nc=!1})),eD=function(){function e(t,n,r,i,a,o){O(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new UT((function(e){return YS(e)}),QS),this.rc=new Map,this.oc=new Set,this.uc=new SE($I.comparator),this.cc=new Map,this.ac=new OA,this.hc={},this.lc=new Map,this.fc=lA.vn(),this.onlineState="Unknown",this.dc=void 0}return F(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function tD(e,t){return nD.apply(this,arguments)}function nD(){return nD=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=QD(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,uP(r.localStore,HS(n));case 8:return u=e.sent,r.isPrimaryClient&&GP(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,rD(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),nD.apply(this,arguments)}function rD(e,t,n,r,i){return iD.apply(this,arguments)}function iD(){return iD=Ki(zi().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Ki(zi().mark((function e(t,n,r,i){var a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,lP(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(ID(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,lP(t.localStore,n,!0);case 3:return o=e.sent,u=new JR(n,o.Hi),s=u.Wu(o.documents),c=ZT.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),ID(t,r,l.Xu),f=new XR(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),iD.apply(this,arguments)}function aD(e,t){return oD.apply(this,arguments)}function oD(){return oD=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=TI(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!QS(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,sP(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),QP(r.remoteStore,i.targetId),bD(r,i.targetId)})).catch(sE);case 9:e.next=14;break;case 11:return bD(r,i.targetId),e.next=14,sP(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),oD.apply(this,arguments)}function uD(e,t,n){return sD.apply(this,arguments)}function sD(){return sD=Ki(zi().mark((function e(t,n,r){var i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=YD(t),e.prev=1,e.next=4,function(e,t){var n,r,i=TI(e),a=WI.now(),o=t.reduce((function(e,t){return e.add(t.key)}),YT());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=VT(),s=YT();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Hi(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=IT(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new TT(c.key,l,pS(l.value.mapValue),gT.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zT(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new SE(qI)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,TD(i,a.changes);case 9:return e.next=11,lR(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=PR(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),sD.apply(this,arguments)}function cD(e,t){return lD.apply(this,arguments)}function lD(){return lD=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),e.prev=1,e.next=4,iP(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(SI(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?SI(n.nc):e.removedDocuments.size>0&&(SI(n.nc),n.nc=!1))})),e.next=8,TD(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,sE(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),lD.apply(this,arguments)}function fD(e,t,n){var r=TI(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=TI(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Hi(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&zR(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function hD(e,t,n){return dD.apply(this,arguments)}function dD(){return dD=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s,c;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=TI(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new SE($I.comparator)).insert(o,vS.newNoDocument(o,KI.min())),s=YT().add(o),c=new XT(KI.min(),new Map,new NE(qI),u,s),e.next=9,cD(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),SD(i),e.next=16;break;case 14:return e.next=16,sP(i.localStore,n,!1).then((function(){return bD(i,n,r)})).catch(sE);case 16:case"end":return e.stop()}}),e)}))),dD.apply(this,arguments)}function pD(e,t){return vD.apply(this,arguments)}function vD(){return vD=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),i=n.batch.batchId,e.prev=1,e.next=4,nP(r.localStore,n);case 4:return a=e.sent,wD(r,i,null),kD(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,TD(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vD.apply(this,arguments)}function mD(e,t,n){return yD.apply(this,arguments)}function yD(){return yD=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=TI(t),e.prev=1,e.next=4,function(e,t){var n=TI(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return SI(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,wD(i,n,r),kD(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,TD(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yD.apply(this,arguments)}function gD(e,t){return _D.apply(this,arguments)}function _D(){return _D=Ki(zi().mark((function e(t,n){var r,i,a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ZP((r=TI(t)).remoteStore)||wI("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=TI(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=PR(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),_D.apply(this,arguments)}function kD(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function wD(e,t,n){var r=TI(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function bD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Hi(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||xD(e,t)}))}function xD(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(QP(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),SD(e))}function ID(e,t,n){var r,i=Hi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof YR?(e.ac.addReference(a.key,t),ED(e,a)):a instanceof $R?(wI("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||xD(e,a.key)):EI()}}catch(o){i.e(o)}finally{i.f()}}function ED(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(wI("SyncEngine","New document in limbo: "+n),e.oc.add(r),SD(e))}function SD(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new $I(GI.fromString(t)),r=e.fc.next();e.cc.set(r,new ZR(n)),e.uc=e.uc.insert(n,r),GP(e.remoteStore,new yN(HS(VS(n.path)),r,2,bE.at))}}function TD(e,t,n){return CD.apply(this,arguments)}function CD(){return CD=Ki(zi().mark((function e(t,n,r){var i,a,o,u;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=TI(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=$A.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s,c,l;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return lE.forEach(n,(function(t){return lE.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return lE.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),vE(e.t0)){e.next=10;break}throw e.t0;case 10:wI("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Hi(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),CD.apply(this,arguments)}function ND(e,t){return AD.apply(this,arguments)}function AD(){return AD=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=TI(t)).currentUser.isEqual(n)){e.next=11;break}return wI("SyncEngine","User change. New user:",n.toKey()),e.next=5,eP(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new NI(CI.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,TD(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),AD.apply(this,arguments)}function PD(e,t){var n=TI(e),r=n.cc.get(t);if(r&&r.nc)return YT().add(r.key);var i=YT(),a=n.rc.get(t);if(!a)return i;var o,u=Hi(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function RD(e,t){return DD.apply(this,arguments)}function DD(){return DD=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),e.next=3,lP(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&ID(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),DD.apply(this,arguments)}function OD(e,t){return LD.apply(this,arguments)}function LD(){return LD=Ki(zi().mark((function e(t,n){var r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),e.abrupt("return",hP(r.localStore,n).then((function(e){return TD(r,e)})));case 2:case"end":return e.stop()}}),e)}))),LD.apply(this,arguments)}function FD(e,t,n,r){return MD.apply(this,arguments)}function MD(){return MD=Ki(zi().mark((function e(t,n,r,i){var a,o;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=TI(t),e.next=3,function(e,t){var n=TI(e),r=TI(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):lE.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,lR(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(wD(a,n,i||null),kD(a,n),function(e,t){TI(TI(e).mutationQueue).An(t)}(a.localStore,n)):EI();case 11:return e.next=13,TD(a,o);case 13:e.next=16;break;case 15:wI("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),MD.apply(this,arguments)}function UD(e,t){return jD.apply(this,arguments)}function jD(){return jD=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s,c,l;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QD(r=TI(t)),YD(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,VD(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,SR(r.remoteStore,!0);case 9:o=Hi(a);try{for(o.s();!(u=o.n()).done;)s=u.value,GP(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return bD(r,t),sP(r.localStore,t,!0)})),QP(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,VD(r,c);case 21:return function(e){var t=TI(e);t.cc.forEach((function(e,n){QP(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new SE($I.comparator)}(r),r.dc=!1,e.next=25,SR(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),jD.apply(this,arguments)}function VD(e,t,n){return qD.apply(this,arguments)}function qD(){return qD=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=TI(t),a=[],o=[],u=Hi(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,uP(i.localStore,HS(f[0]));case 11:l=e.sent,h=Hi(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,RD(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,fP(i.localStore,c);case 36:return y=e.sent,e.next=39,uP(i.localStore,y);case 39:return l=e.sent,e.next=42,rD(i,BD(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),qD.apply(this,arguments)}function BD(e){return jS(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function zD(e){var t=TI(e);return TI(TI(t.localStore).persistence).vi()}function WD(e,t,n,r){return KD.apply(this,arguments)}function KD(){return KD=Ki(zi().mark((function e(t,n,r,i){var a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=TI(t)).dc){e.next=3;break}return e.abrupt("return",void wI("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,hP(a.localStore,XS(o[0]));case 10:return u=e.sent,s=XT.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,DE.EMPTY_BYTE_STRING),e.next=14,TD(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,sP(a.localStore,n,!0);case 17:return bD(a,n,i),e.abrupt("break",20);case 19:EI();case 20:case"end":return e.stop()}}),e)}))),KD.apply(this,arguments)}function HD(e,t,n){return GD.apply(this,arguments)}function GD(){return GD=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=QD(t)).dc){e.next=45;break}a=Hi(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return wI("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,fP(i.localStore,u);case 12:return s=e.sent,e.next=15,uP(i.localStore,s);case 15:return c=e.sent,e.next=18,rD(i,BD(s),c.targetId,!1,c.resumeToken);case 18:GP(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Hi(r),e.prev=30,h=zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,sP(i.localStore,t,!1).then((function(){QP(i.remoteStore,t),bD(i,t)})).catch(sE);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),GD.apply(this,arguments)}function QD(e){var t=TI(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cD.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hD.bind(null,t),t.sc.Wo=qR.bind(null,t.eventManager),t.sc.wc=BR.bind(null,t.eventManager),t}function YD(e){var t=TI(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mD.bind(null,t),t}function $D(e,t,n){var r=TI(e);(function(){var e=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=TI(e),r=dC(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(QR(i)),a=new GR(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,TD(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=TI(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(xI("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var JD=function(){function e(){O(this,e),this.synchronizeTabs=!1}return F(e,[{key:"initialize",value:function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=LP(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return ZA(this.persistence,new JA,e.initialUser,this.It)}},{key:"yc",value:function(e){return new VA(BA.Bs,this.It)}},{key:"gc",value:function(e){return new TP}},{key:"terminate",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),XD=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return F(n,[{key:"initialize",value:function(){var e=Ki(zi().mark((function e(t){var r=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(j(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,YD(this.Ac.syncEngine);case 6:return e.next=8,lR(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return ZA(this.persistence,new JA,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new yA(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new wE(t,this.persistence);return new kE(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=YA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nA.withCacheSize(this.cacheSizeBytes):nA.DEFAULT;return new HA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,DP(),OP(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new TP}}]),n}(JD),ZD=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return F(n,[{key:"initialize",value:function(){var e=Ki(zi().mark((function e(t){var r,i=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(j(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof SP,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:FD.bind(null,r),$r:WD.bind(null,r),Br:HD.bind(null,r),vi:zD.bind(null,r),Mr:OD.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UD(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=DP();if(!SP.C(t))throw new NI(CI.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=YA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(XD),eO=function(){function e(){O(this,e)}return F(e,[{key:"initialize",value:function(){var e=Ki(zi().mark((function e(t,n){var r=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return fD(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ND.bind(null,this.syncEngine),e.next=12,SR(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new FR}},{key:"createDatastore",value:function(e){var t,n=LP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new RP(t));return function(e,t,n,r){return new VP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return fD(o.syncEngine,e,0)},a=NP.C()?new NP:new CP,new BP(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new eD(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=TI(t),wI("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,KP(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function tO(e,t,n){if(!n)throw new NI(CI.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function nO(e,t,n,r){if(!0===t&&!0===r)throw new NI(CI.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function rO(e){if(!$I.isDocumentKey(e))throw new NI(CI.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function iO(e){if($I.isDocumentKey(e))throw new NI(CI.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function aO(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":EI()}function oO(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new NI(CI.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=aO(e);throw new NI(CI.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function uO(e,t){if(t<=0)throw new NI(CI.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var sO=new Map,cO=function(){function e(t){var n;if(O(this,e),void 0===t.host){if(void 0!==t.ssl)throw new NI(CI.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new NI(CI.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,nO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return F(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),lO=function(){function e(t,n,r,i){O(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cO({}),this._settingsFrozen=!1}return F(e,[{key:"app",get:function(){if(!this._app)throw new NI(CI.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new NI(CI.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cO(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new RI;switch(e.type){case"gapi":var t=e.client;return new FI(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new NI(CI.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=sO.get(e);t&&(wI("ComponentProvider","Removing Datastore"),sO.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function fO(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=oO(e,lO))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&xI("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=yI.MOCK_USER;else{o=ya(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new NI(CI.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yI(s)}e._authCredentials=new DI(new PI(o,u))}}var hO=function(){function e(t,n,r){O(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return F(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new pO(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),dO=function(){function e(t,n,r){O(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return F(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),pO=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e,r,VS(i)))._path=i,a.type="collection",a}return F(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new hO(this.firestore,null,new $I(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(dO);function vO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Va(e),tO("collection","path",t),e instanceof lO){var a=GI.fromString.apply(GI,[t].concat(r));return iO(a),new pO(e,null,a)}if(!(e instanceof hO||e instanceof pO))throw new NI(CI.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(GI.fromString.apply(GI,[t].concat(r)));return iO(o),new pO(e.firestore,null,o)}function mO(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Va(e),1===arguments.length&&(t=VI.R()),tO("doc","path",t),e instanceof lO){var a=GI.fromString.apply(GI,[t].concat(r));return rO(a),new hO(e,null,new $I(a))}if(!(e instanceof hO||e instanceof pO))throw new NI(CI.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(GI.fromString.apply(GI,[t].concat(r)));return rO(o),new hO(e.firestore,e instanceof pO?e.converter:null,new $I(o))}function yO(e,t){return e=Va(e),t=Va(t),(e instanceof hO||e instanceof pO)&&(t instanceof hO||t instanceof pO)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gO(e,t){return e=Va(e),t=Va(t),e instanceof dO&&t instanceof dO&&e.firestore===t.firestore&&QS(e._query,t._query)&&e.converter===t.converter}function _O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ki(zi().mark((function r(){var i;return zi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var kO=function(){function e(t){O(this,e),this.observer=t,this.muted=!1}return F(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):bI("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wO=function(){function e(t,n){var r=this;O(this,e),this.Pc=t,this.It=n,this.metadata=new AI,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return F(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Ki(zi().mark((function e(){var t,n,r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new KR(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Ki(zi().mark((function e(){var t,n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Ki(zi().mark((function e(){var t,n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),bO=function(){function e(t){O(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return F(e,[{key:"lookup",value:function(){var e=Ki(zi().mark((function e(t){var n,r=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new NI(CI.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ki(zi().mark((function e(t,n){var r,i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),i=kC(r.It)+"/documents",a={documents:n.map((function(e){return mC(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=IC(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());SI(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new DT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ki(zi().mark((function e(){var t,n=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=$I.fromPath(t);n.mutations.push(new OT(r,n.precondition(r)))})),e.next=7,function(){var e=Ki(zi().mark((function e(t,n){var r,i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TI(t),i=kC(r.It)+"/documents",a={writes:n.map((function(e){return EC(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw EI();t=KI.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new NI(CI.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(KI.min())?gT.exists(!1):gT.updateTime(t):gT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(KI.min()))throw new NI(CI.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gT.updateTime(t)}return gT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xO=function(){function e(t,n,r,i,a){O(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new FP(this.asyncQueue,"transaction_retry")}return F(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Ki(zi().mark((function t(){var n,r;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new bO(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!zE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!FT(t)}return!1}}]),e}(),IO=function(){function e(t,n,r,i){var a=this;O(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yI.UNAUTHENTICATED,this.clientId=VI.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wI("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return wI("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return F(e,[{key:"getConfiguration",value:function(){var e=Ki(zi().mark((function e(){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new NI(CI.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new AI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ki(zi().mark((function n(){var r;return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=PR(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function EO(e,t){return SO.apply(this,arguments)}function SO(){return SO=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),wI("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,eP(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),SO.apply(this,arguments)}function TO(e,t){return CO.apply(this,arguments)}function CO(){return CO=Ki(zi().mark((function e(t,n){var r,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,NO(t);case 3:return r=e.sent,wI("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return IR(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return IR(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),CO.apply(this,arguments)}function NO(e){return AO.apply(this,arguments)}function AO(){return AO=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return wI("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,EO(t,new JD);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),AO.apply(this,arguments)}function PO(e){return RO.apply(this,arguments)}function RO(){return RO=Ki(zi().mark((function e(t){return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return wI("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,TO(t,new eO);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),RO.apply(this,arguments)}function DO(e){return NO(e).then((function(e){return e.persistence}))}function OO(e){return NO(e).then((function(e){return e.localStore}))}function LO(e){return PO(e).then((function(e){return e.remoteStore}))}function FO(e){return PO(e).then((function(e){return e.syncEngine}))}function MO(e){return PO(e).then((function(e){return e.datastore}))}function UO(e){return jO.apply(this,arguments)}function jO(){return jO=Ki(zi().mark((function e(t){var n,r;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PO(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=tD.bind(null,n.syncEngine),r.onUnlisten=aD.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),jO.apply(this,arguments)}function VO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function i(){return zi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kO({next:function(a){t.enqueueAndForget((function(){return jR(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new NI(CI.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new NI(CI.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new WR(VS(n.path),a,{includeMetadataChanges:!0,Nu:!0});return MR(e,o)},i.next=3,UO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function i(){return zi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kO({next:function(n){t.enqueueAndForget((function(){return jR(e,o)})),n.fromCache&&"server"===r.source?i.reject(new NI(CI.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new WR(n,a,{includeMetadataChanges:!0,Nu:!0});return MR(e,o)},i.next=3,UO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var BO=function(){function e(){var t=this;O(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new FP(this,"async_queue_retry"),this.Wc=function(){var e=OP();e&&wI("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=OP();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return F(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=OP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new AI;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Ki(zi().mark((function e(){var t=this;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),vE(e.t0)){e.next=12;break}throw e.t0;case 12:wI("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw bI("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=AR.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&EI()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Ki(zi().mark((function e(){var t;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Hi(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Hi(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function zO(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Hi(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var WO=function(){function e(){O(this,e),this._progressObserver={},this._taskCompletionResolver=new AI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return F(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),KO=function(e){U(n,e);var t=W(n);function n(e,r,i,a){var o;return O(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new BO,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return F(n,[{key:"_terminate",value:function(){return this._firestoreClient||GO(this),this._firestoreClient.terminate()}}]),n}(lO);function HO(e){return e._firestoreClient||GO(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function GO(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new qE(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new IO(e._authCredentials,e._appCheckCredentials,e._queue,r)}function QO(e,t,n){var r=new AI;return e.asyncQueue.enqueue(Ki(zi().mark((function i(){var a;return zi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,EO(e,n);case 3:return i.next=5,TO(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===CI.FAILED_PRECONDITION||e.code===CI.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:xI("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function YO(e){return function(e){return e.asyncQueue.enqueue(Ki(zi().mark((function t(){var n,r;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,DO(e);case 2:return n=t.sent,t.next=5,LO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=TI(e);return t._u.delete(0),zP(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(HO(e=oO(e,KO)))}function $O(e){return function(e){return e.asyncQueue.enqueue(Ki(zi().mark((function t(){var n,r;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,DO(e);case 2:return n=t.sent,t.next=5,LO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=TI(t))._u.add(0),e.next=4,KP(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(HO(e=oO(e,KO)))}function JO(e,t){var n=HO(e=oO(e,KO)),r=new WO;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wO(e,t)}(function(e,t){if(e instanceof Uint8Array)return _O(e,t);if(e instanceof ArrayBuffer)return _O(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,LP(t));e.asyncQueue.enqueueAndForget(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$D,t.next=3,FO(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function XO(e,t){return function(e,t){return e.asyncQueue.enqueue(Ki(zi().mark((function n(){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=TI(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,OO(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(HO(e=oO(e,KO)),t).then((function(t){return t?new dO(e,null,t.query):null}))}function ZO(e){if(e._initialized||e._terminated)throw new NI(CI.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eL=function(){function e(t){O(this,e),this._byteString=t}return F(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(DE.fromBase64String(t))}catch(t){throw new NI(CI.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(DE.fromUint8Array(t))}}]),e}(),tL=function(){function e(){O(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new NI(CI.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new YI(n)}return F(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var nL=F((function e(t){O(this,e),this._methodName=t})),rL=function(){function e(t,n){if(O(this,e),!isFinite(t)||t<-90||t>90)throw new NI(CI.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new NI(CI.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return F(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return qI(this._lat,e._lat)||qI(this._long,e._long)}}]),e}(),iL=/^__.*__$/,aL=function(){function e(t,n,r){O(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return F(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new TT(e,this.data,this.fieldMask,t,this.fieldTransforms):new ST(e,this.data,t,this.fieldTransforms)}}]),e}(),oL=function(){function e(t,n,r){O(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return F(e,[{key:"toMutation",value:function(e,t){return new TT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function uL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw EI()}}var sL=function(){function e(t,n,r,i,a,o){O(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return F(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return CL(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(uL(this.sa)&&iL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),cL=function(){function e(t,n,r){O(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||LP(t)}return F(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sL({sa:e,methodName:t,fa:n,path:YI.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function lL(e){var t=e._freezeSettings(),n=LP(e._databaseId);return new cL(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fL(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);IL("Data must be an object, but it was:",o,r);var u,s,c=bL(r,o);if(a.merge)u=new RE(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Hi(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=EL(t,d,n);if(!o.contains(p))throw new NI(CI.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));NL(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new RE(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new aL(new dS(c),u,s)}var hL=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nL);function dL(e,t,n){return new sL({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var pL=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"_toFieldTransform",value:function(e){return new mT(e.path,new sT)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nL),vL=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e))._a=r,i}return F(n,[{key:"_toFieldTransform",value:function(e){var t=dL(this,e,!0),n=this._a.map((function(e){return wL(e,t)})),r=new cT(n);return new mT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nL),mL=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e))._a=r,i}return F(n,[{key:"_toFieldTransform",value:function(e){var t=dL(this,e,!0),n=this._a.map((function(e){return wL(e,t)})),r=new fT(n);return new mT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nL),yL=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e)).wa=r,i}return F(n,[{key:"_toFieldTransform",value:function(e){var t=new dT(e.It,rT(e.It,this.wa));return new mT(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nL);function gL(e,t,n,r){var i=e.da(1,t,n);IL("Data must be an object, but it was:",i,r);var a=[],o=dS.empty();IE(r,(function(e,r){var u=TL(t,e,n);r=Va(r);var s=i.ca(u);if(r instanceof hL)a.push(u);else{var c=wL(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new RE(a);return new oL(o,u,i.fieldTransforms)}function _L(e,t,n,r,i,a){var o=e.da(1,t,n),u=[EL(t,r,n)],s=[i];if(a.length%2!=0)throw new NI(CI.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(EL(t,a[c])),s.push(a[c+1]);for(var l=[],f=dS.empty(),h=u.length-1;h>=0;--h)if(!NL(l,u[h])){var d=u[h],p=s[h];p=Va(p);var v=o.ca(d);if(p instanceof hL)l.push(d);else{var m=wL(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new RE(l);return new oL(f,y,o.fieldTransforms)}function kL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wL(n,e.da(r?4:3,t))}function wL(e,t){if(xL(e=Va(e)))return IL("Unsupported field value:",t,e),bL(e,t);if(e instanceof nL)return function(e,t){if(!uL(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Hi(e);try{for(a.s();!(n=a.n()).done;){var o=wL(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Va(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rT(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=WI.fromDate(e);return{timestampValue:lC(t.It,n)}}if(e instanceof WI){var r=new WI(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lC(t.It,r)}}if(e instanceof rL)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eL)return{bytesValue:fC(t.It,e._byteString)};if(e instanceof hO){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pC(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(aO(e)))}(e,t)}function bL(e,t){var n={};return EE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):IE(e,(function(e,r){var i=wL(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xL(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof WI||e instanceof rL||e instanceof eL||e instanceof hO||e instanceof nL)}function IL(e,t,n){if(!xL(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=aO(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function EL(e,t,n){if((t=Va(t))instanceof tL)return t._internalPath;if("string"==typeof t)return TL(e,t);throw CL("Field path arguments must be of type string or ",e,!1,void 0,n)}var SL=new RegExp("[~\\*/\\[\\]]");function TL(e,t,n){if(t.search(SL)>=0)throw CL("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return K(tL,D(t.split(".")))._internalPath}catch(Qn){throw CL("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function CL(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new NI(CI.INVALID_ARGUMENT,u+e+s)}function NL(e,t){return e.some((function(e){return e.isEqual(t)}))}var AL=function(){function e(t,n,r,i,a){O(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return F(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new hO(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new PL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(RL("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),PL=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"data",value:function(){return ed(j(n.prototype),"data",this).call(this)}}]),n}(AL);function RL(e,t){return"string"==typeof t?TL(e,t):t instanceof tL?t._internalPath:t._delegate._internalPath}function DL(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new NI(CI.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var OL=F((function e(){O(this,e)}));function LL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var FL=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return F(n,[{key:"_apply",value:function(e){var t=lL(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new NI(CI.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){GL(o,a);var s,c=[],l=Hi(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(HL(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=HL(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||GL(o,a),u=kL(n,"where",o,"in"===a||"not-in"===a);var h=IS.create(i,a,u);return function(e,t){if(t.dt()){var n=zS(e);if(null!==n&&!n.isEqual(t.field))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=BS(e);null!==r&&QL(e,t.field,r)}var i=function(e,t){var n,r=Hi(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new NI(CI.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new NI(CI.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new dO(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new US(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(OL);var ML=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return F(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new NI(CI.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new NI(CI.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new OS(t,n);return function(e,t){if(null===BS(e)){var n=zS(e);null!==n&&QL(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new dO(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new US(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(OL);var UL=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return F(n,[{key:"_apply",value:function(e){return new dO(e.firestore,e.converter,GS(e._query,this.Ia,this.Ta))}}]),n}(OL);var jL=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return F(n,[{key:"_apply",value:function(e){var t=KL(e,this.type,this.Ea,this.Aa);return new dO(e.firestore,e.converter,function(e,t){return new US(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(OL);function VL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jL("startAt",t,!0)}function qL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jL("startAfter",t,!1)}var BL=function(e){U(n,e);var t=W(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return F(n,[{key:"_apply",value:function(e){var t=KL(e,this.type,this.Ea,this.Aa);return new dO(e.firestore,e.converter,function(e,t){return new US(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(OL);function zL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BL("endBefore",t,!1)}function WL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BL("endAt",t,!0)}function KL(e,t,n,r){if(n[0]=Va(n[0]),n[0]instanceof AL)return function(e,t,n,r,i){if(!r)throw new NI(CI.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Hi(KS(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(tS(t,r.key));else{var c=r.data.field(s.field);if(UE(c))throw new NI(CI.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new NI(CI.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new DS(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=lL(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new NI(CI.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new NI(CI.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!WS(e)&&-1!==c.indexOf("/"))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(GI.fromString(c));if(!$I.isDocumentKey(l))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new $I(l);u.push(tS(t,f))}else{var h=kL(n,r,c);u.push(h)}}return new DS(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function HL(e,t,n){if("string"==typeof(n=Va(n))){if(""===n)throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WS(t)&&-1!==n.indexOf("/"))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(GI.fromString(n));if(!$I.isDocumentKey(r))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tS(e,new $I(r))}if(n instanceof hO)return tS(e,n._key);throw new NI(CI.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(aO(n),"."))}function GL(e,t){if(!Array.isArray(e)||0===e.length)throw new NI(CI.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new NI(CI.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function QL(e,t,n){if(!n.isEqual(t))throw new NI(CI.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var YL=function(){function e(){O(this,e)}return F(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(QE(e)){case 0:return null;case 1:return e.booleanValue;case 2:return FE(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ME(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw EI()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return IE(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new rL(FE(e.latitude),FE(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=jE(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(VE(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=LE(e);return new WI(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=GI.fromString(e);SI(UC(n));var r=new BE(n.get(1),n.get(3)),i=new $I(n.popFirst(5));return r.isEqual(t)||bI("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $L(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var JL=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return F(n,[{key:"convertBytes",value:function(e){return new eL(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hO(this.firestore,null,t)}}]),n}(YL),XL=function(){function e(t,n){O(this,e),this.hasPendingWrites=t,this.fromCache=n}return F(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ZL=function(e){U(n,e);var t=W(n);function n(e,r,i,a,o,u){var s;return O(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return F(n,[{key:"exists",value:function(){return ed(j(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new eF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(RL("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(AL),eF=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ed(j(n.prototype),"data",this).call(this,e)}}]),n}(ZL),tF=function(){function e(t,n,r,i){O(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new XL(i.hasPendingWrites,i.fromCache),this.query=r}return F(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new eF(n._firestore,n._userDataWriter,r.key,r,new XL(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new NI(CI.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new eF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new XL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new eF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new XL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:nF(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function nF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return EI()}}function rF(e,t){return e instanceof ZL&&t instanceof ZL?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof tF&&t instanceof tF&&e._firestore===t._firestore&&gO(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var iF=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return F(n,[{key:"convertBytes",value:function(e){return new eL(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new hO(this.firestore,null,t)}}]),n}(YL);function aF(e){e=oO(e,hO);var t=oO(e.firestore,KO),n=HO(t),r=new iF(t);return function(e,t){var n=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function r(){return zi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ki(zi().mark((function e(t,n,r){var i,a;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=TI(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new NI(CI.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=PR(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ZL(t,r,e._key,n,new XL(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function oF(e){e=oO(e,dO);var t=oO(e.firestore,KO),n=HO(t),r=new iF(t);return function(e,t){var n=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function r(){return zi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ki(zi().mark((function e(t,n,r){var i,a,o,u,s;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lP(t,n,!0);case 3:i=e.sent,a=new JR(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=PR(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,OO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new tF(t,r,e,n)}))}function uF(e,t,n){e=oO(e,hO);var r=oO(e.firestore,KO),i=$L(e.converter,t,n);return fF(r,[fL(lL(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,gT.none())])}function sF(e,t,n){e=oO(e,hO);for(var r=oO(e.firestore,KO),i=lL(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return fF(r,[("string"==typeof(t=Va(t))||t instanceof tL?_L(i,"updateDoc",e._key,t,n,o):gL(i,"updateDoc",e._key,t)).toMutation(e._key,gT.exists(!0))])}function cF(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Va(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||zO(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(zO(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof hO)l=oO(e.firestore,KO),f=VS(e._key.path),c={next:function(t){n[s]&&n[s](hF(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=oO(e,dO);l=oO(p.firestore,KO),f=p._query;var v=new iF(l);c={next:function(e){n[s]&&n[s](new tF(l,v,p,e))},error:n[s+1],complete:n[s+2]},DL(e._query)}return function(e,t,n,r){var i=new kO(r),a=new WR(t,i,n);return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=MR,t.next=3,UO(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=jR,t.next=3,UO(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(HO(l),f,h,c)}function lF(e,t){return function(e,t){var n=new kO(t);return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){TI(e).Ru.add(t),t.next()},t.next=3,UO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Ki(zi().mark((function t(){return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){TI(e).Ru.delete(t)},t.next=3,UO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(HO(e=oO(e,KO)),zO(t)?t:{next:t})}function fF(e,t){return function(e,t){var n=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function r(){return zi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=uD,r.next=3,FO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(HO(e),t)}function hF(e,t,n){var r=n.docs.get(t._key),i=new iF(e);return new ZL(e,i,t._key,r,new XL(n.hasPendingWrites,n.fromCache),t.converter)}var dF={maxAttempts:5},pF=function(){function e(t,n){O(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lL(t)}return F(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=vF(e,this._firestore),i=$L(r.converter,t,n),a=fL(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,gT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=vF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Va(t))||t instanceof tL?_L(this._dataReader,"WriteBatch.update",i._key,t,n,o):gL(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,gT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=vF(e,this._firestore);return this._mutations=this._mutations.concat(new DT(t._key,gT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new NI(CI.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function vF(e,t){if((e=Va(e)).firestore!==t)throw new NI(CI.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var mF=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r))._firestore=e,i}return F(n,[{key:"get",value:function(e){var t=this,r=vF(e,this._firestore),i=new iF(this._firestore);return ed(j(n.prototype),"get",this).call(this,e).then((function(e){return new ZL(t._firestore,i,r._key,e._document,new XL(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){O(this,e),this._firestore=t,this._transaction=n,this._dataReader=lL(t)}return F(e,[{key:"get",value:function(e){var t=this,n=vF(e,this._firestore),r=new JL(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return EI();var i=e[0];if(i.isFoundDocument())return new AL(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new AL(t._firestore,r,n._key,null,n.converter);throw EI()}))}},{key:"set",value:function(e,t,n){var r=vF(e,this._firestore),i=$L(r.converter,t,n),a=fL(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=vF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Va(t))||t instanceof tL?_L(this._dataReader,"Transaction.update",i._key,t,n,o):gL(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=vF(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vL("arrayUnion",t)}function gF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mL("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gI=e}(Lo),Co(new qa("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new KO(new OI(e.getProvider("auth-internal")),new UI(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new NI(CI.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BE(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),qo(mI,"3.7.2",e),qo(mI,"3.7.2","esm2017")}();function _F(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new NI("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kF(){if("undefined"===typeof Uint8Array)throw new NI("unimplemented","Uint8Arrays are not available in this environment.")}function wF(){if("undefined"==typeof atob)throw new NI("unimplemented","Blobs are unavailable in Firestore in this environment.")}var bF=function(){function e(t){O(this,e),this._delegate=t}return F(e,[{key:"toBase64",value:function(){return wF(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return kF(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return wF(),new e(eL.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return kF(),new e(eL.fromUint8Array(t))}}]),e}();function xF(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Hi(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var IF=function(){function e(){O(this,e)}return F(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ZO(e=oO(e,KO));var n=HO(e),r=e._freezeSettings(),i=new eO;return QO(n,i,new XD(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ZO(e=oO(e,KO));var t=HO(e),n=e._freezeSettings(),r=new eO;return QO(t,r,new ZD(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new NI(CI.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new AI;return e._queue.enqueueAndForgetEvenWhileRestricted(Ki(zi().mark((function n(){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ki(zi().mark((function e(t){var n;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hE.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,hE.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(YA(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),EF=function(){function e(t,n,r){var i=this;O(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof BE||(this._appCompat=t)}return F(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||xI("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fO(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return YO(this._delegate)}},{key:"disableNetwork",value:function(){return $O(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&nO("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function n(){return zi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=gD,n.next=3,FO(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(HO(e=oO(e,KO)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return lF(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new NI("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new jF(this,vO(this._delegate,e))}catch(t){throw PF(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new AF(this,mO(this._delegate,e))}catch(t){throw PF(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new FF(this,function(e,t){if(e=oO(e,lO),tO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new NI(CI.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new dO(e,null,function(e){return new US(GI.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw PF(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=oO(e,KO);var r=Object.assign(Object.assign({},dF),n);return function(e){if(e.maxAttempts<1)throw new NI(CI.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new AI;return e.asyncQueue.enqueueAndForget(Ki(zi().mark((function i(){var a;return zi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,MO(e);case 2:a=i.sent,new xO(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(HO(e),(function(n){return t(new mF(e,n))}),r)}(this._delegate,(function(n){return e(new TF(t,n))}))}},{key:"batch",value:function(){var e=this;return HO(this._delegate),new CF(new pF(this._delegate,(function(t){return fF(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return JO(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return XO(this._delegate,e).then((function(e){return e?new FF(t,e):null}))}}]),e}(),SF=function(e){U(n,e);var t=W(n);function n(e){var r;return O(this,n),(r=t.call(this)).firestore=e,r}return F(n,[{key:"convertBytes",value:function(e){return new bF(new eL(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return AF.forKey(t,this.firestore,null)}}]),n}(YL);var TF=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new SF(t)}return F(e,[{key:"get",value:function(e){var t=this,n=VF(e);return this._delegate.get(n).then((function(e){return new OF(t._firestore,new ZL(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=VF(e);return n?(_F("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=VF(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=VF(e);return this._delegate.delete(t),this}}]),e}(),CF=function(){function e(t){O(this,e),this._delegate=t}return F(e,[{key:"set",value:function(e,t,n){var r=VF(e);return n?(_F("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=VF(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=VF(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),NF=function(){function e(t,n,r){O(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return F(e,[{key:"fromFirestore",value:function(e,t){var n=new eF(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new LF(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new SF(t),n),i.set(n,a)),a}}]),e}();NF.INSTANCES=new WeakMap;var AF=function(){function e(t,n){O(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SF(t)}return F(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new jF(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new jF(this.firestore,vO(this._delegate,e))}catch(t){throw PF(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Va(e))instanceof hO&&yO(this._delegate,e)}},{key:"set",value:function(e,t){t=_F("DocumentReference.set",t);try{return t?uF(this._delegate,e,t):uF(this._delegate,e)}catch(n){throw PF(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?sF(this._delegate,e):sF.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw PF(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return fF(oO(e.firestore,KO),[new DT(e._key,gT.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=RF(n),a=DF(n,(function(t){return new OF(e.firestore,new ZL(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return cF(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?aF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=oO(e,hO);var t=oO(e.firestore,KO);return VO(HO(t),e._key,{source:"server"}).then((function(n){return hF(t,e,n)}))}(this._delegate):function(e){e=oO(e,hO);var t=oO(e.firestore,KO);return VO(HO(t),e._key).then((function(n){return hF(t,e,n)}))}(this._delegate),t.then((function(e){return new OF(n.firestore,new ZL(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(NF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new NI("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new hO(n._delegate,r,new $I(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new hO(n._delegate,r,t))}}]),e}();function PF(e,t,n){return e.message=e.message.replace(t,n),e}function RF(e){var t,n=Hi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!xF(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function DF(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=xF(e[0])?e[0]:xF(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var OF=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return F(e,[{key:"ref",get:function(){return new AF(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return rF(this._delegate,e._delegate)}}]),e}(),LF=function(e){U(n,e);var t=W(n);function n(){return O(this,n),t.apply(this,arguments)}return F(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||EI()}(void 0!==t),t}}]),n}(OF),FF=function(){function e(t,n){O(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SF(t)}return F(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,LL(this._delegate,function(e,t,n){var r=t,i=RL("where",e);return new FL(i,r,n)}(t,n,r)))}catch(i){throw PF(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,LL(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=RL("orderBy",e);return new ML(n,t)}(t,n)))}catch(r){throw PF(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,LL(this._delegate,function(e){return uO("limit",e),new UL("limit",e,"F")}(t)))}catch(n){throw PF(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,LL(this._delegate,function(e){return uO("limitToLast",e),new UL("limitToLast",e,"L")}(t)))}catch(n){throw PF(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,LL(this._delegate,VL.apply(void 0,arguments)))}catch(t){throw PF(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,LL(this._delegate,qL.apply(void 0,arguments)))}catch(t){throw PF(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,LL(this._delegate,zL.apply(void 0,arguments)))}catch(t){throw PF(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,LL(this._delegate,WL.apply(void 0,arguments)))}catch(t){throw PF(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gO(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?oF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=oO(e,dO);var t=oO(e.firestore,KO),n=HO(t),r=new iF(t);return qO(n,e._query,{source:"server"}).then((function(n){return new tF(t,r,e,n)}))}(this._delegate):function(e){e=oO(e,dO);var t=oO(e.firestore,KO),n=HO(t),r=new iF(t);return DL(e._query),qO(n,e._query).then((function(n){return new tF(t,r,e,n)}))}(this._delegate),t.then((function(e){return new UF(n.firestore,new tF(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=RF(n),a=DF(n,(function(t){return new UF(e.firestore,new tF(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return cF(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(NF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),MF=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return F(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new LF(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),UF=function(){function e(t,n){O(this,e),this._firestore=t,this._delegate=n}return F(e,[{key:"query",get:function(){return new FF(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new LF(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new MF(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new LF(n._firestore,r))}))}},{key:"isEqual",value:function(e){return rF(this._delegate,e._delegate)}}]),e}(),jF=function(e){U(n,e);var t=W(n);function n(e,r){var i;return O(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return F(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new AF(this.firestore,e):null}},{key:"doc",value:function(e){try{return new AF(this.firestore,void 0===e?mO(this._delegate):mO(this._delegate,e))}catch(t){throw PF(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=oO(e.firestore,KO),r=mO(e),i=$L(e.converter,t);return fF(n,[fL(lL(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,gT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new AF(t.firestore,e)}))}},{key:"isEqual",value:function(e){return yO(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(NF.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(FF);function VF(e){return oO(e,hO)}var qF=function(){function e(){O(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=K(tL,n)}return F(e,[{key:"isEqual",value:function(e){return(e=Va(e))instanceof tL&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(YI.keyField().canonicalString())}}]),e}(),BF=function(){function e(t){O(this,e),this._delegate=t}return F(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new pL("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new hL("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=yF.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=gF.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new yL("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),zF={Firestore:EF,GeoPoint:rL,Timestamp:WI,Blob:bF,Transaction:TF,WriteBatch:CF,DocumentReference:AF,DocumentSnapshot:OF,Query:FF,QueryDocumentSnapshot:LF,QuerySnapshot:UF,CollectionReference:jF,FieldPath:qF,FieldValue:BF,setLogLevel:function(e){!function(e){_I.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new qa("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},zF)))}(e,(function(e,t){return new EF(e,t,new IF)})),e.registerVersion("@firebase/firestore-compat","0.2.2")}(Xh);Xh.initializeApp({apiKey:"AIzaSyAj_z4uNCAb8O6Vqmih-Fbs_Mm0cm2ZeYY",authDomain:"sweeptakes-28.firebaseapp.com",databaseURL:"https://sweeptakes-28-default-rtdb.firebaseio.com",projectId:"sweeptakes-28",storageBucket:"sweeptakes-28.appspot.com",messagingSenderId:"903090746477",appId:"1:903090746477:web:8d637ee0d9c5f74ee4fb64"}).firestore();i.createRoot(document.getElementById("root")).render((0,qi.jsx)(t.StrictMode,{children:(0,qi.jsx)(Mi,{children:(0,qi.jsx)(E,{store:Kh,children:(0,qi.jsx)(zh,{})})})})),Wh()}()}();
//# sourceMappingURL=main.09522fd0.js.map